{"version":3,"sources":["Img/profile-img-none.png","Img/Logo_mybox.png","Components/login.js","Components/store.js","Components/auth.js","Components/getthumbnails.js","Components/dowload.js","Components/delete.js","Components/renameFiles.js","Components/renameFolder.js","Components/modalbreadcrumb.js","Components/movefiles.js","Components/addFavorites.js","Components/copyfiles.js","Components/listitems.js","Components/readablebytes.js","Components/lastedited.js","Components/createfolder.js","Components/search.js","Components/breadcrumbs.js","Components/uploadfile.js","Components/userAccount.js","Components/logout.js","Components/favoriteList.js","Components/home.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","dbx","Dropbox","clientId","fetch","react_default","a","createElement","Fragment","Helmet","className","href","getAuthenticationUrl","token$","BehaviorSubject","window","localStorage","getItem","updateToken","newToken","setItem","removeItem","next","favorites$","JSON","parse","updateFavoriteToken","newFavorites","stringify","Auth","_useState","useState","_useState2","Object","slicedToArray","isLoggedIn","updateIsLoggedIn","_useState3","_useState4","error","errorUpdate","useEffect","console","log","hash","location","match","react_router_dom","to","react_router","pathname","state","getThumbnails","entries","promises","chunk","map","x","filesGetThumbnailBatch","entry","path","id","format",".tag","size","mode","Promise","all","then","results","flatten","downloadFile","e","target","dataset","tag","option","accessToken","value","filesGetTemporaryLink","folder","response","link","document","body","appendChild","click","removeChild","catch","Delete","props","delModal","element","useRef","delFile","updateDelFile","style","pointerEvents","ref","color","name","onClick","substring","filesDeleteV2","i","length","metadata","newArray","toConsumableArray","splice","filesListFolder","thumbnailUpdate","dataUpdate","oldDataUpdate","current","visibility","zIndex","pollUpdateMode","overflowY","data-path","RenameFile","renameInput","inputEl","clearInput","newUrl","updateNewUrl","rename","updateRename","display","outline","placeholder","type","onChange","idx","lastIndexOf","newIdx","newPath","filesMoveV2","from_path","to_path","autorename","old","ReNameFolder","renameInputFolder","inputElFolder","clearInputFolder","okBtn","reNameMess","includes","background","split","strippedPath","slice","join","ModalBreadcrumbs","withBreadcrumbs","breadcrumb","_ref","breadcrumbs","_ref2","key","url","MoveFiles","moveFolders","moveModal","moveMessRef","moveError","updateMoveError","movePath","updateMovePath","_useState5","_useState6","startPath","updateStartPath","_useState7","_useState8","fileTransfer","updateFileTransfer","_useState9","_useState10","showModal","updateShowModal","_useState11","_useState12","data","updateData","decodeURIComponent","arr","path_lower","push","newName2","setPath","mapping","data-name","data-folder","path_display","data-tag","data-id","modalbreadcrumb","index","newName","AddFavorites","favArray","favorites","find","filter","fontSize","WebkitTextStroke","concat","objectSpread","CopyFiles","closeModal","filesCopyV2","ListItems","clearSearchFn","clearSearchUpdate","arrIdx","listData","renderData","noSearchResult","thumbs","thumbnailsLoaded","thumbnails","undefined","newThumbs","src","thumbnail","alt","title","width","bytes","Math","floor","pow","toFixed","readableBytes","date","year","month","day","replace","monthInText","moment","fromNow","lastEdited","server_modified","textAlign","renameFiles","Components_movefiles","copyfiles","favUpdate","addFavorites","Components_delete","renameFolder","CreateFolder","input","updateInput","inputRef","newFolder","uploadFolder","uploadModal","htmlFor","filesCreateFolderV2","setTimeout","Search","clearSearch","filesSearch","query","matches","newArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","Breadcrumbs","UploadFile","uploadFile","uploadMessage","updateMessage","multiple","preventDefault","fileNodeList","files","fileList","Array","from","_loop","filesUpload","contents","workItems","offset","chunkSize","min","reduce","acc","blob","items","filesUploadSessionStart","close","session_id","sessionId","cursor","filesUploadSessionAppendV2","commit","mute","filesUploadSessionFinish","resolve","result","UserAccount","photoRef","updateName","mail","updateMail","photoUrl","updatePhotUrl","country","updateCountry","usersGetCurrentAccount","display_name","email","profile_photo_url","checkPhoto","onMouseOverPhoto","onMouseOutPhoto","countryFlag","toLowerCase","border","onMouseOver","onMouseOut","require","index_es","code","svg","without","rel","LogOut","updateTokenState","FavoriteList","fav","updateFav","subscription","subscribe","unsubscribe","sortData","sort","b","reverse","setInterval","recursive","chekId","checkIdFav","z","val","indexOf","newFavArr","newFav","renderingFavorites","brak","renameBrackets","position","top","left","Home","token","updateThumbnails","updateThumbnailsLoaded","updateFavorites","oldData","updateOldData","_useState13","_useState14","pollMode","updatePollMode","_useState15","_useState16","updateClearSearch","dataRef","isLoaded","every","poll","dataTmp","responseRev","rev","y","oldrespRev","responseName","oldrespName","diffRev","el","diffName","rep","clearInterval","status","bool","search","searchData","Components_userAccount","logout","uploadfile","Components_createfolder","Components_breadcrumbs","colSpan","Components_listitems","favoriteList","upFavTok","App","exact","component","Boolean","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"oHAAAA,EAAAC,QAAA,s6ICAAD,EAAAC,QAAiBC,EAAAC,EAAuB,2IC4BzBC,SApBD,WAEd,IAAMC,EAAM,IAAIC,UAAQ,CACtBC,SAPc,kBAQdC,MAAOA,QAIP,OACEC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAACE,EAAA,OAAD,KACEJ,EAAAC,EAAAC,cAAA,+BAEFF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,aACbL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,YAAYC,KAAMV,EAAIW,qBAAqB,+BAA+BP,EAAAC,EAAAC,cAAA,UAAQG,UAAU,YAAlB,+BCpBhFG,EAAS,IAAIC,IAAgBC,OAAOC,aAAaC,QAAQ,UAAY,MAG3E,SAASC,EAAYC,GAEtBA,EAIFJ,OAAOC,aAAaI,QAAQ,QAASD,GAHrCJ,OAAOC,aAAaK,WAAW,SAMlCR,EAAOS,KAAKH,GAKN,IAAMI,EAAa,IAAIT,IAAgBU,KAAKC,MAAMV,OAAOC,aAAaC,QAAQ,cAAgB,OAE9F,SAASS,EAAoBC,GAE9BA,EAIFZ,OAAOC,aAAaI,QAAQ,YAAaI,KAAKI,UAAUD,IAHxDZ,OAAOC,aAAaK,WAAW,aAKjCE,EAAWD,KAAKK,qBCiCHE,SAvDF,WAAM,IAAAC,EACsBC,oBAAS,GAD/BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACVK,EADUH,EAAA,GACEI,EADFJ,EAAA,GAAAK,EAEYN,oBAAS,GAFrBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEVE,EAFUD,EAAA,GAEHE,EAFGF,EAAA,GAoBjB,OAhBAG,oBAAU,WACRC,QAAQC,IAAI,eACZ,IAAMC,EAAO7B,OAAO8B,SAASD,KACb,gHACZA,GAQJ1B,EAFc0B,EAAKE,MADL,iCACkB,IAGhCV,GAAiB,IARfI,GAAY,IAUb,IACCD,EAEAlC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAACE,EAAA,OAAD,KACAJ,EAAAC,EAAAC,cAAA,4BAEAF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBACbL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,gBACbL,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,sBAAaF,EAAAC,EAAAC,cAAA,WAAb,iBACHF,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMC,GAAG,KAAI3C,EAAAC,EAAAC,cAAA,UAAQG,UAAU,YAAlB,cAOhByB,EACW9B,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CAAUD,GAAI,CAACE,SAAS,QAASC,MAAO,CAAChB,WAAYA,MAGnE9B,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAACE,EAAA,OAAD,KACEJ,EAAAC,EAAAC,cAAA,4BAEHF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBACdL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,gBACXL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,YAAWL,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,aAC3DF,EAAAC,EAAAC,cAAA,mECnDK6C,EAAgB,SAACnD,EAAKoD,GACjC,IAEMC,EAFSC,IAAMF,EAAS,IAENG,IAAI,SAACC,GAC3B,OAAOxD,EAAIyD,uBAAuB,CAChCL,QAASI,EAAED,IAAI,SAAAG,GACb,MAAM,CACJC,KAAMD,EAAME,GACZC,OAAS,CAACC,OAAQ,QAClBC,KAAM,CAAED,OAAQ,UAChBE,KAAM,CAAEF,OAAQ,iBAMxB,OAAOG,QAAQC,IAAIb,GAAUc,KAAK,SAACC,GACjC,OAAOC,IAAQD,EAAQb,IAAI,SAAAC,GAAC,OAAIA,EAAEJ,yCCjB/B,IAAMkB,EAAe,SAACC,GACzB,GAA4B,WAAzBA,EAAEC,OAAOC,QAAQC,IAClB,OAAO,KAGV,GAA4B,SAAzBH,EAAEC,OAAOC,QAAQC,IAAe,CACjC,IAAMC,EAAS,CACdxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGT,IAAI5E,UAAQ0E,GACpBG,sBAAsB,CACxBnB,KAAMY,EAAEC,OAAOC,QAAQM,SACrBZ,KAAK,SAAAa,GACJ,IAAIC,EAAOC,SAAS5E,cAAc,KAClC2E,EAAKvE,KAAOsE,EAASC,KACrBC,SAASC,KAAKC,YAAYH,GAC1BA,EAAKI,QACLH,SAASC,KAAKG,YAAYL,KAE3BM,MAAM,SAAAjD,GACNG,QAAQC,IAAIJ,cC+ENkD,SAjGA,SAACC,GACZ,IAGAC,EAHMC,EAAUC,iBAAO,MADD/D,EAEWC,mBAAS,IAFpBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAEfgE,EAFe9D,EAAA,GAEN+D,EAFM/D,EAAA,GAyF1B,OAVA2D,EAAWtF,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAACC,cAzEL,WAyEmCC,IAAKN,EAASlF,UAAU,aAC9EL,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAACC,cA1EM,WA0EwBvF,UAAU,SACjDL,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAACC,cA3EE,WA2E4BvF,UAAU,aACjDL,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACG,MAAO,UAAnB,gBACA9F,EAAAC,EAAAC,cAAA,KAAGG,UAAU,aAAb,yBAAgDgF,EAAMf,IAAtD,IAA4De,EAAMU,KAAlE,OACA/F,EAAAC,EAAAC,cAAA,UAAQG,UAAU,eAAgB2F,QArE9B,WACN,IAAIzC,EAAO8B,EAAMV,OAAOsB,UAAU,GAC1B1B,EAAS,CACXxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAGF3E,EAAIsG,cAAc,CAChB3C,KAAMkC,IAEP1B,KAAK,SAAAa,GACJ,IAAK,IAAIuB,EAAE,EAAGA,EAAEjF,EAAWuD,MAAM2B,OAAQD,IACvC,GAAIjF,EAAWuD,MAAM0B,GAAG3C,KAAOoB,EAASyB,SAAS7C,GAAI,CACjD,IAAI8C,EAAQ1E,OAAA2E,EAAA,EAAA3E,CAAOV,EAAWuD,OAC9B6B,EAASE,OAAOL,EAAG,GACnB9E,EAAoBiF,GAG1B1G,EAAI6G,gBAAgB,CACpBlD,KAAMA,IAECQ,KAAK,SAAAa,GACNS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SAGrBe,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIvBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGnBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,KAGpBqD,EAAQsB,QAAQlB,MAAMmB,WAAa,SAEnCvB,EAAQsB,QAAQlB,MAAMoB,OAAS,IAC/B1B,EAAM2B,gBAAe,KAgBjB,OAA4DhH,EAAAC,EAAAC,cAAA,UAAQG,UAAU,cAAc2F,QAbzF,WAEPT,EAAQsB,QAAQlB,MAAMmB,WAAa,SACnChC,SAASC,KAAKY,MAAMsB,UAAY,OAChC1B,EAAQsB,QAAQlB,MAAMoB,OAAS,IAC/B1B,EAAM2B,gBAAe,KAQ2C,SAMhEhH,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACCmF,EACDtF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QArFpB,SAAC7B,GACXkB,EAAM2B,gBAAe,GACrBtB,EAAcvB,EAAEC,OAAOC,QAAQd,MAC/BgC,EAAQsB,QAAQlB,MAAMmB,WAAa,UACnCvB,EAAQsB,QAAQlB,MAAMoB,OAAS,MAC/BjC,SAASC,KAAKY,MAAMsB,UAAY,WAgF9B,IAA2CjH,EAAAC,EAAAC,cAAA,KAAGgH,YAAW7B,EAAM9B,KAAMlD,UAAU,8BAApC,sBCiBhC8G,EA/GI,SAAC9B,GAElB,IAME+B,EANIC,EAAU7B,iBAAO,MACjB8B,EAAa9B,iBAAO,MAHE/D,EAIGC,mBAAS,IAJZC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAIrB8F,EAJqB5F,EAAA,GAIb6F,EAJa7F,EAAA,GAAAK,EAKGN,mBAAS,IALZO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAKrByF,EALqBxF,EAAA,GAKbyF,EALazF,EAAA,GAUxBsC,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAsFF,OALA6C,EACApH,EAAAC,EAAAC,cAAA,OAAKG,UAAU,aAAawF,IAAKwB,GACjCrH,EAAAC,EAAAC,cAAA,OAAKG,UAAU,mBAAkBL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBAAf,gBAAkDL,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAkB2F,QAR7F,WACtBqB,EAAQR,QAAQlB,MAAMgC,QAAU,OAChC7C,SAASC,KAAKY,MAAMsB,UAAY,OAChC5B,EAAM2B,gBAAe,KAKwHhH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,kBAAb,UAA8CL,EAAAC,EAAAC,cAAA,SAAOG,UAAU,sBAAsBsF,MAAO,CAACiC,QAAS,QAAS/B,IAAKyB,EAAYO,YAAY,kBAAkBC,KAAK,OAAOC,SAtEpS,SAAC5D,GACpB,IAAIC,EAASD,EAAEC,OAAOK,MAClBuD,EAAMP,EAAOQ,YAAY,KACzBC,EAAST,EAAOxB,UAAU+B,GAC1BG,EAAUV,EAAOxB,UAAU,EAAGwB,EAAOQ,YAAY,MAErDT,EADiBW,EAAU,IAAM/D,EAAS8D,MAiEuSlI,EAAAC,EAAAC,cAAA,UAAQyF,MAAO,CAACiC,QAAS,QAASvH,UAAU,gBAAgB2F,QA7D5X,SAAC7B,GAGlBvE,EAAIwI,YAAY,CACdC,UAAWZ,EACXa,QAASf,EACTgB,YAAY,IAEbxE,KAAK,SAAAa,GAEJ,IAAK,IAAIuB,EAAE,EAAGA,EAAEjF,EAAWuD,MAAM2B,OAAQD,IACvC,GAAIjF,EAAWuD,MAAM0B,GAAG3C,KAAOoB,EAASyB,SAAS7C,GAAI,CACjD,IAAI8C,EAAQ1E,OAAA2E,EAAA,EAAA3E,CAAOV,EAAWuD,OAC9B6B,EAASH,GAAKvB,EAASyB,SACvBhF,EAAoBiF,GAG1B1G,EAAI6G,gBAAgB,CAClBlD,KAAM8B,EAAMV,OAAOsB,UAAU,KAEtBlC,KAAK,SAAAa,GACNS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SACrBe,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIvBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGrBiD,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,KAMdmF,EAAQR,QAAQlB,MAAMgC,QAAU,OAChC7C,SAASC,KAAKY,MAAMsB,UAAY,OAChCK,EAAWT,QAAQpC,MAAQ,GAC3BY,EAAM2B,gBAAe,KAY4T,QAIjVhH,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACCiH,EACDpH,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QArFf,SAAC7B,GACdkB,EAAM2B,gBAAe,GACrB,IAAIwB,EAAMrE,EAAEC,OAAOC,QAAQd,KAC3BmE,EAAac,GAGbnB,EAAQR,QAAQlB,MAAMgC,QAAU,QAChC7C,SAASC,KAAKY,MAAMsB,UAAY,WA8EajH,EAAAC,EAAAC,cAAA,KAAGgH,YAAW7B,EAAM9B,KAAMlD,UAAU,8BAApC,WCgBhCoI,EAzHM,SAACpD,GACpB,IAOIqD,EAPEC,EAAgBnD,iBAAO,MACvBoD,EAAmBpD,iBAAO,MAC1BqD,EAAQrD,iBAAO,MACfsD,EAAatD,iBAAO,MAJI/D,EAKCC,mBAAS,IALVC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAKvB8F,EALuB5F,EAAA,GAKf6F,EALe7F,EAAA,GAAAK,EAMCN,mBAAS,IANVO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAMvByF,EANuBxF,EAAA,GAMfyF,EANezF,EAAA,GAUxBsC,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAiGJ,OALAmE,EACA1I,EAAAC,EAAAC,cAAA,OAAK2F,IAAK8C,EAAetI,UAAU,cACnCL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,mBAAkBL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBAAf,iBAAmDL,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAkB2F,QARxF,WAC9B2C,EAAc9B,QAAQlB,MAAMgC,QAAU,OACtC7C,SAASC,KAAKY,MAAMsB,UAAY,OAChC5B,EAAM2B,gBAAe,KAKiIhH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,kBAAb,UAA8CL,EAAAC,EAAAC,cAAA,SAAO2H,YAAY,oBAAoBxH,UAAU,sBAAsBsF,MAAO,CAACiC,QAAS,QAAS/B,IAAK+C,EAAkBd,KAAK,OAAOC,SAlF7S,SAAC5D,GAC5B,IAAIC,EAASD,EAAEC,OAAOK,MAElBL,EAAO2E,SAAS,MAAQ3E,EAAO2E,SAAS,MAC1CF,EAAMhC,QAAQlB,MAAMC,cAAgB,OACpCiD,EAAMhC,QAAQlB,MAAMqD,WAAa,OACjCF,EAAWjC,QAAQlB,MAAMgC,QAAU,UAGnCkB,EAAMhC,QAAQlB,MAAMC,cAAgB,UACpCiD,EAAMhC,QAAQlB,MAAMqD,WAAa,UACjCF,EAAWjC,QAAQlB,MAAMgC,QAAU,QAGrC,IAAIpE,EAAOkE,EAAOwB,MAAM,KACpBC,EAAe3F,EAAK4F,MAAM,EAAG5F,EAAK6C,OAAO,GAAGgD,KAAK,KAGrD5B,EADiB0B,EAAe,IAAM9E,MAiEkUpE,EAAAC,EAAAC,cAAA,UAAQ2F,IAAKgD,EAAOxI,UAAU,gBAAgBsF,MAAO,CAACiC,QAAS,QAAS5B,QA7DvZ,SAAC7B,GAItBvE,EAAIwI,YAAY,CACZC,UAAWZ,EACXa,QAASf,EACTgB,YAAY,IAEbxE,KAAK,SAAAa,GAEJ,IAAK,IAAIuB,EAAE,EAAGA,EAAEjF,EAAWuD,MAAM2B,OAAQD,IACvC,GAAIjF,EAAWuD,MAAM0B,GAAG3C,KAAOoB,EAASyB,SAAS7C,GAAI,CACjD,IAAI8C,EAAQ1E,OAAA2E,EAAA,EAAA3E,CAAOV,EAAWuD,OAC9B6B,EAASH,GAAKvB,EAASyB,SACvBhF,EAAoBiF,GAG1B1G,EAAI6G,gBAAgB,CAClBlD,KAAM8B,EAAMV,OAAOsB,UAAU,KAEtBlC,KAAK,SAAAa,GACNS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SACrBe,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIvBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGrBiD,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,KAMpByG,EAAc9B,QAAQlB,MAAMgC,QAAU,OACtC7C,SAASC,KAAKY,MAAMsB,UAAY,OAChC2B,EAAiB/B,QAAQpC,MAAQ,GACjCY,EAAM2B,gBAAe,KAWmV,OAAoHhH,EAAAC,EAAAC,cAAA,OAAK2F,IAAKiD,EAAYzI,UAAU,yBAAhC,8BAI1dL,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACCuI,EACD1I,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QAhGT,SAAC7B,GACtBkB,EAAM2B,gBAAe,GACrB,IAAIwB,EAAMrE,EAAEC,OAAOC,QAAQd,KAC3BmE,EAAac,GAEXG,EAAc9B,QAAQlB,MAAMgC,QAAU,QACtC7C,SAASC,KAAKY,MAAMsB,UAAY,WA0FmBjH,EAAAC,EAAAC,cAAA,KAAGgH,YAAW7B,EAAM9B,KAAMlD,UAAU,8BAApC,SAFnD,eC/FagJ,SAnBUC,YAAgB,CAAC,CAAE/F,KAAM,IAAKgG,WAAY,OAA1CD,CAAmD,SAAAE,GAAA,IAAGC,EAAHD,EAAGC,YAAH,OACxEzJ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,2CAAb,QAA+DL,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMrC,UAAU,kBAAkBsC,GAAG,KAArC,OAA6C3C,EAAAC,EAAAC,cAAA,KAAGG,UAAU,6BAAb,gBAC5GL,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACGsJ,EAAYtG,IAAI,SAAAuG,GAAA,IACfjH,EADeiH,EACfjH,MACA8G,EAFeG,EAEfH,WAFe,OAKfvJ,EAAAC,EAAAC,cAAA,QAAMyJ,IAAKlH,EAAMmH,KACf5J,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAASC,GAAIF,EAAMmH,IAAKvJ,UAAU,mBAAlC,IAAsDkJ,GAC5CvJ,EAAAC,EAAAC,cAAA,KAAGG,UAAU,6BAAb,mBAIhBL,EAAAC,EAAAC,cAAA,eC4MW2J,SAtNG,SAACxE,GAEf,IAQIyE,EAREC,EAAYvE,iBAAO,MACnBwE,EAAcxE,iBAAO,MAHF/D,EAIYC,mBAAS,IAJrBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAIlBwI,EAJkBtI,EAAA,GAIPuI,EAJOvI,EAAA,GAAAK,EAKUN,mBAAS,IALnBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAKlBmI,EALkBlI,EAAA,GAKRmI,EALQnI,EAAA,GAAAoI,EAMY3I,mBAAS,IANrB4I,EAAA1I,OAAAC,EAAA,EAAAD,CAAAyI,EAAA,GAMlBE,EANkBD,EAAA,GAMPE,EANOF,EAAA,GAAAG,EAOkB/I,mBAAS,IAP3BgJ,EAAA9I,OAAAC,EAAA,EAAAD,CAAA6I,EAAA,GAOlBE,EAPkBD,EAAA,GAOJE,EAPIF,EAAA,GAAAG,EAQYnJ,oBAAS,GARrBoJ,EAAAlJ,OAAAC,EAAA,EAAAD,CAAAiJ,EAAA,GAQlBE,EARkBD,EAAA,GAQPE,EAROF,EAAA,GAAAG,EASEvJ,mBAAS,IATXwJ,EAAAtJ,OAAAC,EAAA,EAAAD,CAAAqJ,EAAA,GASlBE,EATkBD,EAAA,GASZE,EATYF,EAAA,GAWnB3H,EAAO7C,OAAO2K,mBAAmB3K,OAAO8B,SAASD,KAAK4G,MAAM,IAIlE/G,oBAAU,SAAC+B,GAET,GAAK4G,EAEE,CACLjG,SAASC,KAAKY,MAAMsB,UAAY,SAChC8C,EAAUlD,QAAQlB,MAAMgC,QAAU,QAClC,IAAMpD,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAElB7E,EAAM,IAAIC,UACd0E,GAGW,MAAThB,EAEF3D,EAAI6G,gBAAgB,CAClBlD,KAAM,KAEPQ,KAAK,SAAAa,GAGJ,IAFA,IAAI0G,EAAM,GACNH,EAAOvG,EAAS5B,QACXmD,EAAI,EAAGA,EAAIgF,EAAK/E,OAAQD,IAC3BgF,EAAKhF,GAAGoF,aAAelG,EAAM9B,MAC/B+H,EAAIE,KAAKL,EAAKhF,IAElBiF,EAAWE,KAEZnG,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,KAIdtC,EAAI6G,gBAAgB,CAClBlD,KAAMA,IAEPQ,KAAK,SAAAa,GAGJ,IAFA,IAAI0G,EAAM,GACNH,EAAOvG,EAAS5B,QACXmD,EAAI,EAAGA,EAAIgF,EAAK/E,OAAQD,IAC3BgF,EAAKhF,GAAGoF,aAAelG,EAAM9B,MAC/B+H,EAAIE,KAAKL,EAAKhF,IAElBiF,EAAWE,KAEZnG,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,UA5Cd6H,EAAUlD,QAAQlB,MAAMgC,QAAU,QAiDnC,CAACoD,EAAWxH,EAAM8B,EAAM9B,OAE7BnB,oBAAU,WACH2I,IACHrK,OAAO8B,SAASD,KAAO,MAGxB,CAACwI,IAEJ,IAKIU,EAAWlB,EAAUtE,UAAU,EAAGsE,EAAUtC,YAAY,MACtDyD,EAAU,SAACvH,GACfiG,EAAejG,EAAEC,OAAOC,QAAQb,KAoF9BmI,EAAUR,EAAKhI,IAjBK,SAACgI,GAEvB,GAAoB,WAAjBA,EAAK,QACN,OACEnL,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,GAAInD,UAAU,qBAAqBuL,YAAWT,EAAKpF,KAAM8F,cAAaV,EAAKW,aAAcC,WAAUZ,EAAK,SACpHnL,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,GAAInD,UAAU,2BAC5BL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,WAEAL,EAAAC,EAAAC,cAAA,MAAIG,UAAU,2BACdL,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMC,GAAKwI,EAAKI,WAAalL,UAAU,uBAAuB2F,QAAU0F,EAAUM,UAAUb,EAAKW,cAAiBX,EAAKpF,UA6C7H,OAtBA+D,EACA9J,EAAAC,EAAAC,cAACwC,EAAA,EAAD,KACE1C,EAAAC,EAAAC,cAAA,OAAK2F,IAAMkE,EAAY1J,UAAU,YACnCL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,aACfL,EAAAC,EAAAC,cAAA,MAAIG,UAAU,gBAAd,cACAL,EAAAC,EAAAC,cAAC+L,EAAD,MACAjM,EAAAC,EAAAC,cAAA,KAAGG,UAAU,eAAb,QAAgCL,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAkBgF,EAAMU,MAAxE,eAAgG/F,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAmB8J,EAAShB,MAAM,KAClJnJ,EAAAC,EAAAC,cAAA,SAAKyK,GACL3K,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEyL,IAGF1B,EACFjK,EAAAC,EAAAC,cAAA,UAAQG,UAAU,yBAAyB2F,QA5GxB,WACf,IAAIkG,EAAQ3B,EAAUtC,YAAY,KAC9BkE,EAAU5B,EAAUtE,UAAUiG,GAElChC,EAAgB,IAEhB,IAAM3F,EAAS,CACXxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAEhB7E,EAAM,IAAIC,UACd0E,GAEF3E,EAAIwI,YAAY,CACdC,UAAWkC,EACXjC,QAAS6B,EAAWgC,EACpB5D,YAAY,IAEbxE,KAAK,SAAAa,GAEJ,IAAK,IAAIuB,EAAE,EAAGA,EAAEjF,EAAWuD,MAAM2B,OAAQD,IACvC,GAAIjF,EAAWuD,MAAM0B,GAAG3C,KAAOoB,EAASyB,SAAS7C,GAAI,CACjD,IAAI8C,EAAQ1E,OAAA2E,EAAA,EAAA3E,CAAOV,EAAWuD,OAC9B6B,EAASH,GAAKvB,EAASyB,SACvBhF,EAAoBiF,GAI1BsE,EAAmB,mBACnBhL,EAAI6G,gBAAgB,CAClBlD,KAAMkI,IAET1H,KAAK,SAAAa,GACJvC,QAAQC,IAAI+C,GACZA,EAAMqB,gBAAgB,IACtBrB,EAAMuB,cAAchC,EAAS5B,SAC7BqC,EAAMsB,WAAW/B,EAAS5B,SAE1BD,EAAcnD,EAAKgF,EAAS5B,SAG3Be,KAAK,SAAAf,GACJkH,EAAgB,IAChB7E,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIfiD,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,OAGjBiD,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,GACZgI,EAAgB,sDAElB7E,EAAM2B,gBAAe,KAkDzB,QACAhH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,8BAA8B2F,QA5B1B,WACfgF,GAAgB,GAChBZ,EAAe,IACfI,EAAgB,IAChB1F,SAASC,KAAKY,MAAMsB,UAAY,OAChC5B,EAAM2B,gBAAe,KAuBvB,SACAhH,EAAAC,EAAAC,cAAA,KAAG2F,IAAKmE,EAAarE,MAAO,CAACgC,QAAS,SAAUtC,EAAMU,KAAtD,gBAOI/F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACE2J,EACF9J,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QAAU,kBAnIxBzC,EAmIyC8B,EAAM9B,KAlIjE8B,EAAM2B,gBAAe,GACtBgE,GAAgB,QAChBR,EAAgBjH,GAHE,IAACA,IAmId,IAAsEvD,EAAAC,EAAAC,cAAA,KAAGG,UAAU,iCAAb,0BCzK/D+L,EA1BM,SAAC/G,GAElB,IAAIgH,EAAWhH,EAAMiH,UACjBnB,EAAO9F,EAAM8F,KAejB,OAbqBkB,EAASE,KAAK,SAAAnJ,GAAC,OAAIA,EAAEI,KAAO2H,EAAK3H,KAc3CxD,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QALxB,WACX3E,EAAoBgL,EAASG,OAAO,SAAApJ,GAAC,OAAIA,EAAEI,KAAO2H,EAAK3H,QAIHxD,EAAAC,EAAAC,cAAA,KAAGyF,MAAO,CAACG,MAAO,UAAW2G,SAAS,OAAQC,iBAAkB,iBAAkBrM,UAAU,kBAA5F,SAGjDL,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QAdvB,WACR3E,EAAmB,GAAAsL,OAAA/K,OAAA2E,EAAA,EAAA3E,CAAKyK,GAAL,CAAAzK,OAAAgL,EAAA,EAAAhL,CAAA,GAAmBuJ,QAaOnL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,4BAAb,UCiJtCwM,EApLG,SAACxH,GACf,IAQIyE,EAREC,EAAYvE,iBAAO,MACnBwE,EAAcxE,iBAAO,MAFF/D,EAGYC,mBAAS,IAHrBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAGlBwI,EAHkBtI,EAAA,GAGPuI,EAHOvI,EAAA,GAAAK,EAIUN,mBAAS,IAJnBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAIlBmI,EAJkBlI,EAAA,GAIRmI,EAJQnI,EAAA,GAAAoI,EAKY3I,mBAAS,IALrB4I,EAAA1I,OAAAC,EAAA,EAAAD,CAAAyI,EAAA,GAKlBE,EALkBD,EAAA,GAKPE,EALOF,EAAA,GAAAG,EAMkB/I,mBAAS,IAN3BgJ,EAAA9I,OAAAC,EAAA,EAAAD,CAAA6I,EAAA,GAMlBE,EANkBD,EAAA,GAMJE,EANIF,EAAA,GAAAG,EAOYnJ,oBAAS,GAPrBoJ,EAAAlJ,OAAAC,EAAA,EAAAD,CAAAiJ,EAAA,GAOlBE,EAPkBD,EAAA,GAOPE,EAPOF,EAAA,GAAAG,EAQEvJ,mBAAS,IARXwJ,EAAAtJ,OAAAC,EAAA,EAAAD,CAAAqJ,EAAA,GAQlBE,EARkBD,EAAA,GAQZE,EARYF,EAAA,GAUnB3H,EAAO7C,OAAO2K,mBAAmB3K,OAAO8B,SAASD,KAAK4G,MAAM,IAKlE/G,oBAAU,SAAC+B,GAET,GAAK4G,EAGE,CACLjG,SAASC,KAAKY,MAAMsB,UAAY,SAChC8C,EAAUlD,QAAQlB,MAAMgC,QAAU,QAElC,IAAMpD,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAElB7E,EAAM,IAAIC,UACd0E,GAGW,MAAThB,EACF3D,EAAI6G,gBAAgB,CAClBlD,KAAM,KAEPQ,KAAK,SAAAa,GACJwG,EAAWxG,EAAS5B,WAErBmC,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,KAGdtC,EAAI6G,gBAAgB,CAClBlD,KAAMA,IAEPQ,KAAK,SAAAa,GACJwG,EAAWxG,EAAS5B,WAErBmC,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,UAhCd6H,EAAUlD,QAAQlB,MAAMgC,QAAU,QAoCnC,CAACoD,EAAWxH,IAEjBnB,oBAAU,WACH2I,IACHrK,OAAO8B,SAASD,KAAO,MAExB,CAACwI,IAEJ,IAMMW,EAAU,SAACvH,GACfiG,EAAejG,EAAEC,OAAOC,QAAQb,KAqE9BmI,EAAUR,EAAKhI,IAjBK,SAACgI,GAGvB,GAAoB,WAAjBA,EAAK,QACN,OACEnL,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,GAAInD,UAAU,qBAAqBuL,YAAWT,EAAKpF,KAAM8F,cAAaV,EAAKW,aAAcC,WAAUZ,EAAK,SACpHnL,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,GAAInD,UAAU,2BAC5BL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,WAEAL,EAAAC,EAAAC,cAAA,MAAIG,UAAU,2BACdL,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMC,GAAKwI,EAAKI,WAAalL,UAAU,uBAAuB2F,QAAU0F,EAAUM,UAAUb,EAAKW,cAAiBX,EAAKpF,UASzH+G,EAAa,WACf9B,GAAgB,GAChB3F,EAAM2B,gBAAe,GACrBoD,EAAe,IACfI,EAAgB,IAChB1F,SAASC,KAAKY,MAAMsB,UAAY,QAyBlC,OAtBA6C,EACA9J,EAAAC,EAAAC,cAACwC,EAAA,EAAD,KACE1C,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WAAWwF,IAAMkE,GAClC/J,EAAAC,EAAAC,cAAA,OAAKG,UAAU,aACfL,EAAAC,EAAAC,cAAA,MAAIG,UAAU,gBAAd,cACAL,EAAAC,EAAAC,cAAC+L,EAAD,MACAjM,EAAAC,EAAAC,cAAA,KAAGG,UAAU,eAAb,QAAgCL,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAmBgF,EAAMU,MAAzE,eAAkG/F,EAAAC,EAAAC,cAAA,QAAMG,UAAU,kBAAmB8J,EAAShB,MAAM,KACpJnJ,EAAAC,EAAAC,cAAA,SAAKyK,GACL3K,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEyL,IAGF1B,EACFjK,EAAAC,EAAAC,cAAA,UAAQG,UAAU,yBAAyB2F,QAvFxB,WACjB,GAAIuE,IAAcJ,EAChBD,EAAgB,6CACX,CACL,IAAIgC,EAAQ3B,EAAUtC,YAAY,KAC9BkE,EAAU5B,EAAUtE,UAAUiG,GAClChC,EAAgB,IAEhB,IAAM3F,EAAS,CACXxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAEhB7E,EAAM,IAAIC,UACd0E,GAEF3E,EAAImN,YAAY,CACd1E,UAAWkC,EACXjC,QAAS6B,EAAWgC,EACpB5D,YAAY,IAEbxE,KAAK,SAAAa,GAEJgG,EAAmB,cACnBhL,EAAI6G,gBAAgB,CAClBlD,KAAM4G,IAEPpG,KAAK,SAAAa,GACFkI,MAQH3H,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,OAGfiD,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,QA+CpB,QACAlC,EAAAC,EAAAC,cAAA,KAAGG,UAAU,8BAA8B2F,QAAS8G,GAApD,SACA9M,EAAAC,EAAAC,cAAA,KAAG2F,IAAKmE,EAAarE,MAAO,CAACgC,QAAS,SAAUtC,EAAMU,KAAtD,gBAOI/F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACE2J,EACF9J,EAAAC,EAAAC,cAAA,UAAQG,UAAU,UAAU2F,QAAU,kBA/GxBzC,EA+GyC8B,EAAM9B,KA9GlEyH,GAAgB,GAChBR,EAAgBjH,QAChB8B,EAAM2B,gBAAe,GAHH,IAACzD,IA+Gd,IAAsEvD,EAAAC,EAAAC,cAAA,KAAGG,UAAU,iCAAb,gBCH/D2M,EAjKG,SAAC3H,GAIjB,IAAM4H,EAAgB,WACpB5H,EAAM6H,mBAAkB,IAKpBC,EAAS,CAAC,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QAyI3EC,EAAW/H,EAAMgI,WAAWlK,IAvIf,SAACgI,EAAMe,GAIxB,GAAGf,EAAKmC,eACN,OAEItN,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,IACZxD,EAAAC,EAAAC,cAAA,gCAOT,IAAMqN,EAASlI,EAAMmI,iBAAmBnI,EAAMoI,WAAWvB,QAASwB,EAEjE,GAAoB,SAAjBvC,EAAK,QAAmB,CAEzB,IAAIwC,OAAuBD,IAAXH,EAAuBvN,EAAAC,EAAAC,cAAA,KAAGG,UAAU,wCAAb,qBAA4EL,EAAAC,EAAAC,cAAA,OAAK0N,IAAK,0BAA4BL,EAAOM,UAAWC,IAAI,KAE3K9F,EAAMmD,EAAKpF,KAAKkC,YAAY,KAC5BC,EAASiD,EAAKpF,KAAKE,UAAU+B,GAoB/B,MAlBa,CAAC,OAAQ,OAAQ,QACnBe,SAASb,KACpByF,EAAY3N,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,eAKC,CAAC,OAAQ,QACX0I,SAASb,KACpByF,EAAY3N,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,iBAIT8M,EAAOpE,SAASb,KACnByF,EAAY3N,EAAAC,EAAAC,cAAA,KAAGG,UAAU,wCAAb,sBAMVL,EAAAC,EAAAC,cAAA,MACIyJ,IAAKwB,EAAK3H,GACVnD,UAAU,YACVuL,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,SAEjBnL,EAAAC,EAAAC,cAAA,MACE6N,MAAO,aAAe5C,EAAKpF,KAC3B6F,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,QAASnF,QAAS9B,EACjCyB,MAAO,CAACqI,MAAO,SACZL,GAEL3N,EAAAC,EAAAC,cAAA,MACE6N,MAAO,aAAe5C,EAAKpF,KAC3B6F,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,QAASnF,QAAS9B,GAElCiH,EAAKpF,MAEN/F,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,SCjGxB,SAAwBC,GACf,IAAVA,IACFA,EAAQ,GAEV,IAAM/B,EAAQgC,KAAKC,MAAMD,KAAK5L,IAAI2L,GAASC,KAAK5L,IAAI,OAGpD,OAAoD,GAA5C2L,EAAQC,KAAKE,IAAI,KAAMlC,IAAQmC,QAAQ,GAAS,IAFhD,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAEYnC,GD2FvDoC,CAAcnD,EAAKxH,OAEtB3D,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,UEjGxB,SAAqBO,GAE1B,IAAMC,EAAOD,EAAKtI,UAAU,EAAG,GAC3BwI,EAAQF,EAAKtI,UAAU,EAAG,GAC1ByI,EAAMH,EAAKtI,UAAU,EAAG,IAa5BwI,EAAQA,EAAME,QAAQ,MAAO,IAC7BD,EAAMA,EAAIC,QAAQ,MAAO,IACzB,IAAIC,EATW,CACb,UAAW,WAAY,QACvB,QAAS,MAAO,OAAQ,OACxB,SAAU,YAAa,UACvB,WAAY,YAKWH,EAAM,GAG/B,OAAOzO,EAAAC,EAAAC,cAAA,aAAQ2O,IAAON,GAAMO,UAAY,KAAOJ,EAAM,IAAME,EAAc,IAAMJ,GF4ElEO,CAAW5D,EAAK6D,kBAGnBhP,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACgP,EAAD,CAAYvI,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAejC,OAAQU,EAAMV,OAAQpB,KAAM4H,EAAKI,WAAYvE,eAAgB3B,EAAM2B,kBAE3LhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACiP,EAAD,CAAWxI,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAejC,OAAQU,EAAMV,OAAQpB,KAAM4H,EAAKI,WAAYxF,KAAMoF,EAAKpF,KAAMiB,eAAgB3B,EAAM2B,kBAE3MhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACkP,EAAD,CAAWjE,KAAMA,EAAMmB,UAAWjH,EAAMiH,UAAW+C,UAAWhK,EAAMgK,UAAW9L,KAAM4H,EAAKI,WAAYxF,KAAMoF,EAAKpF,KAAMY,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAeI,eAAgB3B,EAAM2B,kBAEzPhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACoP,EAAD,CAAcnE,KAAMA,EAAMmB,UAAWjH,EAAMiH,UAAW+C,UAAWhK,EAAMgK,UAAW9L,KAAM4H,EAAKI,cAE/FvL,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACqP,EAAD,CAAQjL,IAAK6G,EAAK,QAASpF,KAAMoF,EAAKpF,KAAMY,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAerD,KAAM4H,EAAKI,WAAY5G,OAAQU,EAAMV,OAAQqC,eAAgB3B,EAAM2B,mBAQvO,MAAoB,WAAjBmE,EAAK,QAGNnL,EAAAC,EAAAC,cAAA,MAAIyJ,IAAKwB,EAAK3H,GAAInD,UAAU,YAAYuL,YAAWT,EAAKpF,KAAM8F,cAAaV,EAAKI,WAAYQ,WAAUZ,EAAK,SACzGnL,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,SACnBhO,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,WAEAL,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMrC,UAAU,iBAAiBsC,GAAI,QAAUwI,EAAKI,WAAYvF,QAASiH,GAAgB9B,EAAKpF,KAA9F,MAEF/F,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,SAAnB,OAGAhO,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,UAAnB,OAIAhO,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACsP,EAAD,CAAc7I,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAejC,OAAQU,EAAMV,OAAQpB,KAAM4H,EAAKI,WAAYvE,eAAgB3B,EAAM2B,kBAE7LhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACiP,EAAD,CAAWxI,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAejC,OAAQU,EAAMV,OAAQpB,KAAM4H,EAAKI,WAAYxF,KAAMoF,EAAKpF,KAAMiB,eAAgB3B,EAAM2B,kBAE3MhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACtCjP,EAAAC,EAAAC,cAACkP,EAAD,CAAWjE,KAAMA,EAAMmB,UAAWjH,EAAMiH,UAAW+C,UAAWhK,EAAMgK,UAAW9L,KAAM4H,EAAKI,WAAY5E,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cACjMI,eAAgB3B,EAAM2B,kBAEtBhH,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACoP,EAAD,CAAcnE,KAAMA,EAAMmB,UAAWjH,EAAMiH,UAAW+C,UAAWhK,EAAMgK,UAAW9L,KAAM4H,EAAKI,cAG/FvL,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqI,MAAO,OAAQiB,UAAW,WACpCjP,EAAAC,EAAAC,cAACqP,EAAD,CAAQjL,IAAK6G,EAAK,QAASpF,KAAMoF,EAAKpF,KAAMY,WAAYtB,EAAMsB,WAAYD,gBAAiBrB,EAAMqB,gBAAiBE,cAAevB,EAAMuB,cAAerD,KAAM4H,EAAKI,WAAY5G,OAAQU,EAAMV,OAAQqC,eAAgB3B,EAAM2B,wBAhC/N,IA4CE,OACEhH,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAACE,EAAA,OAAD,KACEJ,EAAAC,EAAAC,cAAA,uBAECkN,IGpEQqC,SAjGM,SAACpK,GAAU,IAAA5D,EAGDC,mBAAS,IAHRC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAGvBiO,EAHuB/N,EAAA,GAGhBgO,EAHgBhO,EAAA,GAIxBiO,EAAWpK,iBAAO,MACpBqK,EAAYxK,EAAMV,OACtBkL,EAAYA,EAAU5J,UAAU,GAEhC,IAAI6J,EACEC,EAAcvK,iBAAO,MA2DrBsH,EAAa,WACjBiD,EAAYlJ,QAAQlB,MAAMgC,QAAU,OACpCtC,EAAM2B,gBAAe,IAkBvB,OATA8I,EACE9P,EAAAC,EAAAC,cAAA,OAAKG,UAAU,sBAAsBwF,IAAMkK,GACzC/P,EAAAC,EAAAC,cAAA,SAAO8P,QAAQ,SAAS3P,UAAU,uBAAlC,2BACAL,EAAAC,EAAAC,cAAA,SAAOG,UAAU,sBAAsByH,KAAK,OAAOtE,GAAG,SAASuE,SAtE/C,SAAC5D,GACnBwL,EAAYxL,EAAEC,OAAOK,QAqEmEoB,IAAK+J,IAC3F5P,EAAAC,EAAAC,cAAA,KAAGG,UAAU,8BAA8B2F,QAAU8G,GAArD,SACA9M,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,6BAA6B2F,QApEpC,WAEnB,IAAMzB,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAEF3E,EAAIqQ,oBAAoB,CACtB1M,KAAMsM,EAAY,IAAKH,EACvBnH,YAAY,IAEbxE,KAAK,SAAAa,GAEHsL,WAAW,WACTpD,KACC,KAEHlN,EAAI6G,gBAAgB,CACnBlD,KAAMsM,IAGP9L,KAAK,SAAAa,GAEJS,EAAMqB,gBAAgB,IACtBrB,EAAMuB,cAAchC,EAAS5B,SAC7BqC,EAAMsB,WAAW/B,EAAS5B,SAE1BD,EAAcnD,EAAKgF,EAAS5B,SAC3Be,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGjBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIbiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAuBR,sBAKRlC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,UAAQG,UAAU,uBAAuB2F,QAjB1B,WACjB+J,EAAYlJ,QAAQlB,MAAMgC,QAAU,QACpCiI,EAAS/I,QAAQpC,MAAQ,GACzBY,EAAM2B,gBAAe,KAc6ChH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,qDAAb,sBAAhE,qBACEyP,KCWOK,EAxGA,SAAC9K,GACd,IAAMuK,EAAWpK,iBAAO,OAGC,IAAtBH,EAAM+K,cACPR,EAAS/I,QAAQpC,MAAQ,GACzBY,EAAM2B,gBAAe,IAIxB,IAAI6I,EAAYxK,EAAMV,OAAOsB,UAAU,GAoFxC,OAEIjG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,qCAAb,UACAL,EAAAC,EAAAC,cAAA,SAAOG,UAAU,gBAAgBwH,YAAY,YAAYC,KAAK,OAAOC,SAtFtD,SAAC5D,GAIhB,IAAMI,EAAS,CACXxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAEhB7E,EAAM,IAAIC,UACd0E,GAIDJ,EAAEC,OAAOK,MAAM2B,OAAS,IACzBf,EAAM2B,gBAAe,GAGrBpH,EAAI6G,gBAAgB,CAClBlD,KAAM8B,EAAMV,OAAOsB,UAAU,KAEtBlC,KAAK,SAAAa,GACNS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SAErBe,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAIvBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,MAInBiC,EAAEC,OAAOK,MAAM2B,OAAS,IAEzBf,EAAM2B,gBAAe,GAErBpH,EAAIyQ,YAAY,CAEd9M,KAAMsM,EACNS,MAAOnM,EAAEC,OAAOK,QAGjBV,KAAK,SAAAa,GAIJ,GAA+B,IAA5BA,EAAS2L,QAAQnK,OAClBf,EAAMsB,WAHO,CAAC,CAACjD,OAAQ,OAAQF,GAAI,EAAG8J,eAAgB,kBAOpD,CACFjI,EAAM6H,mBAAkB,GACxB7H,EAAMqB,gBAAgB,IAGtB,IAAI8J,EAAS,GALXC,GAAA,EAAAC,GAAA,EAAAC,OAAAjD,EAAA,IAMF,QAAAkD,EAAAC,EAAcjM,EAAS2L,QAAvBO,OAAAC,cAAAN,GAAAG,EAAAC,EAAA5P,QAAA+P,MAAAP,GAAA,EAA+B,KAAtBtK,EAAsByK,EAAAnM,MAE7B+L,EAAOhF,KAAKrF,EAAEE,WARd,MAAA4K,GAAAP,GAAA,EAAAC,EAAAM,EAAA,YAAAR,GAAA,MAAAI,EAAAK,QAAAL,EAAAK,SAAA,WAAAR,EAAA,MAAAC,GAUFtL,EAAMsB,WAAW6J,QAgBmE3K,IAAK+J,MCrEpFuB,EA7BK7H,YAAiB,CAAC,CAAE/F,KAAM,IAAKgG,WAAY,OAA3CD,CAAqD,SAAAE,GAAmB,IAAhBC,EAAgBD,EAAhBC,YAI1E,OAEEzJ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,KAAGG,UAAU,2CAAb,QACAL,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACGsJ,EAAYtG,IAAI,SAAAuG,GAAA,IACfjH,EADeiH,EACfjH,MACA8G,EAFeG,EAEfH,WAFeG,EAGflH,SAHe,OAOfxC,EAAAC,EAAAC,cAAA,QAAMyJ,IAAKlH,EAAMmH,KACf5J,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAASC,GAAIF,EAAMmH,IAAKvJ,UAAU,kBAAkB2F,QAAS,kBAAM3D,QAAQC,IAAImH,KAA/E,IAA+FF,GACrFvJ,EAAAC,EAAAC,cAAA,KAAGG,UAAU,6BAAb,mBAIhBL,EAAAC,EAAAC,cAAA,cCiLWkR,SAtMI,SAAC/L,GAAU,IAExBgM,EAFwB5P,EACWC,mBAAS,MADpBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACrB6P,EADqB3P,EAAA,GACN4P,EADM5P,EAAA,GAIxBkO,EAAYxK,EAAMV,OACtBkL,EAAYA,EAAU5J,UAAU,GAEhC,IAAM2J,EAAWpK,iBAAO,MAClBuK,EAAcvK,iBAAO,MAiKnBsH,EAAa,WACjBiD,EAAYlJ,QAAQlB,MAAMgC,QAAU,OACpCtC,EAAM2B,gBAAe,IAkBzB,OARIqK,EAAarR,EAAAC,EAAAC,cAAA,OAAKG,UAAU,qBAAqBwF,IAAMkK,GACvD/P,EAAAC,EAAAC,cAAA,SAAO4H,KAAK,OAAOzH,UAAU,eAAemR,UAAQ,EAAC3L,IAAK+J,IAC1D5P,EAAAC,EAAAC,cAAA,KAAGG,UAAU,8BAA8B2F,QAAU8G,GAArD,SACA9M,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,SAAO4H,KAAK,SAASzH,UAAU,gBAAgB2F,QA9K1C,SAAC7B,GACdA,EAAEsN,iBAmBF,IAjBA,IAAMC,EAAe9B,EAAS/I,QAAQ8K,MAKhCC,EAAWC,MAAMC,KAAKJ,GAEtBnN,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAhBkBwN,EAAA,SAoBZ5L,GAEN,GADAoL,EAAcvR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KAAEH,EAAAC,EAAAC,cAAA,iCAA6BF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBAAiBL,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,eAC3G0R,EAASzL,GAAGxC,KAjBK,UAkBlBtB,QAAQC,IAAIsP,EAASzL,IACrBvG,EAAIoS,YAAY,CAEdC,SAAUL,EAASzL,GACnB5C,KAAMsM,EAAY,IAAM+B,EAASzL,GAAGJ,OAG/BhC,KAAK,SAASa,GACb2M,EAAc,eACdrB,WAAW,WACTpD,IACAyE,EAAc,OACb,KAGHlP,QAAQC,IAAI+C,GAEZhD,QAAQC,IAAIsC,GAEZhF,EAAI6G,gBAAgB,CAClBlD,KAAMsM,IAGP9L,KAAK,SAAAa,GACJvC,QAAQC,IAAIsC,GAEZS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SAC3Be,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGjBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAOfiD,MAAM,SAASjD,GACdG,QAAQH,MAAMA,SAKpB,CAKF,IAHIgQ,EAAY,GAEZC,EAAS,EACNA,EAASP,EAASzL,GAAGxC,MACtByO,EAAYlE,KAAKmE,IALP,IAKoBT,EAASzL,GAAGxC,KAAOwO,GACrDD,EAAU1G,KAAKoG,EAASzL,GAAGgD,MAAMgJ,EAAQA,EAASC,IAClDD,GAAUC,EAGCF,EAAUI,OAAO,SAACC,EAAKC,EAAMxK,EAAKyK,GAC7C,OAAY,IAARzK,GACF3F,QAAQC,IAAI0F,GAELuK,EAAIxO,KAAK,WAId,OAHA1B,QAAQC,IAAI,SACZiP,EAAcvR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KAAEH,EAAAC,EAAAC,cAAA,iCAA6BF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBAAiBL,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,YAAWF,EAAAC,EAAAC,cAAA,eAEvGN,EAAI8S,wBAAwB,CAAEC,OAAO,EAAOV,SAAUO,IAClDzO,KAAK,SAAAa,GAAQ,OAAIA,EAASgO,gBAE9B5K,EAAMyK,EAAMrM,OAAO,GAC5B/D,QAAQC,IAAI,UAELiQ,EAAIxO,KAAK,SAAS8O,GACxB,IAAIC,EAAS,CAAEF,WAAYC,EAAWV,OAzB3B,IAyBmCnK,GAC9C,OAAOpI,EAAImT,2BAA2B,CAAED,OAAQA,EAAQH,OAAO,EAAOV,SAAUO,IAAQzO,KAAK,kBAAM8O,OAI7FN,EAAIxO,KAAK,SAAS8O,GACvB,IAAIC,EAAS,CAAEF,WAAYC,EAAWV,OAAQP,EAASzL,GAAGxC,KAAO6O,EAAK7O,MAClEqP,EAAS,CAAEzP,KAAMsM,EAAY,IAAM+B,EAASzL,GAAGJ,KAAMnC,KAAM,MAAO2E,YAAY,EAAM0K,MAAM,GAC9F,OAAOrT,EAAIsT,yBAAyB,CAAEJ,OAAQA,EAAQE,OAAQA,EAAQf,SAAUO,OAGnF3O,QAAQsP,WAENpP,KAAK,SAASqP,GAGjB7B,EAAc,eACdrB,WAAW,WACTpD,IACAyE,EAAc,OACb,KACHlP,QAAQC,IAAI8Q,GACZxT,EAAI6G,gBAAgB,CAClBlD,KAAMsM,IAGP9L,KAAK,SAAAa,GACJvC,QAAQC,IAAIsC,GAEZS,EAAMqB,gBAAgB,IACtBrB,EAAMsB,WAAW/B,EAAS5B,SAC1BqC,EAAMuB,cAAchC,EAAS5B,SAE7BD,EAAcnD,EAAKgF,EAAS5B,SAC3Be,KAAK,SAAAf,GAEJqC,EAAMqB,gBAAgB1D,KAErBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGjBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGfiD,MAAM,SAASjD,GACdG,QAAQH,MAAMA,OAjIZiE,EAAI,EAAGA,EAAIyL,EAASxL,OAAQD,IAAI,KA0DhC+L,EAEAC,EAEEC,EA9D8BL,EAAhC5L,GAyITyJ,EAAS/I,QAAQpC,MAAQ,IAiBgDA,MAAM,iBAC5EzE,EAAAC,EAAAC,cAAA,SAAOG,UAAU,gBAAgBiR,IAKnCtR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,UAAQG,UAAU,qBAAqB2F,QAjBpB,WACjB+J,EAAYlJ,QAAQlB,MAAMgC,QAAU,QACpCtC,EAAM2B,gBAAe,KAevB,gBACEqK,aC1HSgC,SAxEK,WACpB,IAAMC,EAAW9N,iBAAO,MADE/D,EAECC,mBAAS,iBAFVC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAEnBsE,EAFmBpE,EAAA,GAEb4R,EAFa5R,EAAA,GAAAK,EAGCN,mBAAS,mBAHVO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAGnBwR,EAHmBvR,EAAA,GAGbwR,EAHaxR,EAAA,GAAAoI,EAIQ3I,mBAAS,MAJjB4I,EAAA1I,OAAAC,EAAA,EAAAD,CAAAyI,EAAA,GAInBqJ,EAJmBpJ,EAAA,GAITqJ,EAJSrJ,EAAA,GAAAG,EAKO/I,mBAAS,MALhBgJ,EAAA9I,OAAAC,EAAA,EAAAD,CAAA6I,EAAA,GAKnBmJ,EALmBlJ,EAAA,GAKVmJ,EALUnJ,EAAA,GAQxBtI,oBAAU,WAER,IAAMmC,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGV,IAAI5E,UACd0E,GAGEuP,yBAEH/P,KAAK,SAAAa,GACJ2O,EAAW3O,EAASmB,KAAKgO,cACzBN,EAAW7O,EAASoP,OACpBL,EAAc/O,EAASqP,mBACvBJ,EAAcjP,EAASgP,WAGxBzO,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,MAGb,IAEL,IAWMgS,EAXAC,EAAmB,SAAChQ,GACxBmP,EAASzM,QAAQlB,MAAMgC,QAAU,SAE7ByM,EAAkB,SAACjQ,GACvBmP,EAASzM,QAAQlB,MAAMgC,QAAU,QAG7BvE,EAAIoQ,EAAKvL,YAAY,KAAO,EAE5B2B,EAAM,eADF4J,EAAKvN,UAAU7C,GAEnBiR,EAAcT,EAAQU,cAmB5B,OATIJ,EARGR,EASH1T,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAAC4O,OAAQ,mBAAoBzG,IAAI,YAAY0G,YAAaL,EAAkBM,WAAYL,EAAiB/T,UAAU,YAAYuN,IAAK8F,IAChJ1T,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAAC4O,OAAQ,mBAAoBzG,IAAI,eAAejI,IAAKyN,EAAUjT,UAAU,eAAeuN,IAAK8F,KATzG1T,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAAC4O,OAAQ,mBAAoBzG,IAAI,YAAY0G,YAAaL,EAAkBM,WAAYL,EAAiB/T,UAAU,YAAYuN,IAAM8G,EAAQ,MACzJ1U,EAAAC,EAAAC,cAAA,OAAKyF,MAAO,CAAC4O,OAAQ,mBAAoBzG,IAAI,eAAejI,IAAKyN,EAAUjT,UAAU,eAAeuN,IAAM8G,EAAQ,OAcpH1U,EAAAC,EAAAC,cAAA,OAAKG,UAAU,YACfL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,YAAWL,EAAAC,EAAAC,cAACyU,EAAA,EAAD,CAAkBC,KAAMP,EAAaQ,KAAG,KAClE7U,EAAAC,EAAAC,cAAA,QAAMG,UAAU,YAAWL,EAAAC,EAAAC,cAAA,KAAG6N,MAAM,iBAAiB1N,UAAU,eAAeC,KAAMsJ,EAAKxF,OAAO,SAAS0Q,QAAQ,OAAOC,IAAI,uBAAuBhP,IAClJmO,KCxDcc,EAbF,SAAC3P,GAOhB,OACIrF,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAAA,UAAQG,UAAU,kBAAkB2F,QARrB,WACXnF,EAAY,MACZwE,EAAM4P,iBAAiBzU,EAAOiE,OAC9BpD,EAAoB,QAKxB,YC+LW6T,EAlLM,SAAC7P,GAAU,IAAA5D,EAGLC,mBAAS,IAHJC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAGvB0T,EAHuBxT,EAAA,GAGlByT,EAHkBzT,EAAA,GAM9BS,oBAAU,WACR,IAAMiT,EAAenU,EAAWoU,UAAUF,GAC1C,OAAO,kBAAMC,EAAaE,gBACzB,IAEH,IAAIC,EAAWL,EAAIM,KAAK,SAACxV,EAAGyV,GAAJ,OAAWzV,EAAE,QAAUyV,EAAE,QAAW,GAAK,IAAGC,UAEtEvT,oBAAU,WAGR,IAAMmC,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAGFqR,YAAY,WACVhW,EAAI6G,gBAAgB,CAClBlD,KAAM,GACNsS,WAAW,IAGZ9R,KAAK,SAAAa,GAGqB,OAArB1D,EAAWuD,MACbpD,EAAoB,IAElB,WAYJ,IAXE,IAAI8T,EAAGvT,OAAA2E,EAAA,EAAA3E,CAAOV,EAAWuD,OAEvBqR,EAASlR,EAAS5B,QAAQG,IAAI,SAAAC,GAAC,OAAIA,EAAEI,KACrCuS,EAAaZ,EAAIhS,IAAI,SAAAC,GAAC,OAAIA,EAAEI,KAG5BwS,EAAIF,EAAOtJ,OAAO,SAASyJ,GAC7B,OAAoC,IAA7BF,EAAWG,QAAQD,KAGxBE,EAAY,GAXZpE,EAAA,SAYK5L,GACP,IAAIiQ,EAASjB,EAAI5I,KAAM,SAAApB,GAAI,OAAIA,EAAK3H,KAAOwS,EAAE7P,KAC7CgQ,EAAU3K,KAAK4K,IAFRjQ,EAAI,EAAGA,EAAI6P,EAAE5P,OAAQD,IAAI4L,EAAzB5L,GAKT9E,EAAoB8U,GAjBhB,MAoBL,MAEF,IAGC,IAsGIE,EAtGOb,EAsGmBrS,IArGN,SAACgI,GAWrB,GAJF9F,EAAM8F,KAAKhI,IALG,SAACC,GACPA,EAAEI,KAAO2H,EAAK3H,IAAMJ,EAAE2C,OAASoF,EAAKpF,OACtCoF,EAAO/H,KAOS,SAAjB+H,EAAK,QACF,OACEnL,EAAAC,EAAAC,cAAA,MACIyJ,IAAKwB,EAAK3H,GACVoI,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,QACfxF,MAAO,CAACqD,WAAY,QAASjC,OAAQ,KACrC1G,UAAU,aAEZL,EAAAC,EAAAC,cAAA,MACE6N,MAAO,aAAe5C,EAAKpF,KAC3B6F,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,QAASnF,QAAS9B,EACjCyB,MAAO,CAACmN,OAAQ,YAChB9S,EAAAC,EAAAC,cAAA,KAAGG,UAAU,wCAAb,sBAEFL,EAAAC,EAAAC,cAAA,MACE6N,MAAO,aAAe5C,EAAKpF,KAC3B6F,YAAWT,EAAKpF,KAChB8F,cAAaV,EAAKI,WAClBQ,WAAUZ,EAAK,QAASnF,QAAS9B,EACjCyB,MAAO,CAACmN,OAAQ,YAEjB3H,EAAKpF,OAsClB,GAAoB,WAAjBoF,EAAK,QAAqB,CAG3B,GAAIA,EAAKpF,KAAKgD,SAAS,KAAK,CAE1B,IAAIuN,EAAOnL,EAAKpF,KAAK4I,QAAQ,QAAQ,IACjCxC,EAAUhB,EAAKI,WAAWtF,UAAU,EAAGkF,EAAKI,WAAWtD,YAAY,MAAQ,IAAMqO,GApChE,SAAC7O,EAAQF,GAC9B,IAAMhD,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAGhB7E,EAAM,IAAIC,UACd0E,GAEF3E,EAAIwI,YAAY,CACdC,UAAWZ,EACXa,QAASf,EACTgB,YAAY,IAEbxE,KAAK,SAAAa,GACJhF,EAAI6G,gBAAgB,CAClBlD,KAAM8B,EAAMV,OAAOsB,UAAU,KAE9BlC,KAAK,SAAAa,GACJS,EAAMsB,WAAW/B,EAAS5B,aAI7BmC,MAAM,SAAAjD,GACLG,QAAQC,IAAIJ,KAcdqU,CAAepL,EAAKI,WAAYY,GAChChB,EAAKpF,KAAOuQ,EAGhB,OAEEtW,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAACqD,WAAY,SAAUW,IAAKwB,EAAK3H,GAAInD,UAAU,YAAYuL,YAAWT,EAAKpF,KAAM8F,cAAaV,EAAKI,WAAYQ,WAAUZ,EAAK,SACvInL,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,KAAGG,UAAU,+BAAb,WAEAL,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMrC,UAAU,iBAAiBsC,GAAI,QAAUwI,EAAKI,YAAaJ,EAAKpF,WAU9E,OACI/F,EAAAC,EAAAC,cAAA,OAAKG,UAAU,gBAAgBsF,MAAO,CAAC6Q,SAAU,WAAYC,IAAK,OAAQC,KAAM,QAC9E1W,EAAAC,EAAAC,cAAA,QAAMG,UAAU,gBAAgBsF,MAAO,CAAC8G,SAAU,SAASzM,EAAAC,EAAAC,cAAA,KAAGyF,MAAO,CAACG,MAAO,UAAW4G,iBAAkB,cAAeD,SAAU,QAASpM,UAAU,kBAA3F,QAA3D,eACAL,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACGmW,MC6OAM,SA9ZF,SAACtR,GAAU,IAAA5D,EACYC,mBAASlB,EAAOiE,OAD5B9C,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACfmV,EADejV,EAAA,GACRsT,EADQtT,EAAA,GAAAK,EAEKN,mBAAS,IAFdO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEfmJ,EAFelJ,EAAA,GAETmJ,EAFSnJ,EAAA,GAAAoI,EAGiB3I,mBAAS,IAH1B4I,EAAA1I,OAAAC,EAAA,EAAAD,CAAAyI,EAAA,GAGfoD,EAHenD,EAAA,GAGHuM,EAHGvM,EAAA,GAAAG,EAI6B/I,oBAAS,GAJtCgJ,EAAA9I,OAAAC,EAAA,EAAAD,CAAA6I,EAAA,GAIf+C,EAJe9C,EAAA,GAIGoM,EAJHpM,EAAA,GAAAG,EAKenJ,mBAAS,IALxBoJ,EAAAlJ,OAAAC,EAAA,EAAAD,CAAAiJ,EAAA,GAKfyB,EALexB,EAAA,GAKJiM,EALIjM,EAAA,GAAAG,EAMWvJ,mBAAS,IANpBwJ,EAAAtJ,OAAAC,EAAA,EAAAD,CAAAqJ,EAAA,GAMf+L,EANe9L,EAAA,GAMN+L,EANM/L,EAAA,GAAAgM,EAOaxV,oBAAS,GAPtByV,EAAAvV,OAAAC,EAAA,EAAAD,CAAAsV,EAAA,GAOfE,EAPeD,EAAA,GAOLE,EAPKF,EAAA,GAAAG,EAQmB5V,oBAAS,GAR5B6V,EAAA3V,OAAAC,EAAA,EAAAD,CAAA0V,EAAA,GAQflH,EARemH,EAAA,GAQFC,EARED,EAAA,GAWhBE,EAAUjS,iBAAO,IAEvBpD,oBAAU,WACRqV,EAAQ5Q,QAAUsE,GACjB,CAACA,IAEJ/I,oBAAU,WACR,IAAMiT,EAAenU,EAAWoU,UAAUyB,GAC1C,OAAO,kBAAM1B,EAAaE,gBACzB,IAEHnT,oBAAU,WAER,GAAIqL,EAAWrH,SAAW+E,EAAK/E,OAAQ,CACrC,IAAMsR,EAAWjK,EAAWkK,MAAM,SAACvU,EAAG4E,GACpC,MAAqB,YAAd5E,EAAE,SAAyBA,EAAEiD,SAAS7C,KAAO2H,EAAKnD,GAAKxE,KAGhEsT,EAAuBY,QAEvBZ,GAAuB,IAGxB,CAAC3L,EAAMsC,IAGRrL,oBAAU,WAIP,IAAGgV,EAAH,CAID,IAAMQ,EAAOhC,YAAY,WAEvB,IAAMrR,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAEhB7E,EAAM,IAAIC,UACd0E,GAGIsT,EAAUJ,EAAQ5Q,QAGxB,GAA+B,UAA5BxB,EAAM7C,SAASK,SAChBjD,EAAI6G,gBAAgB,CAClBlD,KAAM,KAGPQ,KAAK,SAAAa,GACJ,GAAI6S,EAAQ5Q,UAAYgR,EAAxB,CAOA,IAAIC,EAAclT,EAAS5B,QAAQG,IAAI,SAAAC,GAAC,OAAIA,EAAE2U,MAAKvL,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAC3DC,EAAajB,EAAQ7T,IAAI,SAAAC,GAAC,OAAIA,EAAE2U,MAAKvL,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IACjDE,EAAetT,EAAS5B,QAAQG,IAAI,SAAAC,GAAC,OAAIA,EAAE2C,OAAMyG,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAC7DG,EAAcnB,EAAQ7T,IAAI,SAAAC,GAAC,OAAIA,EAAE2C,OAAMyG,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAEjDI,EAAUN,EAAYtL,OAAO,SAAA6L,GAAE,OAAKJ,EAAWlP,SAASsP,KACxDC,EAAWJ,EAAa1L,OAAO,SAAA6L,GAAE,OAAKF,EAAYpP,SAASsP,KAG7DzT,EAAS5B,QAAQoD,OAAS4Q,EAAQ5Q,SAEpCyQ,EAAiB,IACjBzL,EAAWxG,EAAS5B,UASlB4B,EAAS5B,QAAQoD,SAAW4Q,EAAQ5Q,QAAWgS,EAAQhS,OAAS,GAAKkS,EAASlS,OAAS,GACzFiR,GAAe,GACfhV,QAAQC,IAAI,qBACZD,QAAQC,IAAI,oCAEVS,EAAcnD,EAAKgF,EAAS5B,SAE3Be,KAAK,SAAAf,GAEJoI,EAAWxG,EAAS5B,SACpBiU,EAAcrS,EAAS5B,SACvB6T,EAAiB7T,KAGlBe,KAAK,SAAAwU,GACJlB,GAAe,GACfhV,QAAQC,IAAI,4BAGb6C,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,MAMhBG,QAAQC,IAAI,yCAMf6C,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,SAIZ,CAEF,IAAI2N,EAAYxK,EAAM7C,SAASK,SAC/BgN,EAAYA,EAAU5J,UAAU,GAEhCrG,EAAI6G,gBAAgB,CAClBlD,KAAMsM,IAGP9L,KAAK,SAAAa,GACJ,GAAI6S,EAAQ5Q,UAAYgR,EAAxB,CAOA,IAAIC,EAAclT,EAAS5B,QAAQG,IAAI,SAAAC,GAAC,OAAIA,EAAE2U,MAAKvL,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAC3DC,EAAajB,EAAQ7T,IAAI,SAAAC,GAAC,OAAIA,EAAE2U,MAAKvL,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IACjDE,EAAetT,EAAS5B,QAAQG,IAAI,SAAAC,GAAC,OAAIA,EAAE2C,OAAMyG,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAC7DG,EAAcnB,EAAQ7T,IAAI,SAAAC,GAAC,OAAIA,EAAE2C,OAAMyG,OAAO,SAAAwL,GAAC,YAAUtK,IAANsK,IAEjDI,EAAUN,EAAYtL,OAAO,SAAA6L,GAAE,OAAKJ,EAAWlP,SAASsP,KACxDC,EAAWJ,EAAa1L,OAAO,SAAA6L,GAAE,OAAKF,EAAYpP,SAASsP,KAS9DzT,EAAS5B,QAAQoD,OAAS4Q,EAAQ5Q,SAEnCyQ,EAAiB,IACjBzL,EAAWxG,EAAS5B,UAOnB4B,EAAS5B,QAAQoD,SAAW4Q,EAAQ5Q,QAAUgS,EAAQhS,OAAS,GAAKkS,EAASlS,OAAS,GAEvFiR,GAAe,GACfhV,QAAQC,IAAI,uBACZD,QAAQC,IAAI,sCAEZS,EAAcnD,EAAKgF,EAAS5B,SAG1Be,KAAK,SAAAf,GACLoI,EAAWxG,EAAS5B,SACpBiU,EAAcrS,EAAS5B,SACvB6T,EAAiB7T,KAGlBe,KAAK,SAAAwU,GACJlB,GAAe,GACfhV,QAAQC,IAAI,8BAGb6C,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,MAIZG,QAAQC,IAAI,2CAMjB6C,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAGf,KAIL,OAAO,kBAAMsW,cAAcZ,MAExB,CAACzM,EAAM6L,EAAS3R,EAAM7C,SAASK,SAAUuU,IAK9ChV,oBAAU,WACRiV,GAAe,GACfhV,QAAQC,IAAI,eACZ,IAAMiC,EAAS,CACbxE,MAAOA,MACPyE,YAAahE,EAAOiE,OAEhB7E,EAAM,IAAIC,UACd0E,GAEF,GAA+B,UAA5Bc,EAAM7C,SAASK,SAChBjD,EAAI6G,gBAAgB,CAClBlD,KAAM,KAGPQ,KAAK,SAAAa,GACJvC,QAAQC,IAAI,8BACVuU,EAAiB,IACjBzL,EAAWxG,EAAS5B,SACpBiU,EAAcrS,EAAS5B,SAEzBD,EAAcnD,EAAKgF,EAAS5B,SAE3Be,KAAK,SAAAf,GACA4B,EAAS5B,UAAYyU,EAAQ5Q,UAIjCxE,QAAQC,IAAI,gBACVuU,EAAiB7T,MAGlBmC,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,OAMjBiD,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,SAKZ,CAEF,IAAI2N,EAAYxK,EAAM7C,SAASK,SAC/BgN,EAAYA,EAAU5J,UAAU,GAEhCrG,EAAI6G,gBAAgB,CAClBlD,KAAMsM,IAGP9L,KAAK,SAAAa,GAGJiS,EAAiB,IACjBzL,EAAWxG,EAAS5B,SACpBiU,EAAcrS,EAAS5B,SAGvBX,QAAQC,IAAIsC,EAAS5B,QAAQoD,QAC9B/D,QAAQC,IAAI,8BACXS,EAAcnD,EAAKgF,EAAS5B,SAGzBe,KAAK,SAAAf,GACJX,QAAQC,IAAI,gBACZuU,EAAiB7T,KAIhBmC,MAAM,SAASjD,GACe,MAA1BA,EAAM0C,SAAS6T,QAChB5B,EAAiB,QAS1B1R,MAAM,SAASjD,GACdG,QAAQC,IAAIJ,KAGdgL,IAAkB,GAClBmK,GAAe,IAChB,CAAChS,EAAM7C,SAASK,SAAUuN,IAG7B,IAAMzJ,EAAa,SAACwE,GAElBC,EAAWD,IAIPzE,GAAkB,SAACyE,GACvB0L,EAAiB1L,IAGbvE,GAAgB,SAACuE,GACrB8L,EAAc9L,IASVnE,GAAiB,SAAC0R,GACpBrB,EAAeqB,IAMbxL,GAAoB,SAACwL,GACzBlB,EAAkBkB,IAMpB,OAAa,OAAV9B,EACM5W,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CAAUD,GAAG,MAIpB3C,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACAH,EAAAC,EAAAC,cAACE,EAAA,OAAD,KACEJ,EAAAC,EAAAC,cAAA,uBAEFF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,cAChBL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,oBAAmBL,EAAAC,EAAAC,cAAA,OAAKsD,GAAG,cAAcoK,IAAM8G,EAAQ,IAA2B5G,IAAI,gBAArG,KACE9N,EAAAC,EAAAC,cAAA,QAAMG,UAAU,iBACdL,EAAAC,EAAAC,cAACyY,EAAD,CAAQ3R,eAAgBA,GAAgB4R,WAAYzN,EAAMxG,OAAQU,EAAM7C,SAASK,SAAU8D,WAAYA,EAAYD,gBAAiBA,GAAiBE,cAAeA,GAAewJ,YAAaA,EAAalD,kBAAmBA,KAChOlN,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAAC2Y,EAAD,OACN7Y,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAAC4Y,EAAD,CAAQ7D,iBAAkBA,OAGtCjV,EAAAC,EAAAC,cAAA,OAAKG,UAAU,eACbL,EAAAC,EAAAC,cAAA,SAAOG,UAAU,YAEfL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBAAiBL,EAAAC,EAAAC,cAAC6Y,EAAD,CAAYpU,OAAQU,EAAM7C,SAASK,SAAU8D,WAAYA,EAAYD,gBAAiBA,GAAiBE,cAAeA,GAAeI,eAAgBA,KAA6BhH,EAAAC,EAAAC,cAAA,WAASF,EAAAC,EAAAC,cAAA,WAC3NF,EAAAC,EAAAC,cAAC8Y,EAAD,CAAcrU,OAAQU,EAAM7C,SAASK,SAAU8D,WAAYA,EAAYD,gBAAiBA,GAAiBE,cAAeA,GAAeI,eAAgBA,OAEzJhH,EAAAC,EAAAC,cAAA,QAAMG,UAAU,YAChBL,EAAAC,EAAAC,cAAA,SAAO8F,QAAS,kBAAMwR,GAAkB,KACxCxX,EAAAC,EAAAC,cAAC+Y,EAAD,CAAa/L,kBAAmBA,KAAoBlN,EAAAC,EAAAC,cAAA,YAClDF,EAAAC,EAAAC,cAAA,SAAOG,UAAU,aACfL,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIG,UAAU,iBACdL,EAAAC,EAAAC,cAAA,MAAIgZ,QAAQ,KAAZ,QAGAlZ,EAAAC,EAAAC,cAAA,uBAGAF,EAAAC,EAAAC,cAAA,yBAGAF,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAAEsJ,UAAW,WAAxB,OAGAjP,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAAEsJ,UAAW,WAAxB,OAGAjP,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAAEsJ,UAAW,WAAxB,OAGAjP,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAAEsJ,UAAW,WAAxB,OAGAjP,EAAAC,EAAAC,cAAA,MAAIyF,MAAO,CAAEsJ,UAAW,WAAxB,SAKFjP,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACiZ,EAAD,CAAW7M,UAAWA,EAAW+C,UA3EzB,SAAClE,GACjB4L,EAAgB5L,GAChB9J,EAAoB8J,IAyE2CqC,iBAAkBA,EAAkB7I,OAAQU,EAAM7C,SAASK,SAAU8D,WAAYA,EAAYD,gBAAiBA,GAAiBE,cAAeA,GAAeyG,WAAYlC,EAAMsC,WAAYA,EAAYP,kBAAmBA,GAAmBlG,eAAgBA,QAI1ThH,EAAAC,EAAAC,cAAA,SAAOG,UAAU,aACfL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,UACdL,EAAAC,EAAAC,cAACkZ,EAAD,CAAcC,SAzEJ,SAAC/N,GAChBjK,EAAoBiK,IAwEmBH,KAAMA,SC/YlCmO,MAlBf,WAEE,OACEtZ,EAAAC,EAAAC,cAACwC,EAAA,EAAD,KACA1C,EAAAC,EAAAC,cAAA,OAAKG,UAAU,QAKfL,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CAAO2W,OAAK,EAAChW,KAAK,IAAIiW,UAAW7Z,IACjCK,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CAAOW,KAAK,QAAQiW,UAAWhY,IAC/BxB,EAAAC,EAAAC,cAAC0C,EAAA,EAAD,CAAOW,KAAK,QAAQiW,UAAW7C,MCRf8C,QACW,cAA7B/Y,OAAO8B,SAASkX,UAEe,UAA7BhZ,OAAO8B,SAASkX,UAEhBhZ,OAAO8B,SAASkX,SAASjX,MACvB,2DCZNkX,IAASC,OAAO5Z,EAAAC,EAAAC,cAAC2Z,EAAD,MAAS/U,SAASgV,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMlW,KAAK,SAAAmW,GACjCA,EAAaC","file":"static/js/main.a151e6ae.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQjQzMzMwQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQjQzMzMxQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REFCNDMzMkVCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFCNDMzMkZCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55zlruAAAI6ElEQVR42uydPU8bWRSG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\"","module.exports = __webpack_public_path__ + \"static/media/Logo_mybox.91350eb7.png\";","import React from 'react';\nimport { Dropbox } from 'dropbox';\nimport { Helmet } from \"react-helmet\";\nimport '../Css/login.css';\nconst appkey =  'bvtwa87o7e9bfk6';\n\n\n\nconst Login = () => {\n\nconst dbx = new Dropbox({\n  clientId: appkey,\n  fetch: fetch,\n})\n\n  \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX Connect</title>\n    </Helmet>\n    <div className=\"loginMain\">\n      <a className=\"loginLink\" href={dbx.getAuthenticationUrl('http://localhost:3000/auth')}><button className=\"loginBtn\">Connect</button></a>\n    </div>\n    </>\n  )\n}\n\nexport default Login;","import { BehaviorSubject } from 'rxjs';\n\nexport const token$ = new BehaviorSubject(window.localStorage.getItem('token') || null);\n\n\nexport function updateToken(newToken) {\n\n  if(!newToken){\n    window.localStorage.removeItem('token');\n  }\n  else{\n    window.localStorage.setItem('token', newToken);\n  }\n\n token$.next(newToken);\n //console.log(token$.value)\n}\n\n//====================================FAVORITES STORE TOKEN==========================================\nexport const favorites$ = new BehaviorSubject(JSON.parse(window.localStorage.getItem(\"favorites\") || \"[]\"));\n\nexport function updateFavoriteToken(newFavorites) {\n\n  if(!newFavorites){\n    window.localStorage.removeItem(\"favorites\");\n  }\n  else {\n    window.localStorage.setItem(\"favorites\", JSON.stringify(newFavorites));\n  }\n  favorites$.next(newFavorites)\n}","import React, {useEffect, useState} from 'react';\nimport { updateToken } from './store.js'\nimport { Helmet } from \"react-helmet\";\nimport { Link, Redirect}from \"react-router-dom\";\nimport '../Css/auth.css';\n\n\nconst Auth = () => {\n  const [isLoggedIn, updateIsLoggedIn] = useState(false)\n  const [error, errorUpdate] = useState(false)\n  \n  useEffect(() => {\n    console.log('render Auth')\n    const hash = window.location.hash\n    let errorHash = \"#error_description=The+user+chose+not+to+give+your+app+access+to+their+Dropbox+account.&error=access_denied\";\n    if (hash === errorHash){\n      errorUpdate(true)\n      return\n    }\n    \n    const regex = /#(?:access_token)=([\\S\\s]*?)&/\n    const token = hash.match(regex)[1];\n\n    updateToken(token);\n    updateIsLoggedIn(true)\n  \n  }, [])\n  if (error){\n    return(\n      <>\n      <Helmet>\n      <title>MyBOX Auth</title>\n      </Helmet>\n      <div className=\"authMainLoader\">\n        <div className=\"authProgress\">\n          <b><p>No access.<br/>Reload page.</p></b>\n          <Link to=\"/\"><button className=\"modalBtn\">Reload</button></Link>\n    </div>\n   </div>\n   </>\n    )\n  }\n  \n    if(isLoggedIn){\n          return  <Redirect to={{pathname:\"/home\", state: {isLoggedIn: isLoggedIn}}} />\n    }\n  return(\n    <>\n    <Helmet>\n      <title>MyBOX Auth</title>\n    </Helmet>\n   <div className=\"authMainLoader\">\n    <div className=\"authProgress\">\n        <div className=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n        <p>Loading page...</p>\n    </div>\n   </div>\n   </>\n  )\n  \n}\n\nexport default Auth;","import chunk from 'lodash.chunk';\nimport flatten from 'lodash.flatten';\n\nexport const getThumbnails = (dbx, entries) => {\n  const chunks = chunk(entries, 25);\n\n  const promises = chunks.map((x) => {\n    return dbx.filesGetThumbnailBatch({\n      entries: x.map(entry => {\n        return{\n          path: entry.id,\n          format : {'.tag': 'jpeg'},\n          size: { '.tag': 'w32h32'},\n          mode: { '.tag': 'strict' }  \n          }\n        })\n    });\n  });\n\n  return Promise.all(promises).then((results) => {\n    return flatten(results.map(x => x.entries));\n  });\n}","import {token$} from './store.js';\r\nimport { Dropbox } from 'dropbox';\r\n\r\nexport const downloadFile = (e) => {\r\n    if(e.target.dataset.tag === 'folder'){\r\n      return null;\r\n    }\r\n    \r\n   if(e.target.dataset.tag === 'file'){\r\n     const option = {\r\n      fetch: fetch,\r\n      accessToken: token$.value\r\n    };\r\n    \r\n     const dbx = new Dropbox(option);\r\n     dbx.filesGetTemporaryLink({ \r\n       path: e.target.dataset.folder})\r\n        .then(response => {\r\n          let link = document.createElement(\"a\");\r\n          link.href = response.link;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n        })\r\n        .catch(error => {\r\n         console.log(error)\r\n        });\r\n    }\r\n  }","import React, {useState, useRef} from 'react';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { Dropbox } from 'dropbox';\r\nimport { getThumbnails } from './getthumbnails'\r\nimport '../Css/modal.css'\r\n\r\n\r\nconst Delete = (props) => {\r\n    const element = useRef(null);\r\n    const [delFile, updateDelFile] = useState(\"\")\r\n\r\nlet delModal;\r\n\r\nlet pointerEvent = \"visible\"\r\nconst del = (e) => {\r\n  props.pollUpdateMode(true)\r\n  updateDelFile(e.target.dataset.path) \r\n  element.current.style.visibility = \"visible\"\r\n  element.current.style.zIndex = \"500\";\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\n\r\nconst yes = () => {\r\n      let path = props.folder.substring(5)\r\n        const option = {\r\n            fetch: fetch,\r\n            accessToken: token$.value\r\n          };\r\n    \r\n          const dbx = new Dropbox(\r\n            option,\r\n          );\r\n    \r\n          dbx.filesDeleteV2({\r\n            path: delFile,\r\n          })\r\n          .then(response => {\r\n            for (let i=0; i<favorites$.value.length; i++) {\r\n              if (favorites$.value[i].id === response.metadata.id) {\r\n                  let newArray = [...favorites$.value];\r\n                  newArray.splice(i, 1);\r\n                  updateFavoriteToken(newArray);\r\n            }\r\n          }\r\n            dbx.filesListFolder({\r\n            path: path,\r\n          \r\n                }).then(response =>{\r\n                  props.thumbnailUpdate([])\r\n                  props.dataUpdate(response.entries)\r\n                  props.oldDataUpdate(response.entries)\r\n\r\n                  getThumbnails(dbx, response.entries)\r\n\r\n                        \r\n                        .then(entries => {   \r\n                          \r\n                          props.thumbnailUpdate(entries)\r\n                          })\r\n                          .catch(function(error) {\r\n                            console.log(error);\r\n                          });\r\n                  \r\n                })\r\n                .catch(function(error) {\r\n                  console.log(error);\r\n                });\r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n          });\r\n    \r\n    element.current.style.visibility = \"hidden\"\r\n    //document.body.style.overflowY = \"auto\"\r\n    element.current.style.zIndex = \"0\";\r\n    props.pollUpdateMode(false)\r\n}\r\n\r\nconst no = () => {\r\n    \r\n    element.current.style.visibility = \"hidden\"\r\n    document.body.style.overflowY = \"auto\"\r\n    element.current.style.zIndex = \"0\";\r\n    props.pollUpdateMode(false)\r\n}\r\n\r\ndelModal = <div style={{pointerEvents: pointerEvent}} ref={element} className=\"modalBack\">\r\n<div style={{pointerEvents: pointerEvent}} className=\"modal\">\r\n    <div style={{pointerEvents: pointerEvent}} className=\"mainModal\">\r\n        <h2 style={{color: \"black\"}}>Delete ! ! !</h2>\r\n        <p className=\"modalText\">Do you want to delete {props.tag} {props.name} ??</p>\r\n        <button className=\"modalBtn yes\"  onClick={yes}>YES</button><button className=\"modalBtn no\" onClick={no}>NO</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\nreturn (\r\n    <>\r\n    {delModal}\r\n    <button className=\"listBtn\" onClick={del}> <i data-path={props.path} className=\"material-icons delete-icon\">delete_outline</i></button>\r\n    </>\r\n)\r\n\r\n}\r\nexport default Delete;","import React, {useState,useRef} from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\n\r\nconst RenameFile = (props) => {\r\n\r\n  const inputEl = useRef(null);\r\n  const clearInput = useRef(null)\r\n  const [newUrl, updateNewUrl] = useState(\"\");\r\n  const [rename, updateRename] = useState(\"\");\r\n\r\n\r\nlet renameInput;\r\n\r\nconst option = {\r\n  fetch: fetch,\r\n  accessToken: token$.value\r\n};\r\n\r\nconst dbx = new Dropbox(\r\n  option,\r\n);\r\n\r\n\r\nconst reName = (e) => {\r\n  props.pollUpdateMode(true)\r\n  let old = e.target.dataset.path\r\n  updateRename(old)\r\n  \r\n  \r\n  inputEl.current.style.display = \"block\"\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\nconst newNameInput = (e) => {\r\n  let target = e.target.value\r\n  let idx = rename.lastIndexOf('.')\r\n  let newIdx = rename.substring(idx)\r\n  let newPath = rename.substring(0, rename.lastIndexOf(\"/\"));\r\n  let fixNewname = newPath + \"/\" + target + newIdx;\r\n  updateNewUrl(fixNewname);\r\n}\r\n\r\nconst addNewName = (e) => {\r\n  //console.log(props)\r\n  \r\n  dbx.filesMoveV2({\r\n    from_path: rename,\r\n    to_path: newUrl,\r\n    autorename: true\r\n  })\r\n  .then(response => {\r\n\r\n    for (let i=0; i<favorites$.value.length; i++) {\r\n      if (favorites$.value[i].id === response.metadata.id) {\r\n          let newArray = [...favorites$.value];\r\n          newArray[i] = response.metadata;\r\n          updateFavoriteToken(newArray);\r\n      }\r\n    }\r\n    dbx.filesListFolder({\r\n      path: props.folder.substring(5),\r\n    \r\n          }).then(response =>{\r\n            props.thumbnailUpdate([])\r\n            props.dataUpdate(response.entries)\r\n            props.oldDataUpdate(response.entries)\r\n\r\n            getThumbnails(dbx, response.entries)\r\n                  .then(entries => {   \r\n                    \r\n                    props.thumbnailUpdate(entries)\r\n                    })\r\n                    .catch(function(error) {\r\n                      console.log(error);\r\n                    });\r\n            \r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n          });\r\n  })\r\n  .catch(error => {\r\n    console.log(error);\r\n  });\r\n\r\n\r\n\r\n\r\n  inputEl.current.style.display = \"none\"\r\n  document.body.style.overflowY = \"auto\"\r\n  clearInput.current.value = \"\";\r\n  props.pollUpdateMode(false)\r\n\r\n}\r\n\r\nconst addNewNameClose = () =>{\r\n  inputEl.current.style.display = \"none\"\r\n  document.body.style.overflowY = \"auto\"\r\n  props.pollUpdateMode(false)\r\n}\r\n\r\nrenameInput = \r\n<div className=\"reNameBack\" ref={inputEl} >\r\n<div className=\"listRenameInput\"><div className=\"listRenameText\"> Rename file</div><span className=\"listRenameClose\" onClick={addNewNameClose}><i className=\"material-icons\">close</i></span><input className=\"listRenameInputText\" style={{outline: \"none\"}} ref={clearInput} placeholder=\"New filename...\" type=\"text\" onChange={newNameInput} /><button style={{outline: \"none\"}} className=\"listBtnRename\" onClick={addNewName}>Ok</button></div></div>\r\n\r\n\r\nreturn(\r\n  <>\r\n  {renameInput}\r\n  <button className=\"listBtn\" onClick={reName}><i data-path={props.path} className=\"material-icons rename-icon\">edit</i></button>\r\n  </>\r\n)\r\n\r\n}\r\n\r\nexport default RenameFile;\r\n","import React, {useState,useRef} from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\n\r\nconst ReNameFolder = (props) => {\r\n  const inputElFolder = useRef(null);\r\n  const clearInputFolder = useRef(null)\r\n  const okBtn = useRef(null)\r\n  const reNameMess = useRef(null)\r\n  const [newUrl, updateNewUrl] = useState(\"\");\r\n  const [rename, updateRename] = useState(\"\");\r\n\r\n  let renameInputFolder;\r\n\r\n  const option = {\r\n    fetch: fetch,\r\n    accessToken: token$.value\r\n  };\r\n  \r\n  const dbx = new Dropbox(\r\n    option,\r\n  );\r\n\r\n\r\nconst reNameFolder = (e) => {\r\nprops.pollUpdateMode(true)\r\nlet old = e.target.dataset.path\r\nupdateRename(old)\r\n\r\n  inputElFolder.current.style.display = \"block\"\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\nconst newNameInputFolder = (e) => {\r\nlet target = e.target.value\r\n\r\nif (target.includes(\"(\") && target.includes(\")\")){\r\n  okBtn.current.style.pointerEvents = \"none\"\r\n  okBtn.current.style.background = \"gray\"\r\n  reNameMess.current.style.display = \"block\"\r\n}\r\nelse{\r\n  okBtn.current.style.pointerEvents = \"visible\" \r\n  okBtn.current.style.background = \"#029BB5\"\r\n  reNameMess.current.style.display = \"none\"\r\n}\r\n\r\nlet path = rename.split(\"/\");\r\nlet strippedPath = path.slice(0, path.length-1).join(\"/\");\r\n\r\nlet fixNewname = strippedPath + \"/\" + target;\r\nupdateNewUrl(fixNewname);\r\n}\r\n\r\nconst addNewNameFolder = (e) => {\r\n\r\n\r\n\r\n    dbx.filesMoveV2({\r\n        from_path: rename,\r\n        to_path: newUrl,\r\n        autorename: false\r\n      })\r\n      .then(response => {\r\n\r\n        for (let i=0; i<favorites$.value.length; i++) {\r\n          if (favorites$.value[i].id === response.metadata.id) {\r\n              let newArray = [...favorites$.value];\r\n              newArray[i] = response.metadata;\r\n              updateFavoriteToken(newArray);\r\n          }\r\n        }\r\n        dbx.filesListFolder({\r\n          path: props.folder.substring(5),\r\n        \r\n              }).then(response =>{\r\n                props.thumbnailUpdate([])\r\n                props.dataUpdate(response.entries)\r\n                props.oldDataUpdate(response.entries)\r\n    \r\n                getThumbnails(dbx, response.entries)\r\n                      .then(entries => {   \r\n                        \r\n                        props.thumbnailUpdate(entries)\r\n                        })\r\n                        .catch(function(error) {\r\n                          console.log(error);\r\n                        });\r\n                \r\n              })\r\n              .catch(function(error) {\r\n                console.log(error);\r\n              });\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n    \r\n\r\n\r\n\r\ninputElFolder.current.style.display = \"none\"\r\ndocument.body.style.overflowY = \"auto\"\r\nclearInputFolder.current.value = \"\";\r\nprops.pollUpdateMode(false)\r\n\r\n}\r\nconst addNewNameCloseFolder = () =>{\r\ninputElFolder.current.style.display = \"none\"\r\ndocument.body.style.overflowY = \"auto\"\r\nprops.pollUpdateMode(false)\r\n}\r\n\r\nrenameInputFolder = \r\n<div ref={inputElFolder} className=\"reNameBack\">\r\n<div className=\"listRenameInput\"><div className=\"listRenameText\">Rename folder</div><span className=\"listRenameClose\" onClick={addNewNameCloseFolder}><i className=\"material-icons\">close</i></span><input placeholder=\"New foldername...\" className=\"listRenameInputText\" style={{outline: \"none\"}} ref={clearInputFolder} type=\"text\" onChange={newNameInputFolder} /><button ref={okBtn} className=\"listBtnRename\" style={{outline: \"none\"}} onClick={addNewNameFolder}>Ok</button></div><div ref={reNameMess} className=\"renameFoldeEerrorMess\">No folder name whit ( ) !</div></div>\r\n\r\n\r\nreturn(\r\n  <>\r\n  {renameInputFolder}\r\n  <button className=\"listBtn\" onClick={reNameFolder}><i data-path={props.path} className=\"material-icons rename-icon\">edit</i></button>  </>\r\n)\r\n\r\n}\r\n\r\nexport default ReNameFolder;\r\n","import React from 'react';\nimport { NavLink, Link } from \"react-router-dom\";\nimport withBreadcrumbs from 'react-router-breadcrumbs-hoc';\nimport '../Css/breadcrumbs.css';\n\nconst ModalBreadcrumbs = withBreadcrumbs([{ path: '/', breadcrumb: null }])(({ breadcrumbs }) => (\n    <>\n    <i className=\"material-icons-outlined breadcrumb-home\">home</i><Link className=\"breadcrumb-link\" to=\"/\">Home<i className=\"material-icons breadcrumb\">arrow_right</i></Link>\n    <React.Fragment>\n      {breadcrumbs.map(({\n        match,\n        breadcrumb,\n      }) => (\n        \n        <span key={match.url}>\n          <NavLink to={match.url} className=\"breadcrumb-link\"> {breadcrumb} \n          </NavLink><i className=\"material-icons breadcrumb\">arrow_right</i>\n        </span>\n      ))}\n    </React.Fragment>\n    <br />\n    </>\n  ));\n  \nexport default ModalBreadcrumbs;\n  ","import React, {useState, useRef, useEffect} from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\nimport {Link}from \"react-router-dom\";\nimport { HashRouter as Router} from \"react-router-dom\";\nimport ModalBreadcrumbs from './modalbreadcrumb.js'\nimport { getThumbnails } from './getthumbnails'\nimport '../Css/movefiles.css';\n\n\nconst MoveFiles = (props) => {\n  \n    const moveModal = useRef(null);\n    const moveMessRef = useRef(null);\n    const [moveError, updateMoveError] = useState(\"\")\n    const [movePath, updateMovePath] = useState(\"\")\n    const [startPath, updateStartPath] = useState(\"\")\n    const [fileTransfer, updateFileTransfer] = useState(\"\")\n    const [showModal, updateShowModal] = useState(false)\n    const [data, updateData] = useState([]);\n    let moveFolders = '';\n    const path = window.decodeURIComponent(window.location.hash.slice(1));\n\n\n    /*========= API Request for List folders =========*/\n    useEffect((e) => {\n     // console.log('Render ...moveFiles')\n      if (!showModal) {\n        moveModal.current.style.display = 'none';\n      } else {\n        document.body.style.overflowY = \"hidden\"\n        moveModal.current.style.display = 'block';\n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n      };\n      const dbx = new Dropbox(\n        option,\n      );\n  \n      if (path === '/'){\n        \n        dbx.filesListFolder({\n          path: '',\n        })\n        .then(response => {\n          let arr = []\n          let data = response.entries\n          for (let i = 0; i < data.length; i++) {\n            if (data[i].path_lower !== props.path)\n              arr.push(data[i])\n          }\n          updateData(arr)  \n        })\n        .catch(error => {\n          console.log(error);\n        }); \n       } else {\n        \n        dbx.filesListFolder({\n          path: path,\n        })\n        .then(response => {\n          let arr = []\n          let data = response.entries\n          for (let i = 0; i < data.length; i++) {\n            if (data[i].path_lower !== props.path)\n              arr.push(data[i])\n          }\n          updateData(arr) \n        })\n        .catch(error => {\n          console.log(error);\n        }); \n      }\n    }\n\n    }, [showModal, path, props.path]);\n\n  useEffect(() => {\n    if (!showModal) {\n      window.location.hash = \"/\";\n\n    }\n  }, [showModal]);\n\n  const startModal = (path) => {\n    props.pollUpdateMode(true)\n   updateShowModal(true)\n   updateStartPath(path)\n  }\n  let newName2 = startPath.substring(0, startPath.lastIndexOf(\"/\")); \n  const setPath = (e) => {\n    updateMovePath(e.target.dataset.id)\n  }\n\n/*========= API Request for move files =========*/\n\n  const moveToFolder = () => {\n        let index = startPath.lastIndexOf(\"/\")\n        let newName = startPath.substring(index)\n        \n        updateMoveError('')\n    \n        const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesMoveV2({\n            from_path: startPath,\n            to_path: movePath + newName,\n            autorename: false\n          })\n          .then(response => {\n\n            for (let i=0; i<favorites$.value.length; i++) {\n              if (favorites$.value[i].id === response.metadata.id) {\n                  let newArray = [...favorites$.value];\n                  newArray[i] = response.metadata;\n                  updateFavoriteToken(newArray);\n              }\n            }\n\n            updateFileTransfer('File transfered')\n            dbx.filesListFolder({\n              path: newName2,\n          })\n          .then(response => {\n            console.log(props)\n            props.thumbnailUpdate([]);\n            props.oldDataUpdate(response.entries)\n            props.dataUpdate(response.entries)\n\n            getThumbnails(dbx, response.entries)\n\n            \n            .then(entries => {   \n              updateMoveError(\"\")\n              props.thumbnailUpdate(entries)\n              })\n              .catch(function(error) {\n                console.log(error);\n               });\n\n          })\n            .catch(error => {\n              console.log(error);\n          }); \n        })\n        .catch(error => {\n          console.log(error);\n          updateMoveError(\"File / Folder with the same name already exists!\")\n        });\n        props.pollUpdateMode(false)\n    }\n /*==================*/\n \n  const renderModalData = (data) => {\n    \n    if(data[\".tag\"] === 'folder'){ //FOLDER\n      return( //FOLDERS\n        <tr key={data.id} className=\"modal-movefiles-tr\" data-name={data.name} data-folder={data.path_display} data-tag={data[\".tag\"]}>\n          <td key={data.id} className=\"modal-movefiles-td-icon\">\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td className=\"modal-movefiles-td-link\">\n          <Link to={ data.path_lower } className=\"modal-movefiles-link\" onClick={ setPath } data-id={ data.path_display }>{ data.name }</Link>\n          </td>\n        </tr>\n          )\n        } \n      \n  }\n\n  let mapping = data.map(renderModalData)\n\n  const closeModal = () => {\n      updateShowModal(false)\n      updateMovePath('')\n      updateStartPath('')\n      document.body.style.overflowY = \"auto\"\n      props.pollUpdateMode(false)\n  }\n  \n\n \n\n  \n\n    moveFolders = \n    <Router>\n      <div ref={ moveModal } className=\"moveBack\">\n    <div className=\"moveModal\" >\n    <h3 className=\"movefiles-h3\">Move files</h3>\n    <ModalBreadcrumbs />\n    <p className=\"movefiles-p\">Move <span className=\"movefiles-file\">{props.name}</span> ... to ... <span className=\"movefiles-file\">{ movePath.slice(1)}</span></p>\n    <p>{ fileTransfer }</p>\n    <table>\n      <tbody>\n      { mapping }\n      </tbody>\n    </table>\n    { moveError }\n    <button className=\"modal-movefiles-button\" onClick={ moveToFolder }>Move</button>\n    <i className=\"material-icons upload-close\" onClick={closeModal}>close</i>\n    <p ref={moveMessRef} style={{display: \"none\"}}>{props.name} moved...</p>\n    </div>\n    </div>\n    </Router>\n  \n    \n    return (\n        <>\n        { moveFolders }\n        <button className=\"listBtn\" onClick={ () => startModal(props.path) }> <i className=\"material-icons movefiles-icon\">swap_horiz</i></button>\n        </>\n\n    )\n\n}\n\nexport default MoveFiles;\n\n\n\n\n\n","import React from 'react';\nimport {updateFavoriteToken} from './store.js';\n\n/*\n\nGOAL: \nWhen the user clicks on an Add_to_Favorites-button, the chosen file should be copied to a new_state,\nwith all the needed data.\n\nThe new_state should be used to render a favorite_list, which should be displayed in a side_menu on the right of the main_content.\n\n- When the user deletes or renames the file, the file should also be deleted, or renamed, in the favorite_list.\nOR ELSE: The demand is that the error caused by the file being used in any way from the favorite_list, after having been deleted, should be handled.\nA direct update of the favorite_state is not required, but obviously better.\n\n- When a user logs out, the local storage should be cleaned out, so that no favorites exists once the user logs back in. \n\n=== Ha state i rooten.\n=== Använd behavioursubject för att uppdatera favoritestatet.\n=== Kör en toggle onClick - Om id inte finns i listan, lägg till objektet (objekt ska in i state, inte id), om id finns i listan, ta bort.\n*/\n\nconst AddFavorites = (props) => {\n//////////////////////////////////////////////////////////////////////////////////////////////////\n    let favArray = props.favorites;\n    let data = props.data;\n\n    const isFavorite = !!favArray.find(x => x.id === data.id);\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n    const add = () => {\n        updateFavoriteToken([...favArray, {...data}]);\n        return;\n    }\n    \n//////////////////////////////////////////////////////////////////////////////////////////////////\n    const remove = () => {\n        updateFavoriteToken(favArray.filter(x => x.id !== data.id));\n    }\n/////////////////////////////////////////////////////////////////////////////////////////////////\n    if (isFavorite) {\n        return <button className=\"listBtn\" onClick={remove}><i style={{color: \"#ffd900\", fontSize:'22px', WebkitTextStroke: \"0.7px #4d4d4d\"}} className=\"material-icons\">star</i></button>;\n    }\n\n    return <button className=\"listBtn\" onClick={add}><i className=\"material-icons hoverStar\">star</i></button>;\n    \n}\n\nexport default AddFavorites;","import React, {useState, useRef, useEffect} from 'react';\nimport { Dropbox } from 'dropbox';\nimport { token$ } from './store.js';\nimport {Link}from \"react-router-dom\";\nimport { HashRouter as Router} from \"react-router-dom\";\nimport ModalBreadcrumbs from './modalbreadcrumb.js'\nimport '../Css/movefiles.css';\n\n\nconst CopyFiles = (props) => {\n    const moveModal = useRef(null);\n    const moveMessRef = useRef(null);\n    const [moveError, updateMoveError] = useState(\"\")\n    const [movePath, updateMovePath] = useState(\"\")\n    const [startPath, updateStartPath] = useState(\"\")\n    const [fileTransfer, updateFileTransfer] = useState(\"\")\n    const [showModal, updateShowModal] = useState(false)\n    const [data, updateData] = useState([]);\n    let moveFolders = '';\n    const path = window.decodeURIComponent(window.location.hash.slice(1));\n\n  \n    \n    /*========= API Request for List folders =========*/\n    useEffect((e) => {\n     // console.log('Render copyfiles')\n      if (!showModal) {\n        moveModal.current.style.display = 'none';\n        \n      } else {\n        document.body.style.overflowY = \"hidden\"\n        moveModal.current.style.display = 'block';\n        \n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n      };\n      const dbx = new Dropbox(\n        option,\n      );\n  \n      if (path === '/'){\n        dbx.filesListFolder({\n          path: '',\n        })\n        .then(response => {\n          updateData(response.entries)          \n        })\n        .catch(error => {\n          console.log(error);\n        }); \n       } else {\n        dbx.filesListFolder({\n          path: path,\n        })\n        .then(response => {\n          updateData(response.entries)\n        })\n        .catch(error => {\n          console.log(error);\n        }); \n      }\n    }\n    }, [showModal, path]);\n\n  useEffect(() => {\n    if (!showModal) {\n      window.location.hash = \"/\";\n    }\n  }, [showModal]);\n\n  const startModal = (path) => {\n   updateShowModal(true)\n   updateStartPath(path)\n   props.pollUpdateMode(true)\n  }\n\n  const setPath = (e) => {\n    updateMovePath(e.target.dataset.id)\n\n  }\n\n      /*========= API Request for move files =========*/\n\n  const moveToFolder = () => {\n      if (startPath === movePath) {\n        updateMoveError('You cant move files in same directory')\n      } else {\n        let index = startPath.lastIndexOf(\"/\")\n        let newName = startPath.substring(index)\n        updateMoveError('')\n    \n        const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesCopyV2({\n            from_path: startPath,\n            to_path: movePath + newName,\n            autorename: false\n          })\n          .then(response => {\n              //console.log(response.entries)\n            updateFileTransfer('File Moved')\n            dbx.filesListFolder({\n              path: movePath,\n            })\n            .then(response => {\n                closeModal() \n\n\n\n\n\n\n            })\n            .catch(error => {\n              console.log(error);\n            }); \n          })\n          .catch(error => {\n            console.log(error);\n          });\n      }\n    }\n /*==================*/\n\n  const renderModalData = (data) => {\n    //console.log(startPath)\n    //console.log(data.path_lower)\n    if(data[\".tag\"] === 'folder'){ //FOLDER\n      return( //FOLDERS\n        <tr key={data.id} className=\"modal-movefiles-tr\" data-name={data.name} data-folder={data.path_display} data-tag={data[\".tag\"]}>\n          <td key={data.id} className=\"modal-movefiles-td-icon\">\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td className=\"modal-movefiles-td-link\">\n          <Link to={ data.path_lower } className=\"modal-movefiles-link\" onClick={ setPath } data-id={ data.path_display }>{ data.name }</Link>\n          </td>\n        </tr>\n          )\n        } \n  }\n\n  let mapping = data.map(renderModalData)\n\n  const closeModal = () => {\n      updateShowModal(false)\n      props.pollUpdateMode(false)\n      updateMovePath('')\n      updateStartPath('')\n      document.body.style.overflowY = \"auto\"\n  }\n\n    moveFolders = \n    <Router>\n      <div className=\"moveBack\" ref={ moveModal }>\n    <div className=\"moveModal\" >\n    <h3 className=\"movefiles-h3\">Copy files</h3>\n    <ModalBreadcrumbs />\n    <p className=\"movefiles-p\">Copy <span className=\"movefiles-file\">{ props.name }</span> ... to ... <span className=\"movefiles-file\">{ movePath.slice(1)}</span></p>\n    <p>{ fileTransfer }</p>\n    <table>\n      <tbody>\n      { mapping }\n      </tbody>\n    </table>\n    { moveError }\n    <button className=\"modal-movefiles-button\" onClick={moveToFolder}>Move</button>\n    <i className=\"material-icons upload-close\" onClick={closeModal}>close</i>\n    <p ref={moveMessRef} style={{display: \"none\"}}>{props.name} moved...</p>\n    </div>\n    </div>\n    </Router>\n  \n    \n    return (\n        <>\n        { moveFolders }\n        <button className=\"listBtn\" onClick={ () => startModal(props.path) }> <i className=\"material-icons copyfiles-icon\">file_copy</i></button>\n        </>\n\n    )\n\n}\n\nexport default CopyFiles;","import React from 'react';\nimport {Link}from \"react-router-dom\";\nimport '../Css/listitems.css';\nimport {readableBytes} from './readablebytes'\nimport {lastEdited} from './lastedited'\nimport { downloadFile } from './dowload'\nimport { Helmet } from \"react-helmet\";\nimport Delete from './delete'\nimport RenameFile  from './renameFiles'\nimport ReNameFolder from './renameFolder.js';\nimport MoveFiles from './movefiles.js'\nimport AddFavorites from \"./addFavorites.js\";\nimport CopyFiles from './copyfiles.js'\n\n\n\n\n\nconst ListItems = (props) => {\n\n //===================RENDER LIST====================\n  \n  const clearSearchFn = () => {\n    props.clearSearchUpdate(true)\n  }\n\n\n\n  const arrIdx = [\".jpg\", \".jpeg\", \".png\", \".pdf\", \".mp3\", \".id3\", \".wav\", \".mp4\", \".mov\"] // Array med filer som vissar thumb...\n\n  const renderList = (data, index) => {\n   \n\n\n    if(data.noSearchResult){\n      return(\n        \n          <tr key={data.id}>\n            <td>No search matches</td>\n          </tr>\n        \n      )\n    }\n   \n\n   const thumbs = props.thumbnailsLoaded ? props.thumbnails[index] : undefined;\n\n    if(data[\".tag\"] === 'file'){ //FILER\n     \n      let newThumbs = thumbs === undefined ? <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i> : <img src={\"data:image/jpeg;base64,\" + thumbs.thumbnail} alt=\"\"/>\n      \n      let idx = data.name.lastIndexOf('.');\n      let newIdx = data.name.substring(idx);\n      /*------------- Audio idx files -----------------------------------*/\n      let audioIdx = [\".wav\", \".mp3\", \".id3\"]\n      if (audioIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons filesFolders\">audiotrack</i>\n      }\n      /* --------------------------------------------------------------- */\n\n       /*------------- Vidio idx files -----------------------------------*/\n      let videoIdx = [\".mov\", \".mp4\"]\n      if (videoIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons filesFolders\">local_movies</i>\n      }\n      /* --------------------------------------------------------------- */\n\n      if (!arrIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i>\n      }\n      \n\n        return( //FILES\n        \n          <tr\n              key={data.id} \n              className=\"listFiles\" \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]}\n              >\n            <td \n              title={\"Download: \" + data.name} \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]} onClick={downloadFile}\n              style={{width: \"40px\"}}>\n                {newThumbs}\n            </td>\n            <td\n              title={\"Download: \" + data.name} \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]} onClick={downloadFile}\n            >\n            {data.name}\n            </td>\n            <td style={{width: \"80px\"}}>\n              {readableBytes(data.size)}\n            </td>\n            <td style={{width: \"200px\"}}>\n              {lastEdited(data.server_modified)}\n            </td>\n            \n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <RenameFile dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <MoveFiles dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} name={data.name} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"45px\", textAlign: 'center'}}>\n              <CopyFiles data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"45px\", textAlign: 'center'}}>\n              <AddFavorites data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower}></AddFavorites>\n            </td>\n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <Delete tag={data[\".tag\"]} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} path={data.path_lower} folder={props.folder} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            \n          </tr>\n         \n        ) \n      }\n \nif(data[\".tag\"] === 'folder'){ //FOLDER\n\nreturn( //FOLDERS\n  <tr key={data.id} className=\"listFiles\" data-name={data.name} data-folder={data.path_lower} data-tag={data[\".tag\"]}>\n    <td style={{width: \"40px\"}}>\n    <i className=\"material-icons filesFolders\">folder</i>\n    </td>\n    <td>\n      <Link className=\"listFolderLink\" to={\"/home\" + data.path_lower} onClick={clearSearchFn}>{data.name} </Link>\n    </td>\n    <td style={{width: \"80px\"}}>\n      ...\n    </td>\n    <td style={{width: \"200px\"}}>\n      ...\n    </td>\n    \n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <ReNameFolder dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <MoveFiles dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} name={data.name} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n    <CopyFiles data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate}\n    pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <AddFavorites data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower}></AddFavorites>\n    </td>\n    \n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <Delete tag={data[\".tag\"]} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} path={data.path_lower} folder={props.folder} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n  </tr>\n    )\n  } \n}\n\n    \n  const listData = props.renderData.map(renderList)\n  \n      \n     \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX</title>\n    </Helmet>\n      {listData}\n    </>\n  )\n}\n\nexport default ListItems;","export function readableBytes (bytes) {\n  if (bytes === 0){\n    bytes = 1\n  }\n  const index = Math.floor(Math.log(bytes) / Math.log(1024)),\n  sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  return (bytes / Math.pow(1024, index)).toFixed(2) * 1 + ' ' + sizes[index];\n\n}","import moment from 'moment';\nimport React from 'react';\n\nexport function lastEdited (date) {\n   \n  const year = date.substring(0, 4);\n  let month = date.substring(5, 7)\n  let day = date.substring(8, 10)\n  //const hour = date.substring(11, 13)\n  //const minute = date.substring(14, 16)\n  //const second = date.substring(17, 19)\n\n\n  const months = [\n    \"January\", \"February\", \"March\",\n    \"April\", \"May\", \"June\", \"July\",\n    \"August\", \"September\", \"October\",\n    \"November\", \"December\"\n  ];\n  \n  month = month.replace(/^0+/, '');\n  day = day.replace(/^0+/, '')\n  let monthInText = months[month-1];\n  \n\n  return <label>{moment(date).fromNow() + ', ' + day + ' ' + monthInText + ' ' + year}</label>\n}","import React, {useState, useRef } from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\nimport { getThumbnails } from './getthumbnails'\nimport '../Css/createfolder.css';\n\n//import { BrowserRouter as Router, Route, Link, Redirect}from \"react-router-dom\";\n\n\nconst CreateFolder = (props) => {\n \n\n  const [input, updateInput] = useState('')\n  const inputRef = useRef(null);\n  let newFolder = props.folder\n  newFolder = newFolder.substring(5);\n\n  let uploadFolder = '';\n  const uploadModal = useRef(null);\n\n\n  const changeInput = (e) => {\n    updateInput(e.target.value)\n  }\n\n  const createFolder = () => {\n\n    const option = {\n      fetch: fetch,\n      accessToken: token$.value,\n      \n    };\n    const dbx = new Dropbox(\n      option,\n    );\n    dbx.filesCreateFolderV2({\n      path: newFolder + '/'+ input,\n      autorename: true\n    })\n    .then(response => { \n       \n       setTimeout(() => {\n         closeModal();\n       }, 2000);\n\n       dbx.filesListFolder({\n        path: newFolder,\n      \n      })\n      .then(response => {\n\n        props.thumbnailUpdate([]);\n        props.oldDataUpdate(response.entries)\n        props.dataUpdate(response.entries)\n        \n        getThumbnails(dbx, response.entries)\n        .then(entries => {   \n          \n          props.thumbnailUpdate(entries)\n          })\n          .catch(function(error) {\n            console.log(error);\n           });\n      })\n      .catch(function(error) {\n        console.log(error);\n       });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n       });\n\n\n  }\n\n\n  const closeModal = () => {\n    uploadModal.current.style.display = 'none';\n    props.pollUpdateMode(false)\n  }\n\n  const startModal = () => {\n    uploadModal.current.style.display = 'block';\n    inputRef.current.value = '';\n    props.pollUpdateMode(true)\n  }\n\n  uploadFolder = \n    <div className=\"upload-modal-folder\" ref={ uploadModal }>\n      <label htmlFor=\"folder\" className=\"upload-folder-label\">Type in new folder name</label>\n      <input className=\"upload-folder-input\" type=\"text\" id=\"folder\" onChange={changeInput} ref={inputRef}></input>\n      <i className=\"material-icons upload-close\" onClick={ closeModal }>close</i>\n      <br /><button className=\"upload-folder-modal-button\" onClick={createFolder}>Create new Folder</button>\n    </div>\n\n\n  return(\n    <>\n      <button className=\"upload-folder-button\" onClick={ startModal }><i className=\"material-icons-outlined folder-icon-create-folder\"> create_new_folder</i>Create new folder</button>\n      { uploadFolder }\n    </>\n  )\n}\n\n\nexport default CreateFolder \n\n/*\n<label>Type in new folder name</label>\n      <input type=\"text\" onChange={changeInput}></input><br></br>\n      <button onClick={createFolder}>Create new Folder</button>\n      */","import React, {useRef}from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\n\r\n\r\n\r\nconst Search = (props) => {\r\n  const inputRef = useRef(null);\r\n \r\n  \r\n  if(props.clearSearch === true){\r\n    inputRef.current.value = '';\r\n    props.pollUpdateMode(false)\r\n\r\n  }\r\n  \r\n let newFolder = props.folder.substring(5);\r\n\r\n const makeSerch = (e) => {\r\n  \r\n  \r\n  \r\n    const option = {\r\n        fetch: fetch,\r\n        accessToken: token$.value\r\n      };\r\n      const dbx = new Dropbox(\r\n        option,\r\n      );      \r\n\r\n      \r\n    if(e.target.value.length < 1){  \r\n      props.pollUpdateMode(false)\r\n      \r\n\r\n      dbx.filesListFolder({\r\n        path: props.folder.substring(5),\r\n      \r\n            }).then(response =>{\r\n              props.thumbnailUpdate([])\r\n              props.dataUpdate(response.entries)\r\n              props.oldDataUpdate(response.entries)\r\n  \r\n              getThumbnails(dbx, response.entries)\r\n\r\n                    .then(entries => {   \r\n\r\n                      props.thumbnailUpdate(entries)\r\n                      })\r\n                      .catch(function(error) {\r\n                        console.log(error);\r\n                      });\r\n              \r\n            })\r\n            .catch(function(error) {\r\n              console.log(error);\r\n            });\r\n\r\n    }\r\n    if(e.target.value.length > 0){\r\n      \r\n      props.pollUpdateMode(true)\r\n      \r\n      dbx.filesSearch({\r\n       \r\n        path: newFolder,\r\n        query: e.target.value,\r\n      })\r\n\r\n      .then(response => {\r\n        \r\n        let noResult = [{\".tag\": 'file', id: 1, noSearchResult: 'noResult'}]\r\n        \r\n        if(response.matches.length === 0){\r\n          props.dataUpdate(noResult)\r\n         \r\n\r\n        }\r\n        else{\r\n          props.clearSearchUpdate(false)\r\n          props.thumbnailUpdate([])\r\n         \r\n         \r\n          let newArr = []\r\n          for (let i of response.matches){\r\n            \r\n            newArr.push(i.metadata) \r\n          }\r\n          props.dataUpdate(newArr) \r\n\r\n        }\r\n       \r\n\r\n      })\r\n    }\r\n    \r\n    \r\n    \r\n  }\r\n    \r\nreturn (\r\n  \r\n    <>\r\n    <i className=\"material-icons header-serach-icon\">search</i>\r\n    <input className=\"header-search\" placeholder=\"Search...\" type=\"text\" onChange={makeSerch} ref={inputRef} />\r\n   \r\n    </>\r\n    )\r\n}\r\n\r\nexport default Search;\r\n\r\n","import React from 'react';\nimport { NavLink} from \"react-router-dom\";\nimport withBreadcrumbs from 'react-router-breadcrumbs-hoc';\nimport '../Css/breadcrumbs.css';\n\n\n\nconst Breadcrumbs = withBreadcrumbs ([{ path: '/', breadcrumb: null }]) (({ breadcrumbs})=> {\n  //console.log(breadcrumbs);\n  \n\n  return (\n  \n    <>\n    <i className=\"material-icons-outlined breadcrumb-home\" >home</i>\n    <React.Fragment>\n      {breadcrumbs.map(({\n        match,\n        breadcrumb,\n        location\n        \n      }) => (\n       \n        <span key={match.url}>\n          <NavLink to={match.url} className=\"breadcrumb-link\" onClick={() => console.log(breadcrumbs)}> {breadcrumb} \n          </NavLink><i className=\"material-icons breadcrumb\">arrow_right</i>\n        </span>\n      ))}\n    </React.Fragment>\n    <br />\n    </>\n  );\n});\n\n\n\nexport default Breadcrumbs;\n","import React, {useState,useRef} from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\nimport '../Css/upload.css';\nimport { getThumbnails } from './getthumbnails'\n\n\n\nconst UploadFile = (props) => {\n  const [uploadMessage, updateMessage] = useState(null)\n  let uploadFile = '';\n\n  let newFolder = props.folder\n  newFolder = newFolder.substring(5);\n  \n  const inputRef = useRef(null);\n  const uploadModal = useRef(null);\n  \n  const upload = (e) => {\n    e.preventDefault();\n    \n    const fileNodeList = inputRef.current.files;\n    \n    const filesiZeLimit = 150 * 1024 * 1024;\n\n\n    const fileList = Array.from(fileNodeList)\n  \n    const option = {\n      fetch: fetch,\n      accessToken: token$.value,\n      \n    };\n    const dbx = new Dropbox(\n      option,\n    );\n    \n    \n    for(let i = 0; i < fileList.length; i++){\n      updateMessage(<><div>Upload in progress</div><div className=\"uploadLds-ring\"><div></div><div></div><div></div><div></div></div></>)\n      if(fileList[i].size < filesiZeLimit){\n        console.log(fileList[i])\n        dbx.filesUpload({  \n          \n          contents: fileList[i],\n          path: newFolder + '/' + fileList[i].name\n          })\n\n              .then(function(response) {\n                updateMessage('Upload done')\n                setTimeout(() => {\n                  closeModal();\n                  updateMessage(null)\n                }, 3000);\n                \n               // props.upload(response)\n                console.log(props)\n                                \n                console.log(response);\n\n                dbx.filesListFolder({\n                  path: newFolder,\n                \n                })\n                .then(response => {\n                  console.log(response)\n          \n                  props.thumbnailUpdate([]);\n                  props.dataUpdate(response.entries)\n                  props.oldDataUpdate(response.entries)\n          \n                  getThumbnails(dbx, response.entries)\n                  .then(entries => {   \n                    \n                    props.thumbnailUpdate(entries)\n                    })\n                    .catch(function(error) {\n                      console.log(error);\n                     });\n                })\n                .catch(function(error) {\n                  console.log(error);\n                 });\n\n\n\n\n              })\n              .catch(function(error) {\n                console.error(error);\n              });\n\n\n      }\n      else{\n        const maxBlob = 8 * 1000 * 1000; // 8Mb - Dropbox JavaScript API suggested max file / chunk size\n        var workItems = [];     \n      \n        var offset = 0;\n        while (offset < fileList[i].size) {\n          var chunkSize = Math.min(maxBlob, fileList[i].size - offset);\n          workItems.push(fileList[i].slice(offset, offset + chunkSize));\n          offset += chunkSize;\n        } \n          \n        const task = workItems.reduce((acc, blob, idx, items) => {\n          if (idx === 0) {\n            console.log(idx)\n            // Starting multipart upload of file\n            return acc.then(function() {\n              console.log('start')\n              updateMessage(<><div>Upload in progress</div><div className=\"uploadLds-ring\"><div></div><div></div><div></div><div></div></div></>)\n              \n              return dbx.filesUploadSessionStart({ close: false, contents: blob})\n                        .then(response => response.session_id)\n            });          \n          } else if (idx < items.length-1) { \n            console.log('append') \n            // Append part to the upload session\n            return acc.then(function(sessionId) {\n             var cursor = { session_id: sessionId, offset: idx * maxBlob };\n             return dbx.filesUploadSessionAppendV2({ cursor: cursor, close: false, contents: blob }).then(() => sessionId); \n            });\n          } else {\n            // Last chunk of data, close session\n            return acc.then(function(sessionId) {\n              var cursor = { session_id: sessionId, offset: fileList[i].size - blob.size };\n              var commit = { path: newFolder + '/' + fileList[i].name, mode: 'add', autorename: true, mute: false };              \n              return dbx.filesUploadSessionFinish({ cursor: cursor, commit: commit, contents: blob });           \n            });\n          }          \n        }, Promise.resolve());\n        \n        task.then(function(result) {\n          \n          //props.upload(result)\n          updateMessage('Upload done')\n          setTimeout(() => {\n            closeModal();\n            updateMessage(null)\n          }, 3000);\n          console.log(result)\n          dbx.filesListFolder({\n            path: newFolder,\n          \n          })\n          .then(response => {\n            console.log(response)\n    \n            props.thumbnailUpdate([]);\n            props.dataUpdate(response.entries)\n            props.oldDataUpdate(response.entries)\n    \n            getThumbnails(dbx, response.entries)\n            .then(entries => {   \n              \n              props.thumbnailUpdate(entries)\n              })\n              .catch(function(error) {\n                console.log(error);\n               });\n          })\n          .catch(function(error) {\n            console.log(error);\n           });\n        })\n        .catch(function(error) {\n          console.error(error);\n        });\n        \n      }\n        \n\n    } \n    \n   inputRef.current.value = '';\n  }\n    const closeModal = () => {\n      uploadModal.current.style.display = 'none';\n      props.pollUpdateMode(false)\n    }\n\n    const startModal = () => {\n      uploadModal.current.style.display = 'block';\n      props.pollUpdateMode(true)\n    }\n\n  \n\n      uploadFile = <div className=\"upload-modal-files\" ref={ uploadModal }>\n      <input type=\"file\" className=\"upload-input\" multiple ref={inputRef}></input>\n      <i className=\"material-icons upload-close\" onClick={ closeModal }>close</i>\n      <br /><input type=\"submit\" className=\"upload-submit\" onClick={upload} value=\"Upload files\"></input>\n      <label className=\"upload-label\">{uploadMessage}</label></div>\n\n\n\n  return(\n    <>\n    <button className=\"upload-file-button\" onClick={ startModal }>Upload files</button>\n    { uploadFile }\n    </>\n  )\n  \n}\n\nexport default UploadFile;","import React, {useState, useEffect, useRef} from 'react';\r\nimport ReactCountryFlag from 'react-country-flag';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$} from './store.js';\r\nimport '../Css/userAccount.css';\r\n\r\nconst UserAccount = () => {\r\nconst photoRef = useRef(null);  \r\nconst [name, updateName] = useState(\"Name Lastname\");\r\nconst [mail, updateMail] = useState(\"name@domain.com\");\r\nconst [photoUrl, updatePhotUrl] = useState(null);\r\nconst [country, updateCountry] = useState(\"us\");\r\n\r\n\r\n  useEffect(() => {\r\n  \r\n    const option = {\r\n      fetch: fetch,\r\n      accessToken: token$.value\r\n    };\r\n\r\n    const dbx = new Dropbox(\r\n      option,\r\n    );\r\n\r\n    dbx.usersGetCurrentAccount(\r\n    )\r\n    .then(response => {\r\n      updateName(response.name.display_name)\r\n      updateMail(response.email)\r\n      updatePhotUrl(response.profile_photo_url)\r\n      updateCountry(response.country)\r\n      \r\n    })\r\n    .catch(error => {\r\n      console.log(error);\r\n    });\r\n\r\n   },[])\r\n\r\nconst onMouseOverPhoto = (e) => {\r\n  photoRef.current.style.display = \"block\";\r\n}\r\nconst onMouseOutPhoto = (e) => {\r\n  photoRef.current.style.display = \"none\";\r\n}\r\n\r\n  let x = mail.lastIndexOf(\"@\") + 1;\r\n  let y = mail.substring(x);\r\n  let url = \"https://www.\" + y;\r\n  let countryFlag = country.toLowerCase();\r\n  let checkPhoto;\r\n  if (!photoUrl){\r\n    checkPhoto = \r\n    <>\r\n    <img style={{border: \"1px solid black\"}} alt=\"userPhoto\" onMouseOver={onMouseOverPhoto} onMouseOut={onMouseOutPhoto} className=\"userPhoto\" src={ require(\"../Img/profile-img-none.png\")}/>\r\n    <img style={{border: \"1px solid black\"}} alt=\"userPhotoBig\" ref={photoRef} className=\"userPhotoBig\" src={ require(\"../Img/profile-img-none.png\")}/>\r\n    </>\r\n  }\r\n  else{\r\n    checkPhoto = \r\n    <>\r\n    <img style={{border: \"1px solid black\"}} alt=\"userPhoto\" onMouseOver={onMouseOverPhoto} onMouseOut={onMouseOutPhoto} className=\"userPhoto\" src={photoUrl}/>\r\n    <img style={{border: \"1px solid black\"}} alt=\"userPhotoBig\" ref={photoRef} className=\"userPhotoBig\" src={photoUrl}/>\r\n    </>\r\n  }\r\n\r\n  \r\n\r\nreturn(\r\n  <div className=\"userMain\">\r\n  <div className=\"userFlag\"><ReactCountryFlag code={countryFlag} svg /></div>\r\n  <span className=\"userName\"><a title=\"Open your mail\" className=\"userMailAtag\" href={url} target=\"_blank\" without=\"true\" rel=\"noopener noreferrer\">{name}</a></span>  \r\n  {checkPhoto}\r\n  </div>\r\n)\r\n\r\n}\r\nexport default UserAccount;","import React from 'react';\r\nimport { updateToken, updateFavoriteToken } from './store.js'\r\nimport {token$} from './store.js';\r\n\r\nconst LogOut = (props) => {\r\n    const logOut = () =>{\r\n        updateToken(null);\r\n        props.updateTokenState(token$.value);\r\n        updateFavoriteToken(null);\r\n    }\r\n\r\nreturn(\r\n    <>\r\n    <button className=\"headerLogOutBtn\" onClick={logOut}>LogOut</button>\r\n    </>\r\n)\r\n  }\r\n  export default LogOut;","import React, {useState, useEffect} from 'react';\nimport {favorites$, updateFavoriteToken} from './store.js';\nimport {Link} from \"react-router-dom\";\nimport {downloadFile} from \"./dowload\"\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\n\n/*\n\nGOAL: \nWhen the user clicks on an Add_to_Favorites-button, the chosen file should be copied to a new_state,\nwith all the needed data.\n\nThe new_state should be used to render a favorite_list, which should be displayed in a side_menu on the right of the main_content.\n\n- When the user deletes or renames the file, the file should also be deleted, or renamed, in the favorite_list.\nOR ELSE: The demand is that the error caused by the file being used in any way from the favorite_list, after having been deleted, should be handled.\nA direct update of the favorite_state is not required, but obviously better.\n\n- When a user logs out, the local storage should be cleaned out, so that no favorites exists once the user logs back in. \n\n=== Ha state i rooten.\n=== Använd behavioursubject för att uppdatera favoritestatet.\n=== Kör en toggle onClick - Om id inte finns i listan, lägg till objektet (objekt ska in i state, inte id), om id finns i listan, ta bort.\n*/\n\nconst FavoriteList = (props) => {\n  \n/////////////////////////////////////////////////////////////////////////////////////////////////\n  const [fav, updateFav] = useState([]);\n  \n/////////////////////////////////////////////////////////////////////////////////////////////////\n  useEffect(() => {\n    const subscription = favorites$.subscribe(updateFav);\n    return () => subscription.unsubscribe();\n  }, []);\n/////////////////////////////////////////////////////////////////////////////////////////////////\n  let sortData = fav.sort((a, b) => (a[\".tag\"] > b[\".tag\"]) ? 1 : -1).reverse();\n/////////////////////////////////////////////////////////////////////////////////////////////////\nuseEffect(() => {\n\n\n  const option = {\n    fetch: fetch,\n    accessToken: token$.value\n  };\n  \n  const dbx = new Dropbox(\n    option,\n  );\n\n  setInterval(() => {\n    dbx.filesListFolder({\n      path: \"\",\n      recursive: true\n    \n    })\n    .then(response => {\n      \n      \n      if (favorites$.value === null){\n        updateFavoriteToken([])\n      }\n      else{\n        let fav = [...favorites$.value]\n      \n      let chekId = response.entries.map(x => x.id)\n      let checkIdFav = fav.map(x => x.id)\n     \n\n      let z = chekId.filter(function(val) {\n        return checkIdFav.indexOf(val) !== -1;\n        \n      });\n      let newFavArr = []\n      for (let i = 0; i < z.length; i++){\n        let newFav = fav.find( data => data.id === z[i] )\n        newFavArr.push(newFav)\n      }\n     // console.log(\"Poll Fav\")\n      updateFavoriteToken(newFavArr)\n    }\n            })\n  }, 5000);\n\n}, []);\n\n\n    let data = sortData;\n    const renderFavorites = (data) => {\n       \n      const check = (x) => {\n          if (x.id === data.id && x.name !== data.name){\n            data = x\n          }\n        }\n      props.data.map(check)\n      \n\n        /////IF FILES STARTS////\n        if(data[\".tag\"] === 'file'){ \n              return( //FILES\n                <tr\n                    key={data.id} \n                    data-name={data.name} \n                    data-folder={data.path_lower} \n                    data-tag={data[\".tag\"]}\n                    style={{background: \"white\", zIndex: \"0\"}}\n                    className=\"listFiles\"\n                    >\n                  <td \n                    title={\"Download: \" + data.name} \n                    data-name={data.name} \n                    data-folder={data.path_lower}\n                    data-tag={data[\".tag\"]} onClick={downloadFile}\n                    style={{cursor: \"pointer\"}}>\n                    <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i>\n                  </td>\n                  <td\n                    title={\"Download: \" + data.name} \n                    data-name={data.name} \n                    data-folder={data.path_lower} \n                    data-tag={data[\".tag\"]} onClick={downloadFile}\n                    style={{cursor: \"pointer\"}}\n                  >\n                  {data.name}\n                  </td>\n                </tr>\n              )\n        }\n        /////IF FILES ENDS////\n\n\n        const renameBrackets = (rename, newUrl) =>{\n          const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          \n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesMoveV2({\n            from_path: rename,\n            to_path: newUrl,\n            autorename: true\n          })\n          .then(response => {\n            dbx.filesListFolder({\n              path: props.folder.substring(5),\n            })\n            .then(response => {\n              props.dataUpdate(response.entries)\n            })\n            \n          })\n          .catch(error => {\n            console.log(error);\n          });\n        \n        }\n\n      /////IF FOLDER STARTS////\n      if(data[\".tag\"] === 'folder'){ //FOLDER\n\n\n        if (data.name.includes(\"(\")){\n\n          let brak = data.name.replace(/[()]/g,'')\n          let newName = data.path_lower.substring(0, data.path_lower.lastIndexOf(\"/\")) + \"/\" + brak;\n          \n          renameBrackets(data.path_lower, newName)\n          data.name = brak\n        }\n\n      return( //FOLDERS\n        \n        <tr style={{background: \"white\"}} key={data.id} className=\"listFiles\" data-name={data.name} data-folder={data.path_lower} data-tag={data[\".tag\"]}>\n          <td>\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td>\n            <Link className=\"listFolderLink\" to={\"/home\" + data.path_lower}>{data.name}</Link>\n          </td>\n        </tr>\n          )\n        }\n        /////IF FOLDER ENDS//// \n    }\n\n    let renderingFavorites = data.map(renderFavorites);\n    \n    return (\n        <div className=\"favorite_list\" style={{position: \"relative\", top: \"56px\", left: \"8px\"}} >\n          <span className=\"favoriteTitle\" style={{fontSize: \"14px\"}}><i style={{color: \"#ffd900\", WebkitTextStroke: \"1px #4d4d4d\", fontSize: \"12px\"}} className=\"material-icons\">star</i> Favorites:</span>\n          <table>\n            <tbody>\n              {renderingFavorites}\n            </tbody>\n          </table>\n        </div>\n    )\n}\n\nexport default FavoriteList;","import React, {useState, useEffect, useRef} from 'react';\nimport { Dropbox } from 'dropbox';\nimport { getThumbnails } from './getthumbnails'\nimport { Redirect } from \"react-router-dom\";\nimport {token$} from './store.js';\nimport ListItems from './listitems';\nimport CreateFolder from './createfolder';\nimport Search from './search';\nimport Breadcrumbs from './breadcrumbs';\nimport UploadFile from './uploadfile';\nimport UserAccount from './userAccount';\nimport { Helmet } from \"react-helmet\";\nimport LogOut from './logout'\nimport FavoriteList from \"./favoriteList.js\"\nimport {favorites$} from './store'\nimport {updateFavoriteToken} from './store'\nimport '../Css/home.css';\n\n\n\nconst Home = (props) => {\n  const [token, updateTokenState] = useState(token$.value)\n  const [data, updateData] = useState([]);\n  const [thumbnails, updateThumbnails] = useState([])\n  const [thumbnailsLoaded, updateThumbnailsLoaded] = useState(false);\n  const [favorites, updateFavorites] = useState([]);\n  const [oldData, updateOldData] = useState([])\n  const [pollMode, updatePollMode] = useState(false)\n  const [clearSearch, updateClearSearch] = useState(false)\n\n\n  const dataRef = useRef([]);\n\n  useEffect(() => {\n    dataRef.current = data;\n  }, [data]);\n\n  useEffect(() => {\n    const subscription = favorites$.subscribe(updateFavorites);\n    return () => subscription.unsubscribe();\n  }, []);\n\n  useEffect(() => {\n\n    if (thumbnails.length === data.length) {\n      const isLoaded = thumbnails.every((x, idx) => {\n        return x[\".tag\"] === \"failure\" || x.metadata.id === data[idx].id;\n      });\n\n      updateThumbnailsLoaded(isLoaded);      \n    } else {\n      updateThumbnailsLoaded(false);\n    }\n\n  }, [data, thumbnails]);\n\n\n    useEffect(() => {\n\n     \n      \n       if(pollMode){\n        return;\n      }\n        \n      const poll = setInterval(() => {\n        //console.log('Useffect körs')\n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n        };\n        const dbx = new Dropbox(\n          option,\n        );\n\n        const dataTmp = dataRef.current;\n\n        \n        if(props.location.pathname === '/home'){\n          dbx.filesListFolder({\n            path: '',\n          \n          })\n          .then(response => {\n            if (dataRef.current !== dataTmp) {\n           \n              return;\n            }\n           \n           //updateOldData(data)\n            \n            let responseRev = response.entries.map(x => x.rev).filter(y => y !== undefined)\n            let oldrespRev = oldData.map(x => x.rev).filter(y => y !== undefined)\n            let responseName = response.entries.map(x => x.name).filter(y => y !== undefined)\n            let oldrespName = oldData.map(x => x.name).filter(y => y !== undefined)\n\n            const diffRev = responseRev.filter(el => !oldrespRev.includes(el));\n            const diffName = responseName.filter(el => !oldrespName.includes(el))\n\n            //Fullösning för att lösa fel i thumbnails när en mapp tas bort utifrån\n             if(response.entries.length < oldData.length){\n              \n              updateThumbnails([])\n              updateData(response.entries)\n            }\n            /* if(oldData.length < response.entries.length){\n              console.log('poll körs root')\n              updateData(response.entries)\n            } */\n           //console.log('Root mapp... Olddata ' + oldData.length)\n           // console.log('Root mapp... response.entries ' + response.entries.length)\n\n            if (response.entries.length !== oldData.length  || diffRev.length > 0 || diffName.length > 0){\n              updatePollMode(true)\n              console.log('poll körs root')\n              console.log('poll stoppas tillfälligt root')\n              \n                getThumbnails(dbx, response.entries)\n\n                .then(entries => {\n                 \n                  updateData(response.entries)\n                  updateOldData(response.entries)\n                  updateThumbnails(entries)\n                  \n                }) \n                .then(rep => {\n                  updatePollMode(false)\n                  console.log('Poll startar igen root')\n\n                })\n                .catch(function(error) {\n                  console.log(error);\n                 });\n              \n\n            }\n            else{\n              console.log('Poll har inte körts för root')\n              return;\n            }\n\n          })\n          \n          .catch(function(error) {\n            console.log(error);\n           });\n    \n        }\n        else{\n          \n          let newFolder = props.location.pathname;\n          newFolder = newFolder.substring(5)\n    \n          dbx.filesListFolder({\n            path: newFolder,\n          \n          })\n          .then(response => {\n            if (dataRef.current !== dataTmp) {\n           \n              return;\n            }\n\n            //updateOldData(response.entries)\n\n            let responseRev = response.entries.map(x => x.rev).filter(y => y !== undefined)\n            let oldrespRev = oldData.map(x => x.rev).filter(y => y !== undefined)\n            let responseName = response.entries.map(x => x.name).filter(y => y !== undefined)\n            let oldrespName = oldData.map(x => x.name).filter(y => y !== undefined)\n\n            const diffRev = responseRev.filter(el => !oldrespRev.includes(el));\n            const diffName = responseName.filter(el => !oldrespName.includes(el))\n\n\n            /* if(oldData.length < response.entries.length){\n              console.log('poll körs folder')\n             \n              updateData(response.entries)\n              \n            } */\n            if(response.entries.length < oldData.length){\n              \n              updateThumbnails([])\n              updateData(response.entries)\n              \n            }\n\n            //console.log('Folder mapp... Olddata ' + oldData.length)\n            //console.log('Folder mapp... Response.entries ' + response.entries.length)\n\n            if(response.entries.length !== oldData.length || diffRev.length > 0 || diffName.length > 0){\n              // testa stoppa pollning här tills alla filer är klara...\n              updatePollMode(true)\n              console.log('poll körs folder')\n              console.log('poll stoppas tillfälligt folder')\n\n              getThumbnails(dbx, response.entries)\n\n\n               .then(entries => {\n                updateData(response.entries)\n                updateOldData(response.entries)\n                updateThumbnails(entries)\n                \n              })\n              .then(rep => {\n                updatePollMode(false)\n                console.log('Poll startar igen folder')\n              })\n              \n              .catch(function(error) {\n                console.log(error);\n               });\n              }\n              else{\n                console.log('Poll har inte körts för folder')\n                return;\n              }\n\n          })\n        \n          .catch(function(error) {\n            console.log(error);\n           });\n        }\n      }, 5000);\n      \n      \n    \n    return () => clearInterval(poll);\n\n    }, [data, oldData, props.location.pathname, pollMode]) \n\n\n\n    \n  useEffect(() => {\n    updatePollMode(true)\n    console.log('render Home')\n    const option = {\n      fetch: fetch,\n      accessToken: token$.value\n    };\n    const dbx = new Dropbox(\n      option,\n    );\n    if(props.location.pathname === '/home'){\n      dbx.filesListFolder({\n        path: '',\n      \n      })\n      .then(response => {\n        console.log('bilder börjar hämtas')\n          updateThumbnails([]);\n          updateData(response.entries)\n          updateOldData(response.entries)\n\n        getThumbnails(dbx, response.entries)\n        \n        .then(entries => {  \n          if (response.entries !== dataRef.current) {\n            return;\n          }\n          \n          console.log('bilder klara')\n            updateThumbnails(entries)\n            \n          })\n          .catch(function(error) {\n            console.log(error);\n           });\n           \n\n      })\n      \n      .catch(function(error) {\n        console.log(error);\n       });\n\n     \n    }\n    else{\n      \n      let newFolder = props.location.pathname;\n      newFolder = newFolder.substring(5)\n\n      dbx.filesListFolder({\n        path: newFolder,\n      \n      })\n      .then(response => {\n        \n        \n        updateThumbnails([]);\n        updateData(response.entries)\n        updateOldData(response.entries)\n\n\n        console.log(response.entries.length)\n       console.log('bilder börjar hämtas')\n        getThumbnails(dbx, response.entries)\n        \n      \n          .then(entries => {   \n            console.log('bilder klara')\n            updateThumbnails(entries)\n         \n            })\n            \n            .catch(function(error) {\n              if(error.response.status === 409){\n                updateThumbnails([])\n              }\n             });\n\n        \n          \n        \n           \n      })\n      .catch(function(error) {\n        console.log(error);\n       });\n    }\n      clearSearchUpdate(false)\n      updatePollMode(false)\n  }, [props.location.pathname, clearSearch])\n\n\n  const dataUpdate = (data) => {\n    //updateOldData(data)\n    updateData(data)\n    \n  }\n\n  const thumbnailUpdate = (data) => {\n    updateThumbnails(data)\n  } \n\n  const oldDataUpdate = (data) => {\n    updateOldData(data)\n    \n  }\n\n  const favUpdate = (data) => {\n    updateFavorites(data);\n    updateFavoriteToken(data);\n  }\n\n  const pollUpdateMode = (bool) => {\n      updatePollMode(bool)\n  }\n  const upFavTok = (arr) => {\n    updateFavoriteToken(arr)\n  }\n\n  const clearSearchUpdate = (bool) => {\n    updateClearSearch(bool)\n\n\n    \n  }\n\n  if(token === null){\n    return <Redirect to=\"/\" />\n  }\n  \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX</title>\n    </Helmet>\n    <header className=\"mainHeader\">\n      <div className=\"header-logo-wrap\"><img id=\"header-logo\" src={ require('../Img/Logo_mybox.png') } alt=\"My Box logo\"/> </div>\n        <span className=\"headerContent\">\n          <Search pollUpdateMode={pollUpdateMode} searchData={data} folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} clearSearch={clearSearch} clearSearchUpdate={clearSearchUpdate} />\n          <span><UserAccount/></span>\n          <span><LogOut updateTokenState={updateTokenState}/></span>\n        </span>\n    </header>\n    <div className=\"mainWrapper\">\n      <aside className=\"leftSide\">\n        \n        <div className=\"left-link-wrap\"><UploadFile folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} pollUpdateMode={pollUpdateMode}></UploadFile><br></br><br></br>\n        <CreateFolder folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} pollUpdateMode={pollUpdateMode}></CreateFolder></div>\n      </aside>\n      <main className=\"mainMain\">\n      <label onClick={() => updateClearSearch(true)}>\n      <Breadcrumbs clearSearchUpdate={clearSearchUpdate}/><br /></label>\n        <table className=\"mainTable\">\n          <thead>\n            <tr className=\"home-thead-tr\">\n            <th colSpan=\"2\">\n              Name\n            </th>\n            <th>\n              File size\n            </th>\n            <th>\n              Last edited\n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Ren\n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Mov \n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Cop\n            </th>\n            <th style={{ textAlign: 'center' }}>\n              Fav\n            </th>\n            <th style={{ textAlign: 'center' }}>\n              Del\n            </th>\n            </tr>\n          </thead>\n          <tbody>\n            <ListItems favorites={favorites} favUpdate={favUpdate} thumbnailsLoaded={thumbnailsLoaded} folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} renderData={data} thumbnails={thumbnails} clearSearchUpdate={clearSearchUpdate} pollUpdateMode={pollUpdateMode}></ListItems>\n          </tbody>\n        </table>\n      </main>\n      <aside className=\"rightSide\">\n        <div className=\"aside\"></div>\n         <FavoriteList upFavTok={upFavTok} data={data} />\n      </aside>\n    </div>\n    \n    </>\n  )\n}\n\nexport default Home;\n\n\n\n","import React from 'react';\nimport Login from './Components/login';\nimport Auth from './Components/auth';\nimport Home from './Components/home';\nimport { BrowserRouter as Router, Route}from \"react-router-dom\";\n\n\n\n\nfunction App() {\n\n  return (\n    <Router>\n    <div className=\"App\">\n    \n    \n    </div>\n    \n    <Route exact path='/' component={Login} />\n    <Route path='/auth' component={Auth} />\n    <Route path='/home' component={Home} />\n\n   \n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}