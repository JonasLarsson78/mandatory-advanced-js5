(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},21:function(e,t,a){},22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQjQzMzMwQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQjQzMzMxQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REFCNDMzMkVCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFCNDMzMkZCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55zlruAAAI6ElEQVR42uydPU8bWRSG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"},31:function(e,t,a){e.exports=a(60)},36:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){e.exports=a.p+"static/media/Logo_mybox.91350eb7.png"},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(23),r=a.n(o),c=(a(36),a(2)),s=a(11),i=(a(44),function(){var e=new c.Dropbox({clientId:"bvtwa87o7e9bfk6",fetch:fetch});return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Helmet,null,l.a.createElement("title",null,"MyBOX Connect")),l.a.createElement("p",{className:"loginText-big"},"The World number 1 box solution"),l.a.createElement("p",{className:"loginText-small"},"Get control of your files in the cloud. Move, copy, upload and download files and have your personally favorites. Explore the App now!"),l.a.createElement("div",{className:"loginMain"},l.a.createElement("a",{className:"loginLink",href:e.getAuthenticationUrl("https://jonaslarsson78.github.io/mandatory-advanced-js5/auth")},l.a.createElement("button",{className:"loginBtn"},"Connect"))))}),u=a(1),d=a(62),m=new d.a(window.localStorage.getItem("token")||null);function p(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),m.next(e)}var f=new d.a(JSON.parse(window.localStorage.getItem("favorites")||"[]"));function h(e){e?window.localStorage.setItem("favorites",JSON.stringify(e)):window.localStorage.removeItem("favorites"),f.next(e)}var b=a(3),g=a(6),E=(a(45),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),c=Object(u.a)(r,2),i=c[0],d=c[1];return Object(n.useEffect)(function(){console.log("render Auth");var e=window.location.hash;"#error_description=The+user+chose+not+to+give+your+app+access+to+their+Dropbox+account.&error=access_denied"!==e?(p(e.match(/#(?:access_token)=([\S\s]*?)&/)[1]),o(!0)):d(!0)},[]),i?l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Helmet,null,l.a.createElement("title",null,"MyBOX Auth")),l.a.createElement("div",{className:"authMainLoader"},l.a.createElement("div",{className:"authProgress"},l.a.createElement("b",null,l.a.createElement("p",null,"No access.",l.a.createElement("br",null),"Reload page.")),l.a.createElement(b.c,{to:"/"},l.a.createElement("button",{className:"modalBtn"},"Reload"))))):a?l.a.createElement(g.a,{to:{pathname:"/home",state:{isLoggedIn:a}}}):l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Helmet,null,l.a.createElement("title",null,"MyBOX Auth")),l.a.createElement("div",{className:"authMainLoader"},l.a.createElement("div",{className:"authProgress"},l.a.createElement("div",{className:"lds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("p",null,"Loading page..."))))}),v=a(26),y=a.n(v),U=a(27),w=a.n(U),M=function(e,t){var a=y()(t,25).map(function(t){return e.filesGetThumbnailBatch({entries:t.map(function(e){return{path:e.id,format:{".tag":"jpeg"},size:{".tag":"w32h32"},mode:{".tag":"strict"}}})})});return Promise.all(a).then(function(e){return w()(e.map(function(e){return e.entries}))})};a(52);var N=a(28),O=a.n(N);var F=function(e,t){if("folder"===e.target.dataset.tag)return null;if("file"===e.target.dataset.tag){var a={fetch:fetch,accessToken:m.value};new c.Dropbox(a).filesGetTemporaryLink({path:e.target.dataset.folder}).then(function(e){var t=document.createElement("a");t.href=e.link,document.body.appendChild(t),t.click(),document.body.removeChild(t)}).catch(function(e){e.response.status>399&&e.response.status<500?t("Something went wrong, please try again"):e.response.status>499&&e.response.status<600?t("Something went wrong with the server, please try again"):t("Something went wrong, please try again")})}},j=a(5),k=function(e,t){400===e.response.status?t("Something went wrong with the call to the server. Please try again."):401===e.response.status?t("Something went wrong with your account. Log in again to get a new session."):403===e.response.status?t("Something went wrong with your account. Log in again to get a new session."):404===e.response.status?t("The server couldn\xb4t find your request. Page not found. Please try again."):409===e.response.status?t("Conflict with folders with the same name. Try another path!"):429===e.response.status?t("Too many request to the server."):e.response.status>499&&e.response.status<600?t("Something went wrong with the Dropboxserver. Please try again in a couple of minutes."):t("Something went wrong. Please try again.")},x=(a(54),function(e){var t,a=Object(n.useRef)(null),o=Object(n.useState)(""),r=Object(u.a)(o,2),s=r[0],i=r[1];return t=l.a.createElement("div",{style:{pointerEvents:"visible"},ref:a,className:"modalBack"},l.a.createElement("div",{style:{pointerEvents:"visible"},className:"modal"},l.a.createElement("div",{style:{pointerEvents:"visible"},className:"mainModal"},l.a.createElement("h2",{style:{color:"black"}},"Delete ! ! !"),l.a.createElement("p",{className:"modalText"},"Do you want to delete ",e.tag," ",e.name," ??"),l.a.createElement("button",{className:"modalBtn yes",onClick:function(){var t=e.folder.substring(5),n={fetch:fetch,accessToken:m.value},l=new c.Dropbox(n);l.filesDeleteV2({path:s}).then(function(a){for(var n=0;n<f.value.length;n++)if(f.value[n].id===a.metadata.id){var o=Object(j.a)(f.value);o.splice(n,1),h(o)}l.filesListFolder({path:t}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(l,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){k(t,e.updateErrorMessage),console.log("Delete FilesDelete2 55")})}).catch(function(t){console.log("Delete FilesDelete2 61"),k(t,e.updateErrorMessage)})}).catch(function(t){console.log("Delete FilesDelete2 66"),k(t,e.updateErrorMessage)}),a.current.style.visibility="hidden",a.current.style.zIndex="0",e.pollUpdateMode(!1),e.updateErrorMessage("")}},"YES"),l.a.createElement("button",{className:"modalBtn no",onClick:function(){a.current.style.visibility="hidden",document.body.style.overflowY="auto",a.current.style.zIndex="0",e.pollUpdateMode(!1),e.updateErrorMessage("")}},"NO")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0),i(t.target.dataset.path),a.current.style.visibility="visible",a.current.style.zIndex="500",document.body.style.overflowY="hidden"}}," ",l.a.createElement("i",{"data-path":e.path,className:"material-icons delete-icon"},"delete_outline")))}),S=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),r=Object(n.useState)(""),s=Object(u.a)(r,2),i=s[0],d=s[1],p=Object(n.useState)(""),b=Object(u.a)(p,2),g=b[0],E=b[1],v={fetch:fetch,accessToken:m.value},y=new c.Dropbox(v);return t=l.a.createElement("div",{className:"reNameBack",ref:a},l.a.createElement("div",{className:"listRenameInput"},l.a.createElement("h3",{className:"movefiles-h3"},"Rename files"),l.a.createElement("div",{className:"renamefile-input-wrapper"},l.a.createElement("span",{className:"listRenameClose",onClick:function(){a.current.style.display="none",document.body.style.overflowY="auto",e.pollUpdateMode(!1),e.updateErrorMessage("")}},l.a.createElement("i",{className:"material-icons"},"close")),l.a.createElement("input",{className:"listRenameInputText",style:{outline:"none"},ref:o,placeholder:"New filename...",type:"text",onChange:function(e){var t=e.target.value,a=g.lastIndexOf("."),n=g.substring(a),l=g.substring(0,g.lastIndexOf("/"));d(l+"/"+t+n)}}),l.a.createElement("button",{style:{outline:"none"},className:"renamefile-ok-button",onClick:function(t){y.filesMoveV2({from_path:g,to_path:i,autorename:!0}).then(function(t){for(var a=0;a<f.value.length;a++)if(f.value[a].id===t.metadata.id){var n=Object(j.a)(f.value);n[a]=t.metadata,h(n)}y.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(y,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFile Thumbnails rad 77")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFile FilesListFolder rad 84")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFile Filesmove rad 89")}),a.current.style.display="none",document.body.style.overflowY="auto",o.current.value="",e.pollUpdateMode(!1),e.updateErrorMessage("")}},"Ok")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0);var n=t.target.dataset.path;E(n),a.current.style.display="block",document.body.style.overflowY="hidden"}},l.a.createElement("i",{"data-path":e.path,className:"material-icons rename-icon"},"edit")))},C=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),r=Object(n.useRef)(null),s=Object(n.useRef)(null),i=Object(n.useState)(""),d=Object(u.a)(i,2),p=d[0],b=d[1],g=Object(n.useState)(""),E=Object(u.a)(g,2),v=E[0],y=E[1],U={fetch:fetch,accessToken:m.value},w=new c.Dropbox(U);return t=l.a.createElement("div",{ref:a,className:"reNameBack"},l.a.createElement("div",{className:"listRenameInput"},l.a.createElement("h3",{className:"movefiles-h3"},"Rename folder"),l.a.createElement("div",{className:"renamefile-input-wrapper"},l.a.createElement("span",{className:"listRenameClose",onClick:function(){a.current.style.display="none",document.body.style.overflowY="auto",e.pollUpdateMode(!1),e.updateErrorMessage("")}},l.a.createElement("i",{className:"material-icons"},"close")),l.a.createElement("input",{placeholder:"New foldername...",className:"listRenameInputText",style:{outline:"none"},ref:o,type:"text",onChange:function(e){var t=e.target.value;t.includes("(")&&t.includes(")")?(r.current.style.pointerEvents="none",r.current.style.background="gray",s.current.style.display="block"):(r.current.style.pointerEvents="visible",r.current.style.background="#029BB5",s.current.style.display="none");var a=v.split("/"),n=a.slice(0,a.length-1).join("/");b(n+"/"+t)}}),l.a.createElement("button",{ref:r,className:"renamefile-ok-button",style:{outline:"none"},onClick:function(t){w.filesMoveV2({from_path:v,to_path:p,autorename:!1}).then(function(t){for(var a=0;a<f.value.length;a++)if(f.value[a].id===t.metadata.id){var n=Object(j.a)(f.value);n[a]=t.metadata,h(n)}w.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(w,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFolder Thumbnails rad 90")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFolder Fileslistfolder rad 96")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("RenameFolder FilesMoveV2 rad 101")}),a.current.style.display="none",document.body.style.overflowY="auto",o.current.value="",e.pollUpdateMode(!1),e.updateErrorMessage("")}},"Ok"))),l.a.createElement("div",{ref:s,className:"renameFoldeEerrorMess"},"No folder name whit ( ) !")),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0);var n=t.target.dataset.path;y(n),a.current.style.display="block",document.body.style.overflowY="hidden"}},l.a.createElement("i",{"data-path":e.path,className:"material-icons rename-icon"},"edit")))},D=a(14),R=(a(20),Object(D.a)([{path:"/",breadcrumb:null}])(function(e){var t=e.breadcrumbs;return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons-outlined breadcrumb-home"},"home"),l.a.createElement(b.c,{className:"breadcrumb-link",to:"/"},"Home",l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right")),l.a.createElement(l.a.Fragment,null,t.map(function(e){var t=e.match,a=e.breadcrumb;return l.a.createElement("span",{key:t.url},l.a.createElement(b.d,{to:t.url,className:"breadcrumb-link"}," ",a),l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right"))})),l.a.createElement("br",null))})),I=(a(21),function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),r=Object(n.useState)(""),s=Object(u.a)(r,2),i=s[0],d=s[1],p=Object(n.useState)(""),g=Object(u.a)(p,2),E=g[0],v=g[1],y=Object(n.useState)(""),U=Object(u.a)(y,2),w=U[0],N=U[1],O=Object(n.useState)(""),F=Object(u.a)(O,2),x=F[0],S=F[1],C=Object(n.useState)(!1),D=Object(u.a)(C,2),I=D[0],B=D[1],A=Object(n.useState)([]),T=Object(u.a)(A,2),L=T[0],Y=T[1],W=window.decodeURIComponent(window.location.hash.slice(1));Object(n.useEffect)(function(){""!==i&&setTimeout(function(){d("")},5e3)},[i]),Object(n.useEffect)(function(t){if(I){document.body.style.overflowY="hidden",a.current.style.display="block";var n={fetch:fetch,accessToken:m.value},l=new c.Dropbox(n);"/"===W?l.filesListFolder({path:""}).then(function(t){for(var a=[],n=t.entries,l=0;l<n.length;l++)n[l].path_lower!==e.path&&a.push(n[l]);Y(a)}).catch(function(e){console.log("MoveFiles FileslistFolder home 57"),k(e,d)}):l.filesListFolder({path:W}).then(function(t){for(var a=[],n=t.entries,l=0;l<n.length;l++)n[l].path_lower!==e.path&&a.push(n[l]);Y(a)}).catch(function(e){console.log("MoveFiles FileslistFolder path 74"),k(e,d)})}else a.current.style.display="none"},[I,W,e.path]),Object(n.useEffect)(function(){I||(window.location.hash="/")},[I]);var z=w.substring(0,w.lastIndexOf("/")),G=function(e){v(e.target.dataset.id)},K=L.map(function(e){if("folder"===e[".tag"])return l.a.createElement("tr",{key:e.id,className:"modal-movefiles-tr","data-name":e.name,"data-folder":e.path_display,"data-tag":e[".tag"]},l.a.createElement("td",{key:e.id,className:"modal-movefiles-td-icon"},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",{className:"modal-movefiles-td-link"},l.a.createElement(b.c,{to:e.path_lower,className:"modal-movefiles-link",onClick:G,"data-id":e.path_display},e.name)))});return t=l.a.createElement(b.b,null,l.a.createElement("div",{ref:a,className:"moveBack"},l.a.createElement("div",{className:"moveModal"},l.a.createElement("h3",{className:"movefiles-h3"},"Move files"),l.a.createElement(R,null),l.a.createElement("p",{className:"movefiles-p"},"Move ",l.a.createElement("span",{className:"movefiles-file"},e.name)," ... to ... ",l.a.createElement("span",{className:"movefiles-file"},E.slice(1))),l.a.createElement("p",null,x),l.a.createElement("div",{className:"movefiles-table-wrapper"},l.a.createElement("table",null,l.a.createElement("tbody",null,K))),l.a.createElement("p",{style:{position:"absolute",bottom:"35px",color:"red"}}," ",i," "),l.a.createElement("button",{className:"modal-movefiles-button",onClick:function(){var t=w.lastIndexOf("/"),a=w.substring(t);d("");var n={fetch:fetch,accessToken:m.value},l=new c.Dropbox(n);l.filesMoveV2({from_path:w,to_path:E+a,autorename:!1}).then(function(t){for(var a=0;a<f.value.length;a++)if(f.value[a].id===t.metadata.id){var n=Object(j.a)(f.value);n[a]=t.metadata,h(n)}S("File transfered"),l.filesListFolder({path:z}).then(function(t){console.log(e),e.thumbnailUpdate([]),e.oldDataUpdate(t.entries),e.dataUpdate(t.entries),M(l,t.entries).then(function(t){d(""),e.thumbnailUpdate(t)}).catch(function(e){console.log("MoveFiles FilesMove2 146"),k(e,d)})}).catch(function(e){console.log("MoveFiles FilesMove2 150"),k(e,d)})}).catch(function(e){console.log("MoveFiles FilesMove2 155"),k(e,d)}),e.pollUpdateMode(!1),e.updateErrorMessage(""),d("")}},"Move"),l.a.createElement("i",{className:"material-icons upload-close",onClick:function(){B(!1),v(""),N(""),d(""),document.body.style.overflowY="auto",e.pollUpdateMode(!1),e.updateErrorMessage("")}},"close"),l.a.createElement("p",{ref:o,style:{display:"none"}},e.name," moved...")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(){return t=e.path,e.pollUpdateMode(!0),B(!0),void N(t);var t}}," ",l.a.createElement("i",{className:"material-icons movefiles-icon"},"swap_horiz")))}),B=a(30),A=function(e){var t=e.favorites,a=e.data;return t.find(function(e){return e.id===a.id})?l.a.createElement("button",{className:"listBtn",onClick:function(){h(t.filter(function(e){return e.id!==a.id}))}},l.a.createElement("i",{style:{color:"#ffd900",fontSize:"22px",WebkitTextStroke:"0.7px #4d4d4d"},className:"material-icons"},"star")):l.a.createElement("button",{className:"listBtn",onClick:function(){h([].concat(Object(j.a)(t),[Object(B.a)({},a)]))}},l.a.createElement("i",{className:"material-icons hoverStar"},"star"))},T=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),r=Object(n.useState)(""),s=Object(u.a)(r,2),i=s[0],d=s[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),h=f[0],g=f[1],E=Object(n.useState)(""),v=Object(u.a)(E,2),y=v[0],U=v[1],w=Object(n.useState)(""),M=Object(u.a)(w,2),N=M[0],O=M[1],F=Object(n.useState)(!1),j=Object(u.a)(F,2),x=j[0],S=j[1],C=Object(n.useState)([]),D=Object(u.a)(C,2),I=D[0],B=D[1],A=window.decodeURIComponent(window.location.hash.slice(1));Object(n.useEffect)(function(){""!==i&&setTimeout(function(){d("")},5e3)},[i]),Object(n.useEffect)(function(e){if(x){document.body.style.overflowY="hidden",a.current.style.display="block";var t={fetch:fetch,accessToken:m.value},n=new c.Dropbox(t);"/"===A?n.filesListFolder({path:""}).then(function(e){B(e.entries)}).catch(function(e){console.log("CopyFiles FileListFolder home 51"),k(e,d)}):n.filesListFolder({path:A}).then(function(e){B(e.entries)}).catch(function(e){console.log("CopyFiles FileListFolder path 62"),k(e,d)})}else a.current.style.display="none"},[x,A]),Object(n.useEffect)(function(){x||(window.location.hash="/")},[x]);var T=function(e){g(e.target.dataset.id)},L=I.map(function(e){if("folder"===e[".tag"])return l.a.createElement("tr",{key:e.id,className:"modal-movefiles-tr","data-name":e.name,"data-folder":e.path_display,"data-tag":e[".tag"]},l.a.createElement("td",{key:e.id,className:"modal-movefiles-td-icon"},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",{className:"modal-movefiles-td-link"},l.a.createElement(b.c,{to:e.path_lower,className:"modal-movefiles-link",onClick:T,"data-id":e.path_display},e.name)))}),Y=function(){S(!1),e.pollUpdateMode(!1),g(""),U(""),d(""),e.updateErrorMessage(""),document.body.style.overflowY="auto"};return t=l.a.createElement(b.b,null,l.a.createElement("div",{className:"moveBack",ref:a},l.a.createElement("div",{className:"moveModal"},l.a.createElement("h3",{className:"movefiles-h3"},"Copy files"),l.a.createElement(R,null),l.a.createElement("p",{className:"movefiles-p"},"Copy ",l.a.createElement("span",{className:"movefiles-file"},e.name)," ... to ... ",l.a.createElement("span",{className:"movefiles-file"},h.slice(1))),l.a.createElement("p",null,N),l.a.createElement("div",{className:"movefiles-table-wrapper"},l.a.createElement("table",null,l.a.createElement("tbody",null,L))),l.a.createElement("p",{style:{position:"absolute",bottom:"35px",color:"red"}}," ",i," "),l.a.createElement("button",{className:"modal-movefiles-button",onClick:function(){var t=y.lastIndexOf("/"),a=y.substring(t);d("");var n={fetch:fetch,accessToken:m.value},l=new c.Dropbox(n);l.filesCopyV2({from_path:y,to_path:h+a,autorename:!1}).then(function(e){O("File Moved"),l.filesListFolder({path:h}).then(function(e){Y()}).catch(function(e){console.log("CopyFiles FilesCopy 117"),k(e,d)})}).catch(function(e){console.log("CopyFiles FilesListFolder 122"),k(e,d)}),e.updateErrorMessage(""),d("")}},"Copy"),l.a.createElement("i",{className:"material-icons upload-close",onClick:Y},"close"),l.a.createElement("p",{ref:o,style:{display:"none"}},e.name," moved...")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(){return t=e.path,S(!0),U(t),void e.pollUpdateMode(!0);var t}}," ",l.a.createElement("i",{className:"material-icons copyfiles-icon"},"file_copy")))},L=function(e){var t=function(){e.clearSearchUpdate(!0)},a=[".jpg",".jpeg",".png",".pdf",".mp3",".id3",".wav",".mp4",".mov"],n=e.renderData.map(function(n,o){if(n.noSearchResult)return l.a.createElement("tr",{key:n.id},l.a.createElement("td",null,"No search matches"));var r=e.thumbnailsLoaded?e.thumbnails[o]:void 0;if("file"===n[".tag"]){var c=void 0===r?l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file"):l.a.createElement("img",{src:"data:image/jpeg;base64,"+r.thumbnail,alt:""}),s=n.name.lastIndexOf("."),i=n.name.substring(s);[".wav",".mp3",".id3"].includes(i)&&(c=l.a.createElement("i",{className:"material-icons filesFolders"},"audiotrack")),[".mov",".mp4"].includes(i)&&(c=l.a.createElement("i",{className:"material-icons filesFolders"},"local_movies")),a.includes(i)||(c=l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file"));var u=function(t){F(t,e.updateErrorMessage)};return l.a.createElement("tr",{key:n.id,className:"listFiles","data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"]},l.a.createElement("td",{title:"Download: "+n.name,"data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"],onClick:u,style:{width:"40px"}},c),l.a.createElement("td",{title:"Download: "+n.name,"data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"],onClick:u},n.name),l.a.createElement("td",{style:{width:"80px"}},function(e){0===e&&(e=1);var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}(n.size)),l.a.createElement("td",{style:{width:"200px"}},function(e){var t=e.substring(0,4),a=e.substring(5,7),n=e.substring(8,10);a=a.replace(/^0+/,""),n=n.replace(/^0+/,"");var o=["January","February","March","April","May","June","July","August","September","October","November","December"][a-1];return l.a.createElement("label",null,O()(e).fromNow()+", "+n+" "+o+" "+t)}(n.server_modified)),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(S,{updateErrorMessage:e.updateErrorMessage,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(I,{updateErrorMessage:e.updateErrorMessage,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,name:n.name,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(T,{updateErrorMessage:e.updateErrorMessage,data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower,name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(A,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower})),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(x,{updateErrorMessage:e.updateErrorMessage,tag:n[".tag"],name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,path:n.path_lower,folder:e.folder,pollUpdateMode:e.pollUpdateMode})))}return"folder"===n[".tag"]?l.a.createElement("tr",{key:n.id,className:"listFiles","data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"]},l.a.createElement("td",{style:{width:"40px"}},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",null,l.a.createElement(b.c,{className:"listFolderLink",to:"/home"+n.path_lower,onClick:t},n.name," ")),l.a.createElement("td",{style:{width:"80px"}},"..."),l.a.createElement("td",{style:{width:"200px"}},"..."),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(C,{updateErrorMessage:e.updateErrorMessage,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(I,{updateErrorMessage:e.updateErrorMessage,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,name:n.name,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(T,{updateErrorMessage:e.updateErrorMessage,data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(A,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(x,{updateErrorMessage:e.updateErrorMessage,tag:n[".tag"],name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,path:n.path_lower,folder:e.folder,pollUpdateMode:e.pollUpdateMode}))):void 0});return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Helmet,null,l.a.createElement("title",null,"MyBOX")),n)},Y=(a(55),function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)("none"),i=Object(u.a)(s,2),d=i[0],p=i[1],f=e.folder;f=f.substring(5);var h,b=Object(n.useRef)(null),g=function(){p("none"),e.pollUpdateMode(!1),e.updateErrorMessage("")};return h=l.a.createElement("div",{className:"upload-modal-folder",style:{display:d},ref:b},l.a.createElement("label",{htmlFor:"folder",className:"upload-folder-label"},"Type in new folder name"),l.a.createElement("input",{className:"upload-folder-input",type:"text",id:"folder",onChange:function(e){r(e.target.value)},value:o}),l.a.createElement("i",{className:"material-icons upload-close",id:"testi",onClick:g},"close"),l.a.createElement("br",null),l.a.createElement("button",{className:"upload-folder-modal-button",onClick:function(){var t={fetch:fetch,accessToken:m.value},a=new c.Dropbox(t);a.filesCreateFolderV2({path:f+"/"+o,autorename:!1}).then(function(t){setTimeout(function(){g()},2e3),a.filesListFolder({path:f}).then(function(t){e.thumbnailUpdate([]),e.oldDataUpdate(t.entries),e.dataUpdate(t.entries),M(a,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){console.log("CreateFolder Thumbnail 56"),k(t,e.updateErrorMessage)})}).catch(function(t){console.log("CreateFolder FilesListFolder 61"),k(t,e.updateErrorMessage)})}).catch(function(t){console.log("CreateFolder FilesCreateFolder 67"),k(t,e.updateErrorMessage)})}},"Create new Folder")),l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"upload-folder-button",onClick:function(){p("block"),r(""),e.pollUpdateMode(!0)}},l.a.createElement("i",{className:"material-icons-outlined folder-icon-create-folder"}," create_new_folder"),"Create new folder"),h)}),W=function(e){var t=Object(n.useRef)(null),a=e.clearSearch,o=e.pollUpdateMode;Object(n.useEffect)(function(){!0===a&&(t.current.value="",o(!1))},[a,o]);var r=e.folder.substring(5);return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons header-serach-icon"},"search"),l.a.createElement("input",{className:"header-search",placeholder:"Search...",type:"text",onChange:function(t){var a={fetch:fetch,accessToken:m.value},n=new c.Dropbox(a);t.target.value.length<1&&(e.pollUpdateMode(!1),n.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(n,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){console.log("Search Thumbnail 52"),k(t,e.updateErrorMessage)})}).catch(function(t){console.log("Search FilesListFolder 57"),k(t,e.updateErrorMessage)}),e.updateErrorMessage("")),t.target.value.length>0&&(e.pollUpdateMode(!0),n.filesSearch({path:r,query:t.target.value}).then(function(t){if(0===t.matches.length)e.dataUpdate([{".tag":"file",id:1,noSearchResult:"noResult"}]);else{e.clearSearchUpdate(!1),e.thumbnailUpdate([]);var a=[],n=!0,l=!1,o=void 0;try{for(var r,c=t.matches[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var s=r.value;a.push(s.metadata)}}catch(i){l=!0,o=i}finally{try{n||null==c.return||c.return()}finally{if(l)throw o}}e.dataUpdate(a)}})),e.updateErrorMessage("")},ref:t}))},z=Object(D.a)([{path:"/",breadcrumb:null}])(function(e){var t=e.breadcrumbs;return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons-outlined breadcrumb-home"},"home"),t.map(function(e){var t=e.match,a=e.breadcrumb;e.location;return l.a.createElement("span",{key:t.url},l.a.createElement(b.d,{to:t.url,className:"breadcrumb-link"}," ",a),l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right"))}),l.a.createElement("br",null))}),G=(a(56),function(e){var t,a=Object(n.useState)(null),o=Object(u.a)(a,2),r=o[0],s=o[1],i=e.folder;i=i.substring(5);var d=Object(n.useRef)(null),p=Object(n.useRef)(null),f=function(){p.current.style.display="none",e.pollUpdateMode(!1),e.updateErrorMessage("")};return t=l.a.createElement("div",{className:"upload-modal-files",ref:p},l.a.createElement("input",{type:"file",className:"upload-input",ref:d}),l.a.createElement("i",{className:"material-icons upload-close",onClick:f},"close"),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",className:"upload-submit",onClick:function(t){t.preventDefault();var a=d.current.files;if(console.log(a),0!==a.length){var n=Array.from(a),o={fetch:fetch,accessToken:m.value},r=new c.Dropbox(o);if(s(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"Upload in progress"),l.a.createElement("div",{className:"uploadLds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),n[0].size<157286400)r.filesUpload({contents:n[0],path:i+"/"+n[0].name}).then(function(t){s("Upload done"),setTimeout(function(){f(),s(null)},2500),console.log(e),console.log(t),r.filesListFolder({path:i}).then(function(t){console.log(t),e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(r,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile Thumbnail 67")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile FileListFolder 72")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile FileUpload 77")});else{for(var u=[],p=0;p<n[0].size;){var h=Math.min(8e6,n[0].size-p);u.push(n[0].slice(p,p+h)),p+=h}u.reduce(function(e,t,a,o){return 0===a?(console.log(a),e.then(function(){return console.log("start"),s(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"Upload in progress"),l.a.createElement("div",{className:"uploadLds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),r.filesUploadSessionStart({close:!1,contents:t}).then(function(e){return e.session_id})})):a<o.length-1?(console.log("append"),e.then(function(e){var n={session_id:e,offset:8e6*a};return r.filesUploadSessionAppendV2({cursor:n,close:!1,contents:t}).then(function(){return e})})):e.then(function(e){var a={session_id:e,offset:n[0].size-t.size},l={path:i+"/"+n[0].name,mode:"add",autorename:!0,mute:!1};return r.filesUploadSessionFinish({cursor:a,commit:l,contents:t})})},Promise.resolve()).then(function(t){s("Upload done"),setTimeout(function(){f(),s(null)},3e3),console.log(t),r.filesListFolder({path:i}).then(function(t){console.log(t),e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),M(r,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile Thumbnail 138")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile FileListFolder 143")})}).catch(function(t){k(t,e.updateErrorMessage),console.log("UploadFile Filesupload 148")})}d.current.value=""}},value:"Upload files"}),l.a.createElement("label",{className:"upload-label"},r)),l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"upload-file-button",onClick:function(){p.current.style.display="block",e.pollUpdateMode(!0)}},"Upload files"),t)}),K=a(29),J=(a(57),function(e){var t=Object(n.useRef)(null),o=Object(n.useState)("Name Lastname"),r=Object(u.a)(o,2),s=r[0],i=r[1],d=Object(n.useState)("name@domain.com"),p=Object(u.a)(d,2),f=p[0],h=p[1],b=Object(n.useState)(null),g=Object(u.a)(b,2),E=g[0],v=g[1],y=Object(n.useState)("us"),U=Object(u.a)(y,2),w=U[0],M=U[1];Object(n.useEffect)(function(){var t={fetch:fetch,accessToken:m.value};new c.Dropbox(t).usersGetCurrentAccount().then(function(e){i(e.name.display_name),h(e.email),v(e.profile_photo_url),M(e.country)}).catch(function(t){k(t,e.updateErrorMessage),console.log("UserAccount userGetCurrentAccount 34")})},[e.updateErrorMessage]);var N,O=function(e){t.current.style.display="block"},F=function(e){t.current.style.display="none"},j=f.lastIndexOf("@")+1,x="https://www."+f.substring(j),S=w.toLowerCase();return N=E?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{style:{border:"1px solid grey"},alt:"userPhoto",onMouseOver:O,onMouseOut:F,className:"userPhoto",src:E}),l.a.createElement("img",{style:{border:"1px solid grey"},alt:"userPhotoBig",ref:t,className:"userPhotoBig",src:E})):l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{style:{border:"1px solid grey"},alt:"userPhoto",onMouseOver:O,onMouseOut:F,className:"userPhoto",src:a(22)}),l.a.createElement("img",{style:{border:"1px solid grey"},alt:"userPhotoBig",ref:t,className:"userPhotoBig",src:a(22)})),l.a.createElement("div",{className:"userMain"},l.a.createElement("div",{className:"userFlag"},l.a.createElement(K.a,{code:S,svg:!0})),l.a.createElement("span",{className:"userName"},l.a.createElement("a",{title:"Open your mail",className:"userMailAtag",href:x,target:"_blank",without:"true",rel:"noopener noreferrer"},s)),N)}),H=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"headerLogOutBtn",onClick:function(){p(null),e.updateTokenState(m.value),h(null)}},"LogOut"))},V=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),o=a[0],r=a[1];Object(n.useEffect)(function(){var e=f.subscribe(r);return function(){return e.unsubscribe()}},[]);var s=o.sort(function(e,t){return e[".tag"]>t[".tag"]?1:-1}).reverse();Object(n.useEffect)(function(){var e={fetch:fetch,accessToken:m.value},t=new c.Dropbox(e);setInterval(function(){t.filesListFolder({path:"",recursive:!0}).then(function(e){null===f.value?h([]):function(){for(var t=Object(j.a)(f.value),a=e.entries.map(function(e){return e.id}),n=t.map(function(e){return e.id}),l=a.filter(function(e){return-1!==n.indexOf(e)}),o=[],r=function(e){var a=t.find(function(t){return t.id===l[e]});o.push(a)},c=0;c<l.length;c++)r(c);h(o)}()})},5e3)},[]);var i=function(t){F(t,e.updateErrorMessage)},d=s.map(function(t){if(e.data.map(function(e){e.id===t.id&&e.name!==t.name&&(t=e)}),"file"===t[".tag"])return l.a.createElement("tr",{key:t.id,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],style:{background:"white",zIndex:"0"},className:"listFiles-favorites"},l.a.createElement("td",{title:"Download: "+t.name,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],onClick:i,style:{cursor:"pointer"}},l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file")),l.a.createElement("td",{title:"Download: "+t.name,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],onClick:i,className:"listFolderLink"},t.name));if("folder"===t[".tag"]){if(t.name.includes("(")){var a=t.name.replace(/[()]/g,""),n=t.path_lower.substring(0,t.path_lower.lastIndexOf("/"))+"/"+a;!function(t,a){var n={fetch:fetch,accessToken:m.value},l=new c.Dropbox(n);l.filesMoveV2({from_path:t,to_path:a,autorename:!0}).then(function(t){l.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.dataUpdate(t.entries)})}).catch(function(t){console.log("FavoritList FilesMove2 151"),k(t,e.updateErrorMessage)})}(t.path_lower,n),t.name=a}return l.a.createElement("tr",{style:{background:"white"},key:t.id,className:"listFiles-favorites","data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"]},l.a.createElement("td",null,l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",null,l.a.createElement(b.c,{className:"listFolderLink",to:"/home"+t.path_lower},t.name)))}});return l.a.createElement("div",{className:"favorite_list",style:{position:"relative",top:"68px",left:"8px"}},l.a.createElement("span",{className:"favoriteTitle-my"},l.a.createElement("i",{style:{color:"#ffd900",WebkitTextStroke:"0.5px #4d4d4d",fontSize:"22px"},className:"material-icons star"},"star")," MyFavorites"),l.a.createElement("div",{className:"favoriteList-space"}),l.a.createElement("table",null,l.a.createElement("tbody",null,d)))},Z=(a(58),function(e){var t=Object(n.useState)(m.value),o=Object(u.a)(t,2),r=o[0],i=o[1],d=Object(n.useState)([]),p=Object(u.a)(d,2),b=p[0],E=p[1],v=Object(n.useState)([]),y=Object(u.a)(v,2),U=y[0],w=y[1],N=Object(n.useState)(!1),O=Object(u.a)(N,2),F=O[0],j=O[1],x=Object(n.useState)([]),S=Object(u.a)(x,2),C=S[0],D=S[1],R=Object(n.useState)([]),I=Object(u.a)(R,2),B=I[0],A=I[1],T=Object(n.useState)(!1),K=Object(u.a)(T,2),Z=K[0],Q=K[1],P=Object(n.useState)(!0),_=Object(u.a)(P,2),X=_[0],q=_[1],$=Object(n.useState)(""),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useRef)([]);Object(n.useEffect)(function(){ne.current=b},[b]),Object(n.useEffect)(function(){""!==te&&(console.log("error"),setTimeout(function(){ae("")},5e3))},[te]),Object(n.useEffect)(function(){var e=f.subscribe(D);return function(){return e.unsubscribe()}},[]),Object(n.useEffect)(function(){if(U.length===b.length){var e=U.every(function(e,t){return"failure"===e[".tag"]||e.metadata.id===b[t].id});j(e)}else j(!1)},[b,U]),Object(n.useEffect)(function(){if(!Z){var t=setInterval(function(){var t={fetch:fetch,accessToken:m.value},a=new c.Dropbox(t),n=ne.current;if("/home"===e.location.pathname)a.filesListFolder({path:""}).then(function(e){if(ne.current===n){var t=e.entries.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),l=B.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),o=e.entries.map(function(e){return e.name}).filter(function(e){return void 0!==e}),r=B.map(function(e){return e.name}).filter(function(e){return void 0!==e}),c=t.filter(function(e){return!l.includes(e)}),s=o.filter(function(e){return!r.includes(e)});e.entries.length<B.length&&(w([]),E(e.entries)),e.entries.length!==B.length||c.length>0||s.length>0?(Q(!0),console.log("poll k\xf6rs root"),console.log("poll stoppas tillf\xe4lligt root"),M(a,e.entries).then(function(t){E(e.entries),A(e.entries),w(t)}).then(function(e){Q(!1),console.log("Poll startar igen root")}).catch(function(e){k(e,ae),console.log("Home Thumbnails rad 136")})):console.log("Poll har inte k\xf6rts f\xf6r root")}}).catch(function(e){k(e,ae),console.log("Home filesrequest 150")});else{var l=e.location.pathname;l=l.substring(5),a.filesListFolder({path:l}).then(function(e){if(ne.current===n){var t=e.entries.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),l=B.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),o=e.entries.map(function(e){return e.name}).filter(function(e){return void 0!==e}),r=B.map(function(e){return e.name}).filter(function(e){return void 0!==e}),c=t.filter(function(e){return!l.includes(e)}),s=o.filter(function(e){return!r.includes(e)});e.entries.length<B.length&&(w([]),E(e.entries)),e.entries.length!==B.length||c.length>0||s.length>0?(Q(!0),console.log("poll k\xf6rs folder"),console.log("poll stoppas tillf\xe4lligt folder"),M(a,e.entries).then(function(t){E(e.entries),A(e.entries),w(t)}).then(function(e){Q(!1),console.log("Poll startar igen folder")}).catch(function(e){k(e,ae),console.log("Home Poll folder 218")})):console.log("Poll har inte k\xf6rts f\xf6r folder")}}).catch(function(e){k(e,ae),console.log("Home Poll interval 230")})}},5e3);return function(){return clearInterval(t)}}},[b,B,e.location.pathname,Z]),Object(n.useEffect)(function(){if(X){console.log("render Home");var t={fetch:fetch,accessToken:m.value},a=new c.Dropbox(t);if("/home"===e.location.pathname)a.filesListFolder({path:""}).then(function(e){console.log("bilder b\xf6rjar h\xe4mtas"),E(e.entries),A(e.entries),M(a,e.entries).then(function(t){e.entries===ne.current&&(console.log("bilder klara"),w(t))}).catch(function(e){k(e,ae),console.log("Home filesrequest folder 278")})}).catch(function(e){k(e,ae),console.log("Home Update Poll 286")});else{var n=e.location.pathname;n=n.substring(5),console.log("FETCH"),a.filesListFolder({path:n}).then(function(e){w([]),E(e.entries),A(e.entries),console.log(e.entries.length),console.log("bilder b\xf6rjar h\xe4mtas"),M(a,e.entries).then(function(t){e.entries===ne.current&&(console.log("bilder klara"),w(t))}).catch(function(e){k(e,ae),console.log("Home Request newfolder 321")})}).catch(function(e){k(e,ae),console.log("Home filesrequest 327")})}q(!1)}},[e.location.pathname,X]);var le=function(e){E(e)},oe=function(e){w(e)},re=function(e){A(e)},ce=function(e){Q(e)},se=function(e){q(e)};return null===r?l.a.createElement(g.a,{to:"/"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Helmet,null,l.a.createElement("title",null,"MyBOX")),l.a.createElement("header",{className:"mainHeader"},l.a.createElement("div",{className:"header-logo-wrap"},l.a.createElement("img",{id:"header-logo",src:a(59),alt:"My Box logo"})),l.a.createElement("span",{className:"headerContent"},l.a.createElement(W,{updateErrorMessage:ae,pollUpdateMode:ce,searchData:b,folder:e.location.pathname,dataUpdate:le,thumbnailUpdate:oe,oldDataUpdate:re,clearSearch:X,clearSearchUpdate:se}),l.a.createElement("span",null,l.a.createElement(J,{updateErrorMessage:ae})),l.a.createElement("span",null,l.a.createElement(H,{updateTokenState:i})))),l.a.createElement("div",{className:"mainWrapper"},l.a.createElement("aside",{className:"leftSide"},l.a.createElement("div",{className:"left-link-wrap"},l.a.createElement(G,{updateErrorMessage:ae,folder:e.location.pathname,dataUpdate:le,thumbnailUpdate:oe,oldDataUpdate:re,pollUpdateMode:ce}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(Y,{updateErrorMessage:ae,folder:e.location.pathname,dataUpdate:le,thumbnailUpdate:oe,oldDataUpdate:re,pollUpdateMode:ce}))),l.a.createElement("main",{className:"mainMain"},l.a.createElement("label",{onClick:function(){return q(!0)}},l.a.createElement(z,{clearSearchUpdate:se}),l.a.createElement("br",null)),l.a.createElement("p",{style:{color:"red"}}," ",te),l.a.createElement("table",{className:"mainTable"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"home-thead-tr"},l.a.createElement("th",{colSpan:"2"},"Name"),l.a.createElement("th",null,"File size"),l.a.createElement("th",null,"Last edited"),l.a.createElement("th",{style:{textAlign:"center"}},"Ren"),l.a.createElement("th",{style:{textAlign:"center"}},"Mov"),l.a.createElement("th",{style:{textAlign:"center"}},"Cop"),l.a.createElement("th",{style:{textAlign:"center"}},"Fav"),l.a.createElement("th",{style:{textAlign:"center"}},"Del"))),l.a.createElement("tbody",null,l.a.createElement(L,{updateErrorMessage:ae,favorites:C,favUpdate:function(e){D(e),h(e)},thumbnailsLoaded:F,folder:e.location.pathname,dataUpdate:le,thumbnailUpdate:oe,oldDataUpdate:re,renderData:b,thumbnails:U,clearSearchUpdate:se,pollUpdateMode:ce})))),l.a.createElement("aside",{className:"rightSide"},l.a.createElement("div",{className:"aside"}),l.a.createElement(V,{updateErrorMessage:ae,upFavTok:function(e){h(e)},data:b}))))});var Q=function(){return l.a.createElement(b.a,null,l.a.createElement(g.b,{exact:!0,path:"/",component:i}),l.a.createElement(g.b,{path:"/auth",component:E}),l.a.createElement(g.b,{path:"/home",component:Z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.c288c812.chunk.js.map