{"version":3,"sources":["Img/profile-img-none.png","Img/Logo_mybox.png","Components/login.js","Components/store.js","Components/auth.js","Components/getthumbnails.js","Components/dowload.js","Components/error.js","Components/delete.js","Components/renameFiles.js","Components/renameFolder.js","Components/modalbreadcrumbs.js","Components/movefiles.js","Components/addFavorites.js","Components/copyfiles.js","Components/listitems.js","Components/readablebytes.js","Components/lastedited.js","Components/createfolder.js","Components/search.js","Components/breadcrumbs.js","Components/uploadfile.js","Components/userAccount.js","Components/logout.js","Components/favoriteList.js","Components/home.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","Login","dbx","Dropbox","clientId","fetch","react_default","a","createElement","Fragment","Helmet","className","href","getAuthenticationUrl","token$","BehaviorSubject","window","localStorage","getItem","updateToken","newToken","setItem","removeItem","next","favorites$","JSON","parse","updateFavoriteToken","newFavorites","stringify","Auth","_useState","useState","_useState2","Object","slicedToArray","isLoggedIn","updateIsLoggedIn","_useState3","_useState4","error","errorUpdate","useEffect","console","log","hash","location","match","react_router_dom","to","react_router","pathname","state","getThumbnails","entries","promises","chunk","map","x","filesGetThumbnailBatch","entry","path","id","format",".tag","size","mode","Promise","all","then","results","flatten","downloadFile","e","updateErrorMessage","target","dataset","tag","option","accessToken","value","filesGetTemporaryLink","folder","response","link","document","body","appendChild","click","removeChild","catch","status","errorFunction","Delete","props","delModal","element","useRef","delFile","updateDelFile","style","pointerEvents","ref","color","name","onClick","substring","filesDeleteV2","i","length","metadata","newArray","toConsumableArray","splice","filesListFolder","thumbnailUpdate","dataUpdate","oldDataUpdate","current","visibility","overflowY","zIndex","pollUpdateMode","data-path","RenameFile","renameInput","inputEl","clearInput","newUrl","updateNewUrl","rename","updateRename","display","outline","placeholder","type","onChange","idx","lastIndexOf","newIdx","newPath","filesMoveV2","from_path","to_path","autorename","old","ReNameFolder","renameInputFolder","inputElFolder","clearInputFolder","okBtn","reNameMess","includes","background","split","strippedPath","slice","join","ModalBreadcrumbs","withBreadcrumbs","breadcrumb","_ref","breadcrumbs","_ref2","key","url","MoveFiles","moveFolders","moveModal","moveMessRef","moveError","updateMoveError","movePath","updateMovePath","_useState5","_useState6","startPath","updateStartPath","_useState7","_useState8","fileTransfer","updateFileTransfer","_useState9","_useState10","showModal","updateShowModal","_useState11","_useState12","data","updateData","decodeURIComponent","setTimeout","arr","path_lower","push","newName2","setPath","mapping","data-name","data-folder","path_display","data-tag","data-id","modalbreadcrumbs","position","bottom","index","newName","AddFavorites","favArray","favorites","find","filter","fontSize","WebkitTextStroke","concat","objectSpread","CopyFiles","closeModal","filesCopyV2","ListItems","clearSearchFn","clearSearchUpdate","arrIdx","listData","renderData","noSearchResult","thumbs","thumbnailsLoaded","thumbnails","undefined","newThumbs","src","thumbnail","alt","download","title","width","bytes","Math","floor","pow","toFixed","readableBytes","date","year","month","day","replace","monthInText","moment","fromNow","lastEdited","server_modified","textAlign","renameFiles","Components_movefiles","copyfiles","favUpdate","addFavorites","Components_delete","renameFolder","CreateFolder","input","updateInput","hide","updateHide","newFolder","uploadFolder","uploadModal","htmlFor","filesCreateFolderV2","Search","inputRef","clearSearch","filesSearch","query","matches","newArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","Breadcrumbs","UploadFile","uploadFile","uploadMessage","updateMessage","preventDefault","fileNodeList","files","fileList","Array","from","filesUpload","contents","workItems","offset","chunkSize","min","reduce","acc","blob","items","filesUploadSessionStart","close","session_id","sessionId","cursor","filesUploadSessionAppendV2","commit","mute","filesUploadSessionFinish","resolve","result","UserAccount","photoRef","updateName","mail","updateMail","photoUrl","updatePhotUrl","country","updateCountry","usersGetCurrentAccount","display_name","email","profile_photo_url","checkPhoto","onMouseOverPhoto","onMouseOutPhoto","countryFlag","toLowerCase","border","onMouseOver","onMouseOut","require","index_es","code","svg","without","rel","LogOut","updateTokenState","FavoriteList","fav","updateFav","subscription","subscribe","unsubscribe","sortData","sort","b","reverse","setInterval","recursive","chekId","checkIdFav","z","val","indexOf","newFavArr","_loop","newFav","renderingFavorites","brak","renameBrackets","top","left","Home","token","updateThumbnails","updateThumbnailsLoaded","updateFavorites","oldData","updateOldData","_useState13","_useState14","pollMode","updatePollMode","_useState15","_useState16","updateClearSearch","_useState17","_useState18","errorMessage","dataRef","isLoaded","every","poll","dataTmp","responseRev","rev","y","oldrespRev","responseName","oldrespName","diffRev","el","diffName","rep","clearInterval","bool","search","searchData","Components_userAccount","logout","uploadfile","Components_createfolder","Components_breadcrumbs","colSpan","Components_listitems","favoriteList","upFavTok","App","basename","exact","component","Boolean","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.12c2b772.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQjQzMzMwQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQjQzMzMxQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REFCNDMzMkVCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFCNDMzMkZCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55zlruAAAI6ElEQVR42uydPU8bWRSG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\"","module.exports = __webpack_public_path__ + \"static/media/Logo_mybox.91350eb7.png\";","import React from 'react';\nimport { Dropbox } from 'dropbox';\nimport { Helmet } from \"react-helmet\";\nimport '../Css/login.css';\nconst appkey =  'bvtwa87o7e9bfk6';\n\n\n\nconst Login = () => {\n\nconst dbx = new Dropbox({\n  clientId: appkey,\n  fetch: fetch,\n})\n\n  \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX Connect</title>\n    </Helmet>\n    <p className=\"loginText-big\">The World number 1 box solution</p>\n    <p className=\"loginText-small\">Get control of your files in the cloud. Move, copy, upload and download files and have your personally favorites. Explore the App now!</p>\n    <div className=\"loginMain\">\n      <a className=\"loginLink\" href={dbx.getAuthenticationUrl('https://jonaslarsson78.github.io/mandatory-advanced-js5/auth')}><button className=\"loginBtn\">Connect</button></a>\n    </div>\n    </>\n  )\n}\n\nexport default Login;","import { BehaviorSubject } from 'rxjs';\n\nexport const token$ = new BehaviorSubject(window.localStorage.getItem('token') || null);\n\n\nexport function updateToken(newToken) {\n\n  if(!newToken){\n    window.localStorage.removeItem('token');\n  }\n  else{\n    window.localStorage.setItem('token', newToken);\n  }\n\n token$.next(newToken);\n //console.log(token$.value)\n}\n\n//====================================FAVORITES STORE TOKEN==========================================\nexport const favorites$ = new BehaviorSubject(JSON.parse(window.localStorage.getItem(\"favorites\") || \"[]\"));\n\nexport function updateFavoriteToken(newFavorites) {\n\n  if(!newFavorites){\n    window.localStorage.removeItem(\"favorites\");\n  }\n  else {\n    window.localStorage.setItem(\"favorites\", JSON.stringify(newFavorites));\n  }\n  favorites$.next(newFavorites)\n}","import React, {useEffect, useState} from 'react';\nimport { updateToken } from './store.js'\nimport { Helmet } from \"react-helmet\";\nimport { Link, Redirect}from \"react-router-dom\";\nimport '../Css/auth.css';\n\n\nconst Auth = () => {\n  const [isLoggedIn, updateIsLoggedIn] = useState(false)\n  const [error, errorUpdate] = useState(false)\n  \n  useEffect(() => {\n    console.log('render Auth')\n    const hash = window.location.hash\n    let errorHash = \"#error_description=The+user+chose+not+to+give+your+app+access+to+their+Dropbox+account.&error=access_denied\";\n    if (hash === errorHash){\n      errorUpdate(true)\n      return\n    }\n    \n    const regex = /#(?:access_token)=([\\S\\s]*?)&/\n    const token = hash.match(regex)[1];\n\n    updateToken(token);\n    updateIsLoggedIn(true)\n  \n  }, [])\n  if (error){\n    return(\n      <>\n      <Helmet>\n      <title>MyBOX Auth</title>\n      </Helmet>\n      <div className=\"authMainLoader\">\n        <div className=\"authProgress\">\n          <b><p>No access.<br/>Reload page.</p></b>\n          <Link to=\"/\"><button className=\"modalBtn\">Reload</button></Link>\n    </div>\n   </div>\n   </>\n    )\n  }\n    if(isLoggedIn){\n          return  <Redirect to={{pathname:\"/home\", state: {isLoggedIn: isLoggedIn}}} />\n    }\n  return(\n    <>\n    <Helmet>\n      <title>MyBOX Auth</title>\n    </Helmet>\n   <div className=\"authMainLoader\">\n    <div className=\"authProgress\">\n        <div className=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n        <p>Loading page...</p>\n    </div>\n   </div>\n   </>\n  )\n  \n}\n\nexport default Auth;","import chunk from 'lodash.chunk';\nimport flatten from 'lodash.flatten';\n\nexport const getThumbnails = (dbx, entries) => {\n  const chunks = chunk(entries, 25);\n\n  const promises = chunks.map((x) => {\n    return dbx.filesGetThumbnailBatch({\n      entries: x.map(entry => {\n        return{\n          path: entry.id,\n          format : {'.tag': 'jpeg'},\n          size: { '.tag': 'w32h32'},\n          mode: { '.tag': 'strict' }  \n          }\n        })\n    });\n  });\n\n  return Promise.all(promises).then((results) => {\n    return flatten(results.map(x => x.entries));\n  });\n}","import {token$} from './store.js';\r\nimport { Dropbox } from 'dropbox';\r\n\r\nexport const downloadFile = (e, updateErrorMessage) => {\r\n    if(e.target.dataset.tag === 'folder'){\r\n      return null;\r\n    }\r\n    \r\n   if(e.target.dataset.tag === 'file'){\r\n     const option = {\r\n      fetch: fetch,\r\n      accessToken: token$.value\r\n    };\r\n    \r\n     const dbx = new Dropbox(option);\r\n     dbx.filesGetTemporaryLink({ \r\n       path: e.target.dataset.folder})\r\n        .then(response => {\r\n          let link = document.createElement(\"a\");\r\n          link.href = response.link;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n        })\r\n        .catch(error => {\r\n          if (error.response.status > 399 && error.response.status < 500 ) {\r\n            updateErrorMessage('Something went wrong, please try again');\r\n          }\r\n          else if (error.response.status > 499 && error.response.status < 600 ) {\r\n            updateErrorMessage('Something went wrong with the server, please try again');\r\n          }\r\n          else {\r\n            updateErrorMessage('Something went wrong, please try again');\r\n          }\r\n        });\r\n    }\r\n  }","export const errorFunction = (error, updateErrorMessage) => {\n\n    if (error.response.status === 400) {\n        //Bad input parameter. The response body is a plaintext message with more information.\n        updateErrorMessage(\"Something went wrong with the call to the server. Please try again.\")\n    } \n    else if (error.response.status === 401) {\n        //Bad or expired token. This can happen if the access token is expired or if the access token has been revoked by Dropbox or the user. To fix this, you should re-authenticate the user. The Content-Type of the response is JSON of typeAuthError\n        updateErrorMessage(\"Something went wrong with your account. Log in again to get a new session.\")\n    }\n    else if (error.response.status === 403) {\n        //The user or team account doesn't have access to the endpoint or feature. The Content-Type of the response is JSON of typeAccessError\n        updateErrorMessage(\"Something went wrong with your account. Log in again to get a new session.\")\n    }\n    else if (error.response.status === 404) {\n        //File or folder not found at the specified path.\n        updateErrorMessage(\"The server couldn´t find your request. Page not found. Please try again.\")\n    }\n    else if (error.response.status === 409) {\n        //File or folder not found at the specified path.\n        updateErrorMessage(\"Conflict with folders with the same name. Try another path!\")\n    }\n    else if (error.response.status === 429) {\n        //Your app is making too many requests for the given user or team and is being rate limited. Your app should wait for the number of seconds specified in the \"Retry-After\" response header before trying again.The Content-Type of the response can be JSON or plaintext. If it is JSON, it will be typeRateLimitErrorYou can find more information in the data ingress guide.\n        updateErrorMessage(\"Too many request to the server.\")\n    }\n    else if (error.response.status > 499 && error.response.status < 600 ) {\n        //An error occurred on the Dropbox servers. Check status.dropbox.com for announcements about Dropbox service issues.\n        updateErrorMessage(\"Something went wrong with the Dropboxserver. Please try again in a couple of minutes.\")\n    }\n    else {\n        updateErrorMessage(\"Something went wrong. Please try again.\")\n    }\n}\n","import React, {useState, useRef} from 'react';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { Dropbox } from 'dropbox';\r\nimport { getThumbnails } from './getthumbnails';\r\nimport { errorFunction } from './error.js'\r\nimport '../Css/modal.css'\r\n\r\n\r\nconst Delete = (props) => {\r\n    const element = useRef(null);\r\n    const [delFile, updateDelFile] = useState(\"\")\r\n\r\nlet delModal;\r\n\r\nlet pointerEvent = \"visible\"\r\nconst del = (e) => {\r\n  props.pollUpdateMode(true)\r\n  updateDelFile(e.target.dataset.path) \r\n  element.current.style.visibility = \"visible\"\r\n  element.current.style.zIndex = \"500\";\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\n\r\nconst yes = () => {\r\n      let path = props.folder.substring(5)\r\n        const option = {\r\n            fetch: fetch,\r\n            accessToken: token$.value\r\n          };\r\n          const dbx = new Dropbox(\r\n            option,\r\n          );\r\n          dbx.filesDeleteV2({\r\n            path: delFile,\r\n          })\r\n          .then(response => {\r\n            for (let i=0; i<favorites$.value.length; i++) {\r\n              if (favorites$.value[i].id === response.metadata.id) {\r\n                  let newArray = [...favorites$.value];\r\n                  newArray.splice(i, 1);\r\n                  updateFavoriteToken(newArray);\r\n            }\r\n          }\r\n            dbx.filesListFolder({\r\n            path: path,\r\n                }).then(response =>{\r\n                  props.thumbnailUpdate([])\r\n                  props.dataUpdate(response.entries)\r\n                  props.oldDataUpdate(response.entries)\r\n                  getThumbnails(dbx, response.entries)\r\n                        .then(entries => {   \r\n                          props.thumbnailUpdate(entries)\r\n                          })\r\n                          .catch(function(error) {\r\n                            errorFunction(error, props.updateErrorMessage)\r\n                            console.log('Delete FilesDelete2 55');\r\n                          });\r\n                })\r\n                .catch(function(error) {\r\n                  console.log('Delete FilesDelete2 61');\r\n                  errorFunction(error, props.updateErrorMessage)\r\n                });\r\n          })\r\n          .catch(function(error) {\r\n            console.log('Delete FilesDelete2 66');\r\n            errorFunction(error, props.updateErrorMessage)\r\n          });\r\n    \r\n    element.current.style.visibility = \"hidden\"\r\n    document.body.style.overflowY = \"auto\"\r\n    element.current.style.zIndex = \"0\";\r\n    props.pollUpdateMode(false)\r\n    props.updateErrorMessage('')\r\n}\r\n\r\nconst no = () => {\r\n    \r\n    element.current.style.visibility = \"hidden\"\r\n    document.body.style.overflowY = \"auto\"\r\n    element.current.style.zIndex = \"0\";\r\n    props.pollUpdateMode(false)\r\n    props.updateErrorMessage('')\r\n}\r\n\r\ndelModal = <div style={{pointerEvents: pointerEvent}} ref={element} className=\"modalBack\">\r\n<div style={{pointerEvents: pointerEvent}} className=\"modal\">\r\n    <div style={{pointerEvents: pointerEvent}} className=\"mainModal\">\r\n        <h2 style={{color: \"black\"}}>Delete ! ! !</h2>\r\n        <p className=\"modalText\">Do you want to delete {props.tag} {props.name} ??</p>\r\n        <button className=\"modalBtn yes\"  onClick={yes}>YES</button><button className=\"modalBtn no\" onClick={no}>NO</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\nreturn (\r\n    <>\r\n    {delModal}\r\n    <button className=\"listBtn\" onClick={del}> <i data-path={props.path} className=\"material-icons delete-icon\">delete_outline</i></button>\r\n    </>\r\n)\r\n\r\n}\r\nexport default Delete;","import React, {useState,useRef} from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\nimport { errorFunction } from './error.js'\r\n\r\nconst RenameFile = (props) => {\r\n\r\n  const inputEl = useRef(null);\r\n  const clearInput = useRef(null)\r\n  const [newUrl, updateNewUrl] = useState(\"\");\r\n  const [rename, updateRename] = useState(\"\");\r\n\r\n\r\nlet renameInput;\r\n\r\nconst option = {\r\n  fetch: fetch,\r\n  accessToken: token$.value\r\n};\r\n\r\nconst dbx = new Dropbox(\r\n  option,\r\n);\r\n\r\n\r\nconst reName = (e) => {\r\n  props.pollUpdateMode(true)\r\n  let old = e.target.dataset.path\r\n  updateRename(old)\r\n  \r\n  \r\n  inputEl.current.style.display = \"block\"\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\nconst newNameInput = (e) => {\r\n  let target = e.target.value\r\n  let idx = rename.lastIndexOf('.')\r\n  let newIdx = rename.substring(idx)\r\n  let newPath = rename.substring(0, rename.lastIndexOf(\"/\"));\r\n  let fixNewname = newPath + \"/\" + target + newIdx;\r\n  updateNewUrl(fixNewname);\r\n}\r\n\r\nconst addNewName = (e) => {\r\n  //console.log(props)\r\n  \r\n  dbx.filesMoveV2({\r\n    from_path: rename,\r\n    to_path: newUrl,\r\n    autorename: true\r\n  })\r\n  .then(response => {\r\n\r\n    for (let i=0; i<favorites$.value.length; i++) {\r\n      if (favorites$.value[i].id === response.metadata.id) {\r\n          let newArray = [...favorites$.value];\r\n          newArray[i] = response.metadata;\r\n          updateFavoriteToken(newArray);\r\n      }\r\n    }\r\n    dbx.filesListFolder({\r\n      path: props.folder.substring(5),\r\n    \r\n          }).then(response =>{\r\n            props.thumbnailUpdate([])\r\n            props.dataUpdate(response.entries)\r\n            props.oldDataUpdate(response.entries)\r\n\r\n            getThumbnails(dbx, response.entries)\r\n                  .then(entries => {   \r\n                    \r\n                    props.thumbnailUpdate(entries)\r\n                    })\r\n                    .catch(function(error) {\r\n                      errorFunction(error, props.updateErrorMessage)\r\n                      console.log('RenameFile Thumbnails rad 77');\r\n                      \r\n                    });\r\n            \r\n          })\r\n          .catch(function(error) {\r\n            errorFunction(error, props.updateErrorMessage)\r\n            console.log('RenameFile FilesListFolder rad 84');\r\n          });\r\n  })\r\n  .catch(error => {\r\n    errorFunction(error, props.updateErrorMessage)\r\n    console.log('RenameFile Filesmove rad 89');\r\n  });\r\n\r\n  inputEl.current.style.display = \"none\"\r\n  document.body.style.overflowY = \"auto\"\r\n  clearInput.current.value = \"\";\r\n  props.pollUpdateMode(false)\r\n  props.updateErrorMessage('')\r\n}\r\n\r\nconst addNewNameClose = () =>{\r\n  inputEl.current.style.display = \"none\"\r\n  document.body.style.overflowY = \"auto\"\r\n  props.pollUpdateMode(false)\r\n  props.updateErrorMessage('')\r\n}\r\n\r\nrenameInput = \r\n<div className=\"reNameBack\" ref={inputEl} >\r\n\r\n<div className=\"listRenameInput\"><h3 className=\"movefiles-h3\">Rename files</h3>\r\n<div className=\"renamefile-input-wrapper\"><span className=\"listRenameClose\" onClick={addNewNameClose}><i className=\"material-icons\">close</i></span><input className=\"listRenameInputText\" style={{outline: \"none\"}} ref={clearInput} placeholder=\"New filename...\" type=\"text\" onChange={newNameInput} /><button style={{outline: \"none\"}} className=\"renamefile-ok-button\" onClick={addNewName}>Ok</button></div></div></div>\r\n\r\n\r\nreturn(\r\n  <>\r\n  {renameInput}\r\n  <button className=\"listBtn\" onClick={reName}><i data-path={props.path} className=\"material-icons rename-icon\">edit</i></button>\r\n  </>\r\n)\r\n\r\n}\r\n\r\nexport default RenameFile;\r\n","import React, {useState,useRef} from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\nimport { errorFunction } from './error.js'\r\n\r\nconst ReNameFolder = (props) => {\r\n  const inputElFolder = useRef(null);\r\n  const clearInputFolder = useRef(null)\r\n  const okBtn = useRef(null)\r\n  const reNameMess = useRef(null)\r\n  const [newUrl, updateNewUrl] = useState(\"\");\r\n  const [rename, updateRename] = useState(\"\");\r\n\r\n  let renameInputFolder;\r\n\r\n  const option = {\r\n    fetch: fetch,\r\n    accessToken: token$.value\r\n  };\r\n  \r\n  const dbx = new Dropbox(\r\n    option,\r\n  );\r\n\r\n\r\nconst reNameFolder = (e) => {\r\nprops.pollUpdateMode(true)\r\nlet old = e.target.dataset.path\r\nupdateRename(old)\r\n\r\n  inputElFolder.current.style.display = \"block\"\r\n  document.body.style.overflowY = \"hidden\"\r\n}\r\nconst newNameInputFolder = (e) => {\r\nlet target = e.target.value\r\n\r\nif (target.includes(\"(\") && target.includes(\")\")){\r\n  okBtn.current.style.pointerEvents = \"none\"\r\n  okBtn.current.style.background = \"gray\"\r\n  reNameMess.current.style.display = \"block\"\r\n}\r\nelse{\r\n  okBtn.current.style.pointerEvents = \"visible\" \r\n  okBtn.current.style.background = \"#029BB5\"\r\n  reNameMess.current.style.display = \"none\"\r\n}\r\n\r\nlet path = rename.split(\"/\");\r\nlet strippedPath = path.slice(0, path.length-1).join(\"/\");\r\n\r\nlet fixNewname = strippedPath + \"/\" + target;\r\nupdateNewUrl(fixNewname);\r\n}\r\n\r\nconst addNewNameFolder = (e) => {\r\n\r\n\r\n\r\n    dbx.filesMoveV2({\r\n        from_path: rename,\r\n        to_path: newUrl,\r\n        autorename: false\r\n      })\r\n      .then(response => {\r\n\r\n        for (let i=0; i<favorites$.value.length; i++) {\r\n          if (favorites$.value[i].id === response.metadata.id) {\r\n              let newArray = [...favorites$.value];\r\n              newArray[i] = response.metadata;\r\n              updateFavoriteToken(newArray);\r\n          }\r\n        }\r\n        dbx.filesListFolder({\r\n          path: props.folder.substring(5),\r\n        \r\n              }).then(response =>{\r\n                props.thumbnailUpdate([])\r\n                props.dataUpdate(response.entries)\r\n                props.oldDataUpdate(response.entries)\r\n    \r\n                getThumbnails(dbx, response.entries)\r\n                      .then(entries => {   \r\n                        \r\n                        props.thumbnailUpdate(entries)\r\n                        })\r\n                        .catch(function(error) {\r\n                          errorFunction(error, props.updateErrorMessage)\r\n                          console.log('RenameFolder Thumbnails rad 90');\r\n                        });\r\n                \r\n              })\r\n              .catch(function(error) {\r\n                errorFunction(error, props.updateErrorMessage)\r\n                console.log('RenameFolder Fileslistfolder rad 96');\r\n              });\r\n      })\r\n      .catch(error => {\r\n        errorFunction(error, props.updateErrorMessage)\r\n        console.log('RenameFolder FilesMoveV2 rad 101');\r\n      });\r\n\r\ninputElFolder.current.style.display = \"none\"\r\ndocument.body.style.overflowY = \"auto\"\r\nclearInputFolder.current.value = \"\";\r\nprops.pollUpdateMode(false)\r\nprops.updateErrorMessage('')\r\n\r\n}\r\nconst addNewNameCloseFolder = () =>{\r\ninputElFolder.current.style.display = \"none\"\r\ndocument.body.style.overflowY = \"auto\"\r\nprops.pollUpdateMode(false)\r\nprops.updateErrorMessage('')\r\n}\r\n\r\nrenameInputFolder = \r\n<div ref={inputElFolder} className=\"reNameBack\">\r\n<div className=\"listRenameInput\"><h3 className=\"movefiles-h3\">Rename folder</h3>\r\n<div className=\"renamefile-input-wrapper\"><span className=\"listRenameClose\" onClick={addNewNameCloseFolder}><i className=\"material-icons\">close</i></span><input placeholder=\"New foldername...\" className=\"listRenameInputText\" style={{outline: \"none\"}} ref={clearInputFolder} type=\"text\" onChange={newNameInputFolder} /><button ref={okBtn} className=\"renamefile-ok-button\" style={{outline: \"none\"}} onClick={addNewNameFolder}>Ok</button></div></div><div ref={reNameMess} className=\"renameFoldeEerrorMess\">No folder name whit ( ) !</div></div>\r\n\r\n\r\nreturn(\r\n  <>\r\n  {renameInputFolder}\r\n  <button className=\"listBtn\" onClick={reNameFolder}><i data-path={props.path} className=\"material-icons rename-icon\">edit</i></button>  \r\n  </>\r\n)\r\n\r\n}\r\n\r\nexport default ReNameFolder;\r\n","import React from 'react';\nimport { NavLink, Link } from \"react-router-dom\";\nimport withBreadcrumbs from 'react-router-breadcrumbs-hoc';\nimport '../Css/breadcrumbs.css';\n\nconst ModalBreadcrumbs = withBreadcrumbs([{ path: '/', breadcrumb: null }])(({ breadcrumbs }) => (\n    <>\n    <i className=\"material-icons-outlined breadcrumb-home\">home</i><Link className=\"breadcrumb-link\" to=\"/\">Home<i className=\"material-icons breadcrumb\">arrow_right</i></Link>\n    <React.Fragment>\n      {breadcrumbs.map(({\n        match,\n        breadcrumb,\n      }) => (\n        \n        <span key={match.url}>\n          <NavLink to={match.url} className=\"breadcrumb-link\"> {breadcrumb} \n          </NavLink><i className=\"material-icons breadcrumb\">arrow_right</i>\n        </span>\n      ))}\n    </React.Fragment>\n    <br />\n    </>\n  ));\n  \nexport default ModalBreadcrumbs;\n  ","import React, {useState, useRef, useEffect} from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$, favorites$, updateFavoriteToken} from './store.js';\nimport {Link}from \"react-router-dom\";\nimport { HashRouter as Router} from \"react-router-dom\";\nimport ModalBreadcrumbs from './modalbreadcrumbs'\nimport { getThumbnails } from './getthumbnails'\nimport { errorFunction } from './error.js'\nimport '../Css/movefiles.css';\n\n\nconst MoveFiles = (props) => {\n  \n    const moveModal = useRef(null);\n    const moveMessRef = useRef(null);\n    const [moveError, updateMoveError] = useState(\"\")\n    const [movePath, updateMovePath] = useState(\"\")\n    const [startPath, updateStartPath] = useState(\"\")\n    const [fileTransfer, updateFileTransfer] = useState(\"\")\n    const [showModal, updateShowModal] = useState(false)\n    const [data, updateData] = useState([]);\n    let moveFolders = '';\n    const path = window.decodeURIComponent(window.location.hash.slice(1));\n    \n    useEffect(() => {\n      if (moveError === ''){\n        return;\n      }\n      setTimeout(() => {\n        updateMoveError(\"\")\n      }, 5000);\n    }, [moveError]);\n\n    /*========= API Request for List folders =========*/\n    useEffect((e) => {\n     // console.log('Render ...moveFiles')\n      if (!showModal) {\n        moveModal.current.style.display = 'none';\n      } else {\n        document.body.style.overflowY = \"hidden\"\n        moveModal.current.style.display = 'block';\n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n      };\n      const dbx = new Dropbox(\n        option,\n      );\n  \n      if (path === '/'){\n        \n        dbx.filesListFolder({\n          path: '',\n        })\n        .then(response => {\n          let arr = []\n          let data = response.entries\n          for (let i = 0; i < data.length; i++) {\n            if (data[i].path_lower !== props.path)\n              arr.push(data[i])\n          }\n          updateData(arr)  \n        })\n        .catch(error => {\n          console.log('MoveFiles FileslistFolder home 57');\n          errorFunction(error, updateMoveError)\n        }); \n       } else {\n        \n        dbx.filesListFolder({\n          path: path,\n        })\n        .then(response => {\n          let arr = []\n          let data = response.entries\n          for (let i = 0; i < data.length; i++) {\n            if (data[i].path_lower !== props.path)\n              arr.push(data[i])\n          }\n          updateData(arr) \n        })\n        .catch(error => {\n          console.log('MoveFiles FileslistFolder path 74');\n          errorFunction(error, updateMoveError)\n        }); \n      }\n    }\n\n    }, [showModal, path, props.path]);\n\n  useEffect(() => {\n    if (!showModal) {\n      window.location.hash = \"/\";\n\n    }\n  }, [showModal]);\n\n  const startModal = (path) => {\n    props.pollUpdateMode(true)\n   updateShowModal(true)\n   updateStartPath(path)\n  }\n  let newName2 = startPath.substring(0, startPath.lastIndexOf(\"/\")); \n  const setPath = (e) => {\n    updateMovePath(e.target.dataset.id)\n  }\n\n/*========= API Request for move files =========*/\n\n  const moveToFolder = () => {\n        let index = startPath.lastIndexOf(\"/\")\n        let newName = startPath.substring(index)\n        \n        updateMoveError('')\n    \n        const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesMoveV2({\n            from_path: startPath,\n            to_path: movePath + newName,\n            autorename: false\n          })\n          .then(response => {\n\n            for (let i=0; i<favorites$.value.length; i++) {\n              if (favorites$.value[i].id === response.metadata.id) {\n                  let newArray = [...favorites$.value];\n                  newArray[i] = response.metadata;\n                  updateFavoriteToken(newArray);\n              }\n            }\n\n            updateFileTransfer('File transfered')\n            dbx.filesListFolder({\n              path: newName2,\n          })\n          .then(response => {\n            console.log(props)\n            props.thumbnailUpdate([]);\n            props.oldDataUpdate(response.entries)\n            props.dataUpdate(response.entries)\n\n            getThumbnails(dbx, response.entries)\n\n            \n            .then(entries => {   \n              updateMoveError(\"\")\n              props.thumbnailUpdate(entries)\n              })\n              .catch(function(error) {\n                console.log('MoveFiles FilesMove2 146');\n                errorFunction(error, updateMoveError)\n               });\n          })\n            .catch(error => {\n              console.log('MoveFiles FilesMove2 150');\n              errorFunction(error, updateMoveError)\n          }); \n        })\n        .catch(error => {\n          console.log('MoveFiles FilesMove2 155');\n          errorFunction(error, updateMoveError)\n          //updateMoveError(\"File / Folder with the same name already exists!\")\n        });\n        props.pollUpdateMode(false)\n        props.updateErrorMessage('')\n        updateMoveError('')\n    }\n /*==================*/\n \n  const renderModalData = (data) => {\n    \n    if(data[\".tag\"] === 'folder'){ //FOLDER\n      return( //FOLDERS\n        <tr key={data.id} className=\"modal-movefiles-tr\" data-name={data.name} data-folder={data.path_display} data-tag={data[\".tag\"]}>\n          <td key={data.id} className=\"modal-movefiles-td-icon\">\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td className=\"modal-movefiles-td-link\">\n          <Link to={ data.path_lower } className=\"modal-movefiles-link\" onClick={ setPath } data-id={ data.path_display }>{ data.name }</Link>\n          </td>\n        </tr>\n          )\n        } \n      \n  }\n\n  let mapping = data.map(renderModalData)\n\n  const closeModal = () => {\n      updateShowModal(false)\n      updateMovePath('')\n      updateStartPath('')\n      updateMoveError('')\n      document.body.style.overflowY = \"auto\"\n      props.pollUpdateMode(false)\n      props.updateErrorMessage('')\n  }\n\n    moveFolders = \n    <Router>\n      <div ref={ moveModal } className=\"moveBack\">\n    <div className=\"moveModal\" >\n    <h3 className=\"movefiles-h3\">Move files</h3>\n    <ModalBreadcrumbs />\n    <p className=\"movefiles-p\">Move <span className=\"movefiles-file\">{props.name}</span> ... to ... <span className=\"movefiles-file\">{ movePath.slice(1)}</span></p>\n    <p>{ fileTransfer }</p>\n    <div className=\"movefiles-table-wrapper\">\n    <table>\n      <tbody>\n      { mapping }\n      </tbody>\n    </table>\n    </div>\n    <p style={{position:\"absolute\", bottom: \"35px\", color: 'red'}}> { moveError } </p>\n    <button className=\"modal-movefiles-button\" onClick={ moveToFolder }>Move</button>\n    <i className=\"material-icons upload-close\" onClick={closeModal}>close</i>\n    <p ref={moveMessRef} style={{display: \"none\"}}>{props.name} moved...</p>\n    </div>\n    </div>\n    </Router>\n  \n    \n    return (\n        <>\n        { moveFolders }\n        <button className=\"listBtn\" onClick={ () => startModal(props.path) }> <i className=\"material-icons movefiles-icon\">swap_horiz</i></button>\n        </>\n\n    )\n\n}\n\nexport default MoveFiles;\n\n\n\n\n\n","import React from 'react';\nimport {updateFavoriteToken} from './store.js';\n\n/*\n\nGOAL: \nWhen the user clicks on an Add_to_Favorites-button, the chosen file should be copied to a new_state,\nwith all the needed data.\n\nThe new_state should be used to render a favorite_list, which should be displayed in a side_menu on the right of the main_content.\n\n- When the user deletes or renames the file, the file should also be deleted, or renamed, in the favorite_list.\nOR ELSE: The demand is that the error caused by the file being used in any way from the favorite_list, after having been deleted, should be handled.\nA direct update of the favorite_state is not required, but obviously better.\n\n- When a user logs out, the local storage should be cleaned out, so that no favorites exists once the user logs back in. \n\n=== Ha state i rooten.\n=== Använd behavioursubject för att uppdatera favoritestatet.\n=== Kör en toggle onClick - Om id inte finns i listan, lägg till objektet (objekt ska in i state, inte id), om id finns i listan, ta bort.\n*/\n\nconst AddFavorites = (props) => {\n//////////////////////////////////////////////////////////////////////////////////////////////////\n    let favArray = props.favorites;\n    let data = props.data;\n\n    const isFavorite = !!favArray.find(x => x.id === data.id);\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n    const add = () => {\n        updateFavoriteToken([...favArray, {...data}]);\n        return;\n    }\n    \n//////////////////////////////////////////////////////////////////////////////////////////////////\n    const remove = () => {\n        updateFavoriteToken(favArray.filter(x => x.id !== data.id));\n    }\n/////////////////////////////////////////////////////////////////////////////////////////////////\n    if (isFavorite) {\n        return <button className=\"listBtn\" onClick={remove}><i style={{color: \"#ffd900\", fontSize:'22px', WebkitTextStroke: \"0.7px #4d4d4d\"}} className=\"material-icons\">star</i></button>;\n    }\n\n    return <button className=\"listBtn\" onClick={add}><i className=\"material-icons hoverStar\">star</i></button>;\n    \n}\n\nexport default AddFavorites;","import React, {useState, useRef, useEffect} from 'react';\nimport { Dropbox } from 'dropbox';\nimport { token$ } from './store.js';\nimport {Link}from \"react-router-dom\";\nimport { HashRouter as Router} from \"react-router-dom\";\nimport ModalBreadcrumbs from './modalbreadcrumbs';\nimport { errorFunction } from './error.js';\nimport '../Css/movefiles.css';\n\n\nconst CopyFiles = (props) => {\n    const moveModal = useRef(null);\n    const moveMessRef = useRef(null);\n    const [moveError, updateMoveError] = useState(\"\")\n    const [movePath, updateMovePath] = useState(\"\")\n    const [startPath, updateStartPath] = useState(\"\")\n    const [fileTransfer, updateFileTransfer] = useState(\"\")\n    const [showModal, updateShowModal] = useState(false)\n    const [data, updateData] = useState([]);\n    let moveFolders = '';\n    const path = window.decodeURIComponent(window.location.hash.slice(1));\n\n    useEffect(() => {\n      if (moveError === ''){\n        return;\n      }\n      setTimeout(() => {\n        updateMoveError(\"\")\n      }, 5000);\n    }, [moveError]);\n  \n    \n    /*========= API Request for List folders =========*/\n    useEffect((e) => {\n     // console.log('Render copyfiles')\n      if (!showModal) {\n        moveModal.current.style.display = 'none';\n        \n      } else {\n        document.body.style.overflowY = \"hidden\"\n        moveModal.current.style.display = 'block';\n        \n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n      };\n      const dbx = new Dropbox(\n        option,\n      );\n  \n      if (path === '/'){\n        dbx.filesListFolder({\n          path: '',\n        })\n        .then(response => {\n          updateData(response.entries)          \n        })\n        .catch(error => {\n          console.log('CopyFiles FileListFolder home 51');\n          errorFunction(error, updateMoveError)\n        }); \n       } else {\n        dbx.filesListFolder({\n          path: path,\n        })\n        .then(response => {\n          updateData(response.entries)\n        })\n        .catch(error => {\n          console.log('CopyFiles FileListFolder path 62');\n          errorFunction(error, updateMoveError)\n        }); \n      }\n    }\n    }, [showModal, path]);\n\n  useEffect(() => {\n    if (!showModal) {\n      window.location.hash = \"/\";\n    }\n  }, [showModal]);\n\n  const startModal = (path) => {\n   updateShowModal(true)\n   updateStartPath(path)\n   props.pollUpdateMode(true)\n  }\n\n  const setPath = (e) => {\n    updateMovePath(e.target.dataset.id)\n\n  }\n\n      /*========= API Request for move files =========*/\n\n  const moveToFolder = () => {\n        let index = startPath.lastIndexOf(\"/\")\n        let newName = startPath.substring(index)\n        updateMoveError('')\n    \n        const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesCopyV2({\n            from_path: startPath,\n            to_path: movePath + newName,\n            autorename: false\n          })\n          .then(response => {\n            updateFileTransfer('File Moved')\n            dbx.filesListFolder({\n              path: movePath,\n            })\n            .then(response => {\n                closeModal() \n            })\n            .catch(error => {\n              console.log('CopyFiles FilesCopy 117');\n              errorFunction(error, updateMoveError)\n            }); \n          })\n          .catch(error => {\n            console.log('CopyFiles FilesListFolder 122');\n            errorFunction(error, updateMoveError)\n          });\n          props.updateErrorMessage('')\n          updateMoveError('')\n    }\n /*==================*/\n\n  const renderModalData = (data) => {\n    if(data[\".tag\"] === 'folder'){ //FOLDER\n      return( //FOLDERS\n        <tr key={data.id} className=\"modal-movefiles-tr\" data-name={data.name} data-folder={data.path_display} data-tag={data[\".tag\"]}>\n          <td key={data.id} className=\"modal-movefiles-td-icon\">\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td className=\"modal-movefiles-td-link\">\n          <Link to={ data.path_lower } className=\"modal-movefiles-link\" onClick={ setPath } data-id={ data.path_display }>{ data.name }</Link>\n          </td>\n        </tr>\n          )\n        } \n  }\n\n  let mapping = data.map(renderModalData)\n\n  const closeModal = () => {\n      updateShowModal(false)\n      props.pollUpdateMode(false)\n      updateMovePath('')\n      updateStartPath('')\n      updateMoveError('')\n      props.updateErrorMessage('')\n      document.body.style.overflowY = \"auto\"\n  }\n\n    moveFolders = \n    <Router>\n      <div className=\"moveBack\" ref={ moveModal }>\n    <div className=\"moveModal\" >\n    <h3 className=\"movefiles-h3\">Copy files</h3>\n    <ModalBreadcrumbs />\n    <p className=\"movefiles-p\">Copy <span className=\"movefiles-file\">{ props.name }</span> ... to ... <span className=\"movefiles-file\">{ movePath.slice(1)}</span></p>\n    <p>{ fileTransfer }</p>\n    <div className=\"movefiles-table-wrapper\">\n    <table>\n      <tbody>\n      { mapping }\n      </tbody>\n    </table>\n    </div>\n    <p style={{position:\"absolute\", bottom: \"35px\", color: 'red'}}> { moveError } </p>\n    <button className=\"modal-movefiles-button\" onClick={moveToFolder}>Copy</button>\n    <i className=\"material-icons upload-close\" onClick={closeModal}>close</i>\n    <p ref={moveMessRef} style={{display: \"none\"}}>{props.name} moved...</p>\n    </div>\n    </div>\n    </Router>\n  \n    \n    return (\n        <>\n        { moveFolders }\n        <button className=\"listBtn\" onClick={ () => startModal(props.path) }> <i className=\"material-icons copyfiles-icon\">file_copy</i></button>\n        </>\n\n    )\n\n}\n\nexport default CopyFiles;","import React from 'react';\nimport {Link}from \"react-router-dom\";\nimport '../Css/listitems.css';\nimport {readableBytes} from './readablebytes'\nimport {lastEdited} from './lastedited'\nimport { downloadFile } from './dowload.js'\nimport { Helmet } from \"react-helmet\";\nimport Delete from './delete'\nimport RenameFile  from './renameFiles'\nimport ReNameFolder from './renameFolder.js';\nimport MoveFiles from './movefiles.js'\nimport AddFavorites from \"./addFavorites.js\";\nimport CopyFiles from './copyfiles.js'\n\n\nconst ListItems = (props) => {\n\n //===================RENDER LIST====================\n  \n  const clearSearchFn = () => {\n    props.clearSearchUpdate(true)\n  }\n\n\n\n  const arrIdx = [\".jpg\", \".jpeg\", \".png\", \".pdf\", \".mp3\", \".id3\", \".wav\", \".mp4\", \".mov\"] // Array med filer som vissar thumb...\n\n  const renderList = (data, index) => {\n   \n\n\n    if(data.noSearchResult){\n      return(\n        \n          <tr key={data.id}>\n            <td>No search matches</td>\n          </tr>\n        \n      )\n    }\n   \n\n   const thumbs = props.thumbnailsLoaded ? props.thumbnails[index] : undefined;\n\n    if(data[\".tag\"] === 'file'){ //FILER\n     \n      let newThumbs = thumbs === undefined ? <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i> : <img src={\"data:image/jpeg;base64,\" + thumbs.thumbnail} alt=\"\"/>\n      \n      let idx = data.name.lastIndexOf('.');\n      let newIdx = data.name.substring(idx);\n      /*------------- Audio idx files -----------------------------------*/\n      let audioIdx = [\".wav\", \".mp3\", \".id3\"]\n      if (audioIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons filesFolders\">audiotrack</i>\n      }\n      /* --------------------------------------------------------------- */\n\n       /*------------- Vidio idx files -----------------------------------*/\n      let videoIdx = [\".mov\", \".mp4\"]\n      if (videoIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons filesFolders\">local_movies</i>\n      }\n      /* --------------------------------------------------------------- */\n\n      if (!arrIdx.includes(newIdx)){\n        newThumbs = <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i>\n      }\n      const download = (e) =>{\n        downloadFile(e, props.updateErrorMessage)\n      }\n\n        return( //FILES\n        \n          <tr\n              key={data.id} \n              className=\"listFiles\" \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]}\n              >\n            <td \n              title={\"Download: \" + data.name} \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]} onClick={download}\n              style={{width: \"40px\"}}>\n                {newThumbs}\n            </td>\n            <td\n              title={\"Download: \" + data.name} \n              data-name={data.name} \n              data-folder={data.path_lower} \n              data-tag={data[\".tag\"]} onClick={download}\n            >\n            {data.name}\n            </td>\n            <td style={{width: \"80px\"}}>\n              {readableBytes(data.size)}\n            </td>\n            <td style={{width: \"200px\"}}>\n              {lastEdited(data.server_modified)}\n            </td>\n            \n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <RenameFile updateErrorMessage={ props.updateErrorMessage } dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <MoveFiles updateErrorMessage={ props.updateErrorMessage } dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} name={data.name} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"45px\", textAlign: 'center'}}>\n              <CopyFiles updateErrorMessage={ props.updateErrorMessage } data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            <td style={{width: \"45px\", textAlign: 'center'}}>\n              <AddFavorites data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower}></AddFavorites>\n            </td>\n            <td style={{width: \"43px\", textAlign: 'center'}}>\n              <Delete updateErrorMessage={ props.updateErrorMessage } tag={data[\".tag\"]} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} path={data.path_lower} folder={props.folder} pollUpdateMode={props.pollUpdateMode}/>\n            </td>\n            \n          </tr>\n         \n        ) \n      }\n \nif(data[\".tag\"] === 'folder'){ //FOLDER\n\nreturn( //FOLDERS\n  <tr key={data.id} className=\"listFiles\" data-name={data.name} data-folder={data.path_lower} data-tag={data[\".tag\"]}>\n    <td style={{width: \"40px\"}}>\n    <i className=\"material-icons filesFolders\">folder</i>\n    </td>\n    <td>\n      <Link className=\"listFolderLink\" to={\"/home\" + data.path_lower} onClick={clearSearchFn}>{data.name} </Link>\n    </td>\n    <td style={{width: \"80px\"}}>\n      ...\n    </td>\n    <td style={{width: \"200px\"}}>\n      ...\n    </td>\n    \n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <ReNameFolder updateErrorMessage={ props.updateErrorMessage } dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <MoveFiles updateErrorMessage={ props.updateErrorMessage } dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} folder={props.folder} path={data.path_lower} name={data.name} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <CopyFiles updateErrorMessage={ props.updateErrorMessage } data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate}\n        pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <AddFavorites data={data} favorites={props.favorites} favUpdate={props.favUpdate} path={data.path_lower}></AddFavorites>\n    </td>\n    \n    <td style={{width: \"45px\", textAlign: 'center'}}>\n      <Delete updateErrorMessage={ props.updateErrorMessage } tag={data[\".tag\"]} name={data.name} dataUpdate={props.dataUpdate} thumbnailUpdate={props.thumbnailUpdate} oldDataUpdate={props.oldDataUpdate} path={data.path_lower} folder={props.folder} pollUpdateMode={props.pollUpdateMode}/>\n    </td>\n  </tr>\n    )\n  } \n}\n    \n  const listData = props.renderData.map(renderList)\n  \n      \n     \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX</title>\n    </Helmet>\n      {listData}\n    </>\n  )\n}\n\nexport default ListItems;","export function readableBytes (bytes) {\n  if (bytes === 0){\n    bytes = 1\n  }\n  const index = Math.floor(Math.log(bytes) / Math.log(1024)),\n  sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  return (bytes / Math.pow(1024, index)).toFixed(2) * 1 + ' ' + sizes[index];\n\n}","import moment from 'moment';\nimport React from 'react';\n\nexport function lastEdited (date) {\n   \n  const year = date.substring(0, 4);\n  let month = date.substring(5, 7)\n  let day = date.substring(8, 10)\n  //const hour = date.substring(11, 13)\n  //const minute = date.substring(14, 16)\n  //const second = date.substring(17, 19)\n\n\n  const months = [\n    \"January\", \"February\", \"March\",\n    \"April\", \"May\", \"June\", \"July\",\n    \"August\", \"September\", \"October\",\n    \"November\", \"December\"\n  ];\n  \n  month = month.replace(/^0+/, '');\n  day = day.replace(/^0+/, '')\n  let monthInText = months[month-1];\n  \n\n  return <label>{moment(date).fromNow() + ', ' + day + ' ' + monthInText + ' ' + year}</label>\n}","import React, {useState, useRef } from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\nimport { getThumbnails } from './getthumbnails'\nimport { errorFunction } from './error.js'\nimport '../Css/createfolder.css';\n\n//import { BrowserRouter as Router, Route, Link, Redirect}from \"react-router-dom\";\n\n\nconst CreateFolder = (props) => {\n  const [input, updateInput] = useState('')\n  const [hide, updateHide] = useState(\"none\");\n  let newFolder = props.folder\n  newFolder = newFolder.substring(5);\n\n  let uploadFolder = '';\n  const uploadModal = useRef(null);\n\n\n  const changeInput = (e) => {\n    updateInput(e.target.value)\n  }\n\n  const createFolder = () => {\n    const option = {\n      fetch: fetch,\n      accessToken: token$.value,\n    };\n    const dbx = new Dropbox(\n      option,\n    );\n    dbx.filesCreateFolderV2({\n      path: newFolder + '/'+ input,\n      autorename: false\n    })\n    .then(response => { \n       setTimeout(() => {\n         closeModal();\n       }, 2000);\n\n       dbx.filesListFolder({\n        path: newFolder,\n      \n      })\n      .then(response => {\n        props.thumbnailUpdate([]);\n        props.oldDataUpdate(response.entries)\n        props.dataUpdate(response.entries)\n        getThumbnails(dbx, response.entries)\n        \n        .then(entries => {   \n          props.thumbnailUpdate(entries)\n          })\n          .catch(function(error) {\n            console.log('CreateFolder Thumbnail 56');\n            errorFunction(error, props.updateErrorMessage)\n           });\n      })\n      .catch(function(error) {\n        console.log('CreateFolder FilesListFolder 61');\n        errorFunction(error, props.updateErrorMessage)\n       });\n\n      })\n      .catch(function(error) {\n        console.log('CreateFolder FilesCreateFolder 67');\n            errorFunction(error, props.updateErrorMessage)\n       });\n  }\n\n\n  const closeModal = () => {\n    //uploadModal.current.style.display = 'none';\n    updateHide(\"none\")\n    props.pollUpdateMode(false)\n    props.updateErrorMessage('')\n  }\n\n  const startModal = () => {\n    //uploadModal.current.style.display = 'block';\n    updateHide(\"block\")\n    updateInput(\"\");\n    props.pollUpdateMode(true)\n  }\n\n  uploadFolder = \n    <div className=\"upload-modal-folder\" style={{display: hide}} ref={ uploadModal }>\n      <label htmlFor=\"folder\" className=\"upload-folder-label\">Type in new folder name</label>\n      <input className=\"upload-folder-input\" type=\"text\" id=\"folder\" onChange={changeInput} value={input}></input>\n      <i className=\"material-icons upload-close\" id=\"testi\" onClick={ closeModal }>close</i>\n      <br /><button className=\"upload-folder-modal-button\" onClick={createFolder}>Create new Folder</button>\n    </div>\n\n\n  return(\n    <>\n      <button className=\"upload-folder-button\" onClick={ startModal }><i className=\"material-icons-outlined folder-icon-create-folder\"> create_new_folder</i>Create new folder</button>\n      { uploadFolder }\n    </>\n  )\n}\n\n\nexport default CreateFolder \n\n/*\n<label>Type in new folder name</label>\n      <input type=\"text\" onChange={changeInput}></input><br></br>\n      <button onClick={createFolder}>Create new Folder</button>\n      */","import React, {useRef, useEffect}from 'react';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$} from './store.js';\r\nimport { getThumbnails } from './getthumbnails'\r\nimport { errorFunction } from './error.js'\r\n\r\n\r\n\r\nconst Search = (props) => {\r\n  const inputRef = useRef(null);\r\n  \r\n  const { clearSearch, pollUpdateMode } = props;\r\n\r\n  useEffect(() => {\r\n    if(clearSearch === true){\r\n      inputRef.current.value = '';\r\n      pollUpdateMode(false)\r\n    }\r\n  }, [clearSearch, pollUpdateMode])\r\n\r\n  \r\n\r\n  \r\n let newFolder = props.folder.substring(5);\r\n\r\n const makeSerch = (e) => {\r\n    const option = {\r\n        fetch: fetch,\r\n        accessToken: token$.value\r\n      };\r\n      const dbx = new Dropbox(\r\n        option,\r\n      );      \r\n    if(e.target.value.length < 1){  \r\n      props.pollUpdateMode(false)\r\n      \r\n\r\n      dbx.filesListFolder({\r\n        path: props.folder.substring(5),\r\n      \r\n            }).then(response =>{\r\n              props.thumbnailUpdate([])\r\n              props.dataUpdate(response.entries)\r\n              props.oldDataUpdate(response.entries)\r\n  \r\n              getThumbnails(dbx, response.entries)\r\n\r\n                    .then(entries => {   \r\n                      props.thumbnailUpdate(entries)\r\n                      })\r\n                      .catch(function(error) {\r\n                        console.log('Search Thumbnail 52');\r\n                        errorFunction(error, props.updateErrorMessage)\r\n                      });\r\n            })\r\n            .catch(function(error) {\r\n              console.log('Search FilesListFolder 57');\r\n              errorFunction(error, props.updateErrorMessage)\r\n            });\r\n            props.updateErrorMessage('')\r\n    }\r\n    if(e.target.value.length > 0){\r\n     //props.clearSearchUpdate(false)\r\n      props.pollUpdateMode(true)\r\n      \r\n      dbx.filesSearch({\r\n        path: newFolder,\r\n        query: e.target.value,\r\n      })\r\n\r\n      .then(response => {\r\n        let noResult = [{\".tag\": 'file', id: 1, noSearchResult: 'noResult'}]\r\n        if (response.matches.length === 0){\r\n          props.dataUpdate(noResult)\r\n        }\r\n        else{\r\n         props.clearSearchUpdate(false)\r\n          props.thumbnailUpdate([])\r\n         \r\n         \r\n          let newArr = []\r\n          for (let i of response.matches){\r\n            newArr.push(i.metadata) \r\n          }\r\n          props.dataUpdate(newArr) \r\n\r\n        }\r\n       \r\n\r\n      })\r\n    }\r\n    props.updateErrorMessage('')\r\n  }\r\n    \r\nreturn (\r\n  \r\n    <>\r\n    <i className=\"material-icons header-serach-icon\">search</i>\r\n    <input className=\"header-search\" placeholder=\"Search...\" type=\"text\" onChange={makeSerch} ref={inputRef} />\r\n   \r\n    </>\r\n    )\r\n}\r\n\r\nexport default Search;\r\n\r\n","import React from 'react';\nimport { NavLink} from \"react-router-dom\";\nimport withBreadcrumbs from 'react-router-breadcrumbs-hoc';\nimport '../Css/breadcrumbs.css';\n\n\n\nconst Breadcrumbs = withBreadcrumbs ([{ path: '/', breadcrumb: null }]) (({ breadcrumbs})=> {\n  //console.log(breadcrumbs);\n  \n\n  return (\n  \n    <>\n    <i className=\"material-icons-outlined breadcrumb-home\" >home</i>\n      {breadcrumbs.map(({\n        match,\n        breadcrumb,\n        location\n        \n      }) => (\n       \n        <span key={match.url}>\n          <NavLink to={match.url} className=\"breadcrumb-link\"> {breadcrumb} \n          </NavLink><i className=\"material-icons breadcrumb\">arrow_right</i>\n        </span>\n      ))}\n    <br />\n    </>\n  );\n});\n\n\n\nexport default Breadcrumbs;\n","import React, {useState,useRef} from 'react';\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\nimport '../Css/upload.css';\nimport { getThumbnails } from './getthumbnails';\nimport { errorFunction } from './error.js'\n\n\n\nconst UploadFile = (props) => {\n  const [uploadMessage, updateMessage] = useState(null)\n  let uploadFile = '';\n\n  let newFolder = props.folder\n  newFolder = newFolder.substring(5);\n  \n  const inputRef = useRef(null);\n  const uploadModal = useRef(null);\n  \n  const upload = (e) => {\n    e.preventDefault();\n    const fileNodeList = inputRef.current.files;\n    console.log(fileNodeList)\n    if(fileNodeList.length === 0){\n      return;\n    }\n\n    const filesiZeLimit = 150 * 1024 * 1024;\n    const fileList = Array.from(fileNodeList)\n    \n    \n\n    const option = {\n      fetch: fetch,\n      accessToken: token$.value,\n    };\n    const dbx = new Dropbox (\n      option,\n    );\n \n    \n    \n      updateMessage(<><div>Upload in progress</div><div className=\"uploadLds-ring\"><div></div><div></div><div></div><div></div></div></>)\n      \n      \n\n    \n      if(fileList[0].size < filesiZeLimit){\n       \n        dbx.filesUpload({  \n          \n          contents: fileList[0],\n          path: newFolder + '/' + fileList[0].name,\n         \n          })\n\n              .then(function(response) {\n                updateMessage('Upload done')\n                setTimeout(() => {\n                  closeModal();\n                  updateMessage(null)\n                }, 2500);\n                \n               // props.upload(response)\n                console.log(props)       \n                console.log(response);\n\n                dbx.filesListFolder({\n                  path: newFolder,\n                })\n                .then(response => {\n                  console.log(response)\n                  props.thumbnailUpdate([]);\n                  props.dataUpdate(response.entries)\n                  props.oldDataUpdate(response.entries)\n                  getThumbnails(dbx, response.entries)\n                  .then(entries => {   \n                    props.thumbnailUpdate(entries)\n                    })\n                    .catch(function(error) {\n                      errorFunction(error, props.updateErrorMessage)\n                      console.log('UploadFile Thumbnail 67');\n                     });\n                })\n                .catch(function(error) {\n                  errorFunction(error, props.updateErrorMessage)\n                  console.log('UploadFile FileListFolder 72');\n                 });\n              })\n              .catch(function(error) {\n                errorFunction(error, props.updateErrorMessage)\n                  console.log('UploadFile FileUpload 77');\n              });\n      } else {\n        const maxBlob = 8 * 1000 * 1000; // 8Mb - Dropbox JavaScript API suggested max file / chunk size\n        var workItems = [];     \n      \n        var offset = 0;\n        while (offset < fileList[0].size) {\n          var chunkSize = Math.min(maxBlob, fileList[0].size - offset);\n          workItems.push(fileList[0].slice(offset, offset + chunkSize));\n          offset += chunkSize;\n        } \n          \n        const task = workItems.reduce((acc, blob, idx, items) => {\n          if (idx === 0) {\n            console.log(idx)\n            // Starting multipart upload of file\n            return acc.then(function() {\n              console.log('start')\n              updateMessage(<><div>Upload in progress</div><div className=\"uploadLds-ring\"><div></div><div></div><div></div><div></div></div></>)\n              return dbx.filesUploadSessionStart({ close: false, contents: blob})\n                        .then(response => response.session_id)\n              });          \n          } else if (idx < items.length-1) { \n            console.log('append') \n            // Append part to the upload session\n            return acc.then(function(sessionId) {\n             var cursor = { session_id: sessionId, offset: idx * maxBlob };\n             return dbx.filesUploadSessionAppendV2({ cursor: cursor, close: false, contents: blob }).then(() => sessionId); \n            });\n          } else {\n            // Last chunk of data, close session\n            return acc.then(function(sessionId) {\n              var cursor = { session_id: sessionId, offset: fileList[0].size - blob.size };\n              var commit = { path: newFolder + '/' + fileList[0].name, mode: 'add', autorename: true, mute: false };              \n              return dbx.filesUploadSessionFinish({ cursor: cursor, commit: commit, contents: blob });           \n            });\n          }          \n        }, Promise.resolve());\n        \n        task.then(function(result) {      \n          //props.upload(result)\n          updateMessage('Upload done')\n          setTimeout(() => {\n            closeModal();\n            updateMessage(null)\n          }, 3000);\n          console.log(result)\n          dbx.filesListFolder({\n            path: newFolder,\n          })\n          .then(response => {\n            console.log(response)\n            props.thumbnailUpdate([]);\n            props.dataUpdate(response.entries)\n            props.oldDataUpdate(response.entries)\n            getThumbnails(dbx, response.entries)\n            .then(entries => {   \n              props.thumbnailUpdate(entries)\n              })\n              .catch(function(error) {\n                errorFunction(error, props.updateErrorMessage)\n                  console.log('UploadFile Thumbnail 138');\n            });\n          })\n          .catch(function(error) {\n            errorFunction(error, props.updateErrorMessage)\n            console.log('UploadFile FileListFolder 143');\n           });\n        })\n        .catch(function(error) {\n          errorFunction(error, props.updateErrorMessage)\n          console.log('UploadFile Filesupload 148');\n        });\n      }\n        \n\n    \n    \n   inputRef.current.value = '';\n  }\n\n    const closeModal = () => {\n      uploadModal.current.style.display = 'none';\n      props.pollUpdateMode(false)\n      props.updateErrorMessage('')\n    }\n\n    const startModal = () => {\n      uploadModal.current.style.display = 'block';\n      props.pollUpdateMode(true)\n    }\n\n      uploadFile = <div className=\"upload-modal-files\" ref={ uploadModal }>\n      <input type=\"file\" className=\"upload-input\" ref={inputRef}></input>\n      <i className=\"material-icons upload-close\" onClick={ closeModal }>close</i>\n      <br /><input type=\"submit\" className=\"upload-submit\" onClick={upload} value=\"Upload files\"></input>\n      <label className=\"upload-label\">{uploadMessage}</label></div>\n\n  return(\n    <>\n    <button className=\"upload-file-button\" onClick={ startModal }>Upload files</button>\n    { uploadFile }\n    </>\n  )\n  \n}\n\nexport default UploadFile;","import React, {useState, useEffect, useRef} from 'react';\r\nimport ReactCountryFlag from 'react-country-flag';\r\nimport { Dropbox } from 'dropbox';\r\nimport {token$} from './store.js';\r\nimport { errorFunction } from './error.js'\r\nimport '../Css/userAccount.css';\r\n\r\nconst UserAccount = (props) => {\r\nconst photoRef = useRef(null);  \r\nconst [name, updateName] = useState(\"Name Lastname\");\r\nconst [mail, updateMail] = useState(\"name@domain.com\");\r\nconst [photoUrl, updatePhotUrl] = useState(null);\r\nconst [country, updateCountry] = useState(\"us\");\r\n\r\n\r\n  useEffect(() => { \r\n    const option = {\r\n      fetch: fetch,\r\n      accessToken: token$.value\r\n    };\r\n    const dbx = new Dropbox(\r\n      option,\r\n    );\r\n    dbx.usersGetCurrentAccount(\r\n    )\r\n    .then(response => {\r\n      updateName(response.name.display_name)\r\n      updateMail(response.email)\r\n      updatePhotUrl(response.profile_photo_url)\r\n      updateCountry(response.country)\r\n    })\r\n    .catch(error => {\r\n      errorFunction(error, props.updateErrorMessage)\r\n      console.log('UserAccount userGetCurrentAccount 34');\r\n    });\r\n\r\n   },[ props.updateErrorMessage ])\r\n\r\nconst onMouseOverPhoto = (e) => {\r\n  photoRef.current.style.display = \"block\";\r\n}\r\nconst onMouseOutPhoto = (e) => {\r\n  photoRef.current.style.display = \"none\";\r\n}\r\n\r\n  let x = mail.lastIndexOf(\"@\") + 1;\r\n  let y = mail.substring(x);\r\n  let url = \"https://www.\" + y;\r\n  let countryFlag = country.toLowerCase();\r\n  let checkPhoto;\r\n  if (!photoUrl){\r\n    checkPhoto = \r\n    <>\r\n    <img style={{border: \"1px solid grey\"}} alt=\"userPhoto\" onMouseOver={onMouseOverPhoto} onMouseOut={onMouseOutPhoto} className=\"userPhoto\" src={ require(\"../Img/profile-img-none.png\")}/>\r\n    <img style={{border: \"1px solid grey\"}} alt=\"userPhotoBig\" ref={photoRef} className=\"userPhotoBig\" src={ require(\"../Img/profile-img-none.png\")}/>\r\n    </>\r\n  }\r\n  else{\r\n    checkPhoto = \r\n    <>\r\n    <img style={{border: \"1px solid grey\"}} alt=\"userPhoto\" onMouseOver={onMouseOverPhoto} onMouseOut={onMouseOutPhoto} className=\"userPhoto\" src={photoUrl}/>\r\n    <img style={{border: \"1px solid grey\"}} alt=\"userPhotoBig\" ref={photoRef} className=\"userPhotoBig\" src={photoUrl}/>\r\n    </>\r\n  }\r\n\r\nreturn(\r\n  <div className=\"userMain\">\r\n  <div className=\"userFlag\"><ReactCountryFlag code={countryFlag} svg /></div>\r\n  <span className=\"userName\"><a title=\"Open your mail\" className=\"userMailAtag\" href={url} target=\"_blank\" without=\"true\" rel=\"noopener noreferrer\">{name}</a></span>  \r\n  {checkPhoto}\r\n  </div>\r\n)\r\n\r\n}\r\nexport default UserAccount;","import React from 'react';\r\nimport { updateToken, updateFavoriteToken } from './store.js'\r\nimport {token$} from './store.js';\r\n\r\nconst LogOut = (props) => {\r\n    const logOut = () =>{\r\n        updateToken(null);\r\n        props.updateTokenState(token$.value);\r\n        updateFavoriteToken(null);\r\n    }\r\n\r\nreturn(\r\n    <>\r\n    <button className=\"headerLogOutBtn\" onClick={logOut}>LogOut</button>\r\n    </>\r\n)\r\n  }\r\n  export default LogOut;","import React, {useState, useEffect} from 'react';\nimport {favorites$, updateFavoriteToken} from './store.js';\nimport {Link} from \"react-router-dom\";\nimport {downloadFile} from \"./dowload\"\nimport { Dropbox } from 'dropbox';\nimport {token$} from './store.js';\nimport { errorFunction } from './error.js'\n\n/*\n\nGOAL: \nWhen the user clicks on an Add_to_Favorites-button, the chosen file should be copied to a new_state,\nwith all the needed data.\n\nThe new_state should be used to render a favorite_list, which should be displayed in a side_menu on the right of the main_content.\n\n- When the user deletes or renames the file, the file should also be deleted, or renamed, in the favorite_list.\nOR ELSE: The demand is that the error caused by the file being used in any way from the favorite_list, after having been deleted, should be handled.\nA direct update of the favorite_state is not required, but obviously better.\n\n- When a user logs out, the local storage should be cleaned out, so that no favorites exists once the user logs back in. \n\n=== Ha state i rooten.\n=== Använd behavioursubject för att uppdatera favoritestatet.\n=== Kör en toggle onClick - Om id inte finns i listan, lägg till objektet (objekt ska in i state, inte id), om id finns i listan, ta bort.\n*/\n\nconst FavoriteList = (props) => {\n  \n/////////////////////////////////////////////////////////////////////////////////////////////////\n  const [fav, updateFav] = useState([]);\n  \n/////////////////////////////////////////////////////////////////////////////////////////////////\n  useEffect(() => {\n    const subscription = favorites$.subscribe(updateFav);\n    return () => subscription.unsubscribe();\n  }, []);\n/////////////////////////////////////////////////////////////////////////////////////////////////\n  let sortData = fav.sort((a, b) => (a[\".tag\"] > b[\".tag\"]) ? 1 : -1).reverse();\n/////////////////////////////////////////////////////////////////////////////////////////////////\nuseEffect(() => {\n\n\n  const option = {\n    fetch: fetch,\n    accessToken: token$.value\n  };\n  \n  const dbx = new Dropbox(\n    option,\n  );\n\n  setInterval(() => {\n    dbx.filesListFolder({\n      path: \"\",\n      recursive: true\n    \n    })\n    .then(response => {\n      if (favorites$.value === null){\n        updateFavoriteToken([])\n      }\n      else{\n        let fav = [...favorites$.value]\n        let chekId = response.entries.map(x => x.id)\n        let checkIdFav = fav.map(x => x.id)\n        let z = chekId.filter(function(val) {\n        return checkIdFav.indexOf(val) !== -1;\n        \n        });\n        let newFavArr = []\n        for (let i = 0; i < z.length; i++){\n          let newFav = fav.find( data => data.id === z[i] )\n          newFavArr.push(newFav)\n        }\n     // console.log(\"Poll Fav\")\n      updateFavoriteToken(newFavArr)\n    }\n    })\n    }, 5000);\n}, []);\nconst download = (e) =>{\n  downloadFile(e, props.updateErrorMessage)\n}\n\n    let data = sortData;\n    const renderFavorites = (data) => {\n       \n      const check = (x) => {\n          if (x.id === data.id && x.name !== data.name){\n            data = x\n          }\n        }\n      props.data.map(check)\n        /////IF FILES STARTS////\n        if(data[\".tag\"] === 'file'){ \n              return( //FILES\n                <tr\n                    key={data.id} \n                    data-name={data.name} \n                    data-folder={data.path_lower} \n                    data-tag={data[\".tag\"]}\n                    style={{background: \"white\", zIndex: \"0\"}}\n                    className=\"listFiles-favorites\"\n                    >\n                  <td \n                    title={\"Download: \" + data.name} \n                    data-name={data.name} \n                    data-folder={data.path_lower}\n                    data-tag={data[\".tag\"]} onClick={download}\n                    style={{cursor: \"pointer\"}}>\n                    <i className=\"material-icons-outlined filesFolders\">insert_drive_file</i>\n                  </td>\n                  <td\n                    title={\"Download: \" + data.name} \n                    data-name={data.name} \n                    data-folder={data.path_lower} \n                    data-tag={data[\".tag\"]} onClick={download}\n                    className=\"listFolderLink\"\n                  >\n                  {data.name}\n                  </td>\n                </tr>\n              )\n        }\n        /////IF FILES ENDS////\n\n\n        const renameBrackets = (rename, newUrl) =>{\n          const option = {\n            fetch: fetch,\n            accessToken: token$.value\n          };\n          \n          const dbx = new Dropbox(\n            option,\n          );\n          dbx.filesMoveV2({\n            from_path: rename,\n            to_path: newUrl,\n            autorename: true\n          })\n          .then(response => {\n            dbx.filesListFolder({\n              path: props.folder.substring(5),\n            })\n            .then(response => {\n              props.dataUpdate(response.entries)\n            })\n            \n          })\n          .catch(error => {\n            console.log('FavoritList FilesMove2 151');\n            errorFunction(error, props.updateErrorMessage)\n          });\n        \n        }\n\n      /////IF FOLDER STARTS////\n      if(data[\".tag\"] === 'folder'){ //FOLDER\n        if (data.name.includes(\"(\")){\n          let brak = data.name.replace(/[()]/g,'')\n          let newName = data.path_lower.substring(0, data.path_lower.lastIndexOf(\"/\")) + \"/\" + brak;\n          renameBrackets(data.path_lower, newName)\n          data.name = brak\n        }\n\n      return( //FOLDERS\n        <tr style={{background: \"white\"}} key={data.id} className=\"listFiles-favorites\" data-name={data.name} data-folder={data.path_lower} data-tag={data[\".tag\"]}>\n          <td>\n          <i className=\"material-icons filesFolders\">folder</i>\n          </td>\n          <td>\n            <Link className=\"listFolderLink\" to={\"/home\" + data.path_lower}>{data.name}</Link>\n          </td>\n        </tr>\n          )\n        }\n        /////IF FOLDER ENDS//// \n    }\n\n    let renderingFavorites = data.map(renderFavorites);\n    \n    return (\n        <div className=\"favorite_list\" style={{position: \"relative\", top: \"68px\", left: \"8px\"}} >\n          <span className=\"favoriteTitle-my\">\n          <i style={{color: \"#ffd900\", WebkitTextStroke: \"0.5px #4d4d4d\", fontSize: \"22px\"}} className=\"material-icons star\">star</i> MyFavorites</span><div className=\"favoriteList-space\"></div>\n          <table>\n            <tbody>\n              {renderingFavorites}\n            </tbody>\n          </table>\n        </div>\n    )\n}\n\nexport default FavoriteList;","import React, {useState, useEffect, useRef} from 'react';\nimport { Dropbox } from 'dropbox';\nimport { getThumbnails } from './getthumbnails'\nimport { Redirect, Link } from \"react-router-dom\";\nimport {token$} from './store.js';\nimport ListItems from './listitems';\nimport CreateFolder from './createfolder';\nimport Search from './search';\nimport Breadcrumbs from './breadcrumbs';\nimport UploadFile from './uploadfile';\nimport UserAccount from './userAccount';\nimport { Helmet } from \"react-helmet\";\nimport LogOut from './logout'\nimport FavoriteList from \"./favoriteList.js\"\nimport {favorites$} from './store'\nimport {updateFavoriteToken} from './store'\nimport { errorFunction } from './error.js'\nimport '../Css/home.css';\n\n\n\nconst Home = (props) => {\n\n\n  const [token, updateTokenState] = useState(token$.value)\n  const [data, updateData] = useState([]);\n  const [thumbnails, updateThumbnails] = useState([])\n  const [thumbnailsLoaded, updateThumbnailsLoaded] = useState(false);\n  const [favorites, updateFavorites] = useState([]);\n  const [oldData, updateOldData] = useState([])\n  const [pollMode, updatePollMode] = useState(false)\n  const [clearSearch, updateClearSearch] = useState(true)\n  const [errorMessage, updateErrorMessage] = useState('')\n  \n\n  const dataRef = useRef([]);\n\n  useEffect(() => {\n    dataRef.current = data;\n  }, [data]);\n\n  useEffect(() => {\n    if (errorMessage === ''){\n      return;\n    }\n    console.log('error')\n    setTimeout(() => {\n      updateErrorMessage(\"\")\n    }, 5000);\n  }, [errorMessage]);\n\n  useEffect(() => {\n    const subscription = favorites$.subscribe(updateFavorites);\n    return () => subscription.unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (thumbnails.length === data.length) {\n      const isLoaded = thumbnails.every((x, idx) => {\n        return x[\".tag\"] === \"failure\" || x.metadata.id === data[idx].id;\n      });\n\n      updateThumbnailsLoaded(isLoaded);      \n    } else {\n      updateThumbnailsLoaded(false);\n    }\n\n  }, [data, thumbnails]);\n\n\n    useEffect(() => {\n\n      \n      \n       if(pollMode){\n        return;\n      }\n        \n      const poll = setInterval(() => {\n        //console.log('Useffect körs')\n        const option = {\n          fetch: fetch,\n          accessToken: token$.value\n        };\n        const dbx = new Dropbox(\n          option,\n        );\n\n        const dataTmp = dataRef.current;\n\n        \n        if(props.location.pathname === '/home'){\n          dbx.filesListFolder({\n            path: '',\n          \n          })\n          .then(response => {\n\n            if (dataRef.current !== dataTmp) {\n              \n              return;\n            }\n           \n           //updateOldData(data)\n            \n            let responseRev = response.entries.map(x => x.rev).filter(y => y !== undefined)\n            let oldrespRev = oldData.map(x => x.rev).filter(y => y !== undefined)\n            let responseName = response.entries.map(x => x.name).filter(y => y !== undefined)\n            let oldrespName = oldData.map(x => x.name).filter(y => y !== undefined)\n\n            const diffRev = responseRev.filter(el => !oldrespRev.includes(el));\n            const diffName = responseName.filter(el => !oldrespName.includes(el))\n\n           \n             if(response.entries.length < oldData.length){\n              \n              updateThumbnails([])\n              updateData(response.entries)\n            }\n            \n\n            if (response.entries.length !== oldData.length  || diffRev.length > 0 || diffName.length > 0){\n              updatePollMode(true)\n              console.log('poll körs root')\n              console.log('poll stoppas tillfälligt root')\n              \n                getThumbnails(dbx, response.entries)\n\n                .then(entries => {\n                 \n                  updateData(response.entries)\n                  updateOldData(response.entries)\n                  updateThumbnails(entries)\n                  \n                }) \n                .then(rep => {\n                  updatePollMode(false)\n                  console.log('Poll startar igen root')\n\n                })\n                .catch(function(error) {\n                  errorFunction(error, updateErrorMessage)\n                  console.log('Home Thumbnails rad 136');\n                 });\n              \n\n            }\n            else{\n              console.log('Poll har inte körts för root')\n              return;\n            }\n\n          })\n          \n          .catch(function(error) {\n            errorFunction(error, updateErrorMessage)\n            console.log('Home filesrequest 150');\n           });\n    \n        }\n        else{\n          \n          let newFolder = props.location.pathname;\n          newFolder = newFolder.substring(5)\n    \n          dbx.filesListFolder({\n            path: newFolder,\n          \n          })\n          .then(response => {\n            \n            if (dataRef.current !== dataTmp) {\n              \n              return;\n            }\n\n            //updateOldData(response.entries)\n\n            let responseRev = response.entries.map(x => x.rev).filter(y => y !== undefined)\n            let oldrespRev = oldData.map(x => x.rev).filter(y => y !== undefined)\n            let responseName = response.entries.map(x => x.name).filter(y => y !== undefined)\n            let oldrespName = oldData.map(x => x.name).filter(y => y !== undefined)\n\n            const diffRev = responseRev.filter(el => !oldrespRev.includes(el));\n            const diffName = responseName.filter(el => !oldrespName.includes(el))\n\n\n            \n            if(response.entries.length < oldData.length){\n              \n              updateThumbnails([])\n              updateData(response.entries)\n              \n            }\n\n\n            if(response.entries.length !== oldData.length || diffRev.length > 0 || diffName.length > 0){\n         \n              updatePollMode(true)\n              console.log('poll körs folder')\n              console.log('poll stoppas tillfälligt folder')\n\n              getThumbnails(dbx, response.entries)\n\n\n               .then(entries => {\n                updateData(response.entries)\n                updateOldData(response.entries)\n                updateThumbnails(entries)\n                \n              })\n              .then(rep => {\n                updatePollMode(false)\n                console.log('Poll startar igen folder')\n              })\n              \n              .catch(function(error) {\n                errorFunction(error, updateErrorMessage)\n                console.log('Home Poll folder 218');\n               });\n              }\n              else{\n                console.log('Poll har inte körts för folder')\n                return;\n              }\n\n          })\n        \n          .catch(function(error) {\n            errorFunction(error, updateErrorMessage)\n            console.log('Home Poll interval 230');\n           });\n        }\n      }, 5000);\n      \n      \n    \n    return () => clearInterval(poll);\n\n    }, [data, oldData, props.location.pathname, pollMode]) \n\n\n\n    \n  useEffect(() => {\n    \n    \n    if(!clearSearch){\n      return;\n    }\n\n    console.log('render Home')\n    const option = {\n      fetch: fetch,\n      accessToken: token$.value\n    };\n    const dbx = new Dropbox(\n      option,\n    );\n\n    \n\n    if(props.location.pathname === '/home'){\n      dbx.filesListFolder({\n        path: '',\n      \n      })\n      .then(response => {\n\n\n\n        console.log('bilder börjar hämtas')\n          updateData(response.entries)\n          updateOldData(response.entries)\n\n        getThumbnails(dbx, response.entries)\n        \n        .then(entries => {  \n          if (response.entries !== dataRef.current) {\n            return;\n          }\n          \n          console.log('bilder klara')\n            updateThumbnails(entries)\n            \n          })\n          .catch(function(error) {\n            errorFunction(error, updateErrorMessage)\n            console.log('Home filesrequest folder 278');\n           });\n           \n\n      })\n      \n      .catch(function(error) {\n        errorFunction(error, updateErrorMessage)\n            console.log('Home Update Poll 286');\n       });\n\n     \n    }\n    else{\n      \n      let newFolder = props.location.pathname;\n      newFolder = newFolder.substring(5)\n\n      console.log(\"FETCH\");\n\n      dbx.filesListFolder({\n        path: newFolder,\n      \n      })\n      .then(response => {\n        \n        \n        \n        updateThumbnails([]);\n        updateData(response.entries)\n        updateOldData(response.entries)\n\n\n        console.log(response.entries.length)\n       console.log('bilder börjar hämtas')\n        getThumbnails(dbx, response.entries)\n        \n      \n          .then(entries => { \n            if (response.entries !== dataRef.current) {\n              return;\n            }  \n            console.log('bilder klara')\n            updateThumbnails(entries)\n         \n            })\n            \n            .catch(function(error) {\n              errorFunction(error, updateErrorMessage)\n              console.log('Home Request newfolder 321');\n             });\n\n      })\n      .catch(function(error) {\n        errorFunction(error, updateErrorMessage)\n        console.log('Home filesrequest 327');\n       });\n    }\n      updateClearSearch(false)\n\n  }, [props.location.pathname, clearSearch])\n\n\n  const dataUpdate = (data) => {\n    //updateOldData(data)\n    updateData(data)\n  }\n\n  const thumbnailUpdate = (data) => {\n    updateThumbnails(data)\n  } \n\n  const oldDataUpdate = (data) => {\n    updateOldData(data)\n    \n  }\n\n  const favUpdate = (data) => {\n    updateFavorites(data);\n    updateFavoriteToken(data);\n  }\n\n  const pollUpdateMode = (bool) => {\n      updatePollMode(bool)\n  }\n  const upFavTok = (arr) => {\n    updateFavoriteToken(arr)\n  }\n\n  const clearSearchUpdate = (bool) => {\n    updateClearSearch(bool)\n    \n  }\n\n \n  \n  if(token === null){\n    return <Redirect to=\"/\" />\n  }\n  \n  return(\n    <>\n    <Helmet>\n      <title>MyBOX</title>\n    </Helmet>\n    \n    <header className=\"mainHeader\">\n      <div className=\"header-logo-wrap\"><img id=\"header-logo\" src={ require('../Img/Logo_mybox.png') } alt=\"My Box logo\"/></div>\n        <span className=\"headerContent\">\n          <Search updateErrorMessage={ updateErrorMessage } pollUpdateMode={pollUpdateMode} searchData={data} folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} clearSearch={clearSearch} clearSearchUpdate={clearSearchUpdate} />\n          <span><UserAccount updateErrorMessage={ updateErrorMessage }/></span>\n          <span><LogOut updateTokenState={updateTokenState}/></span>\n        </span>\n    </header>\n    <div className=\"mainWrapper\">\n      <aside className=\"leftSide\">\n        \n        <div className=\"left-link-wrap\"><UploadFile updateErrorMessage={ updateErrorMessage } folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} pollUpdateMode={pollUpdateMode}></UploadFile><br></br><br></br>\n        <CreateFolder updateErrorMessage={ updateErrorMessage } folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} pollUpdateMode={pollUpdateMode}></CreateFolder></div>\n      </aside>\n      <main className=\"mainMain\">\n      <label onClick={() => updateClearSearch(true)}>\n      <Breadcrumbs clearSearchUpdate={clearSearchUpdate}/><br /></label>\n      <p style={{ color: 'red' }}> { errorMessage }</p>\n        <table className=\"mainTable\">\n          <thead>\n            <tr className=\"home-thead-tr\">\n            <th colSpan=\"2\">\n              Name\n            </th>\n            <th>\n              File size\n            </th>\n            <th>\n              Last edited\n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Ren\n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Mov \n            </th>\n            <th style={{ textAlign: 'center' }}>\n             Cop\n            </th>\n            <th style={{ textAlign: 'center' }}>\n              Fav\n            </th>\n            <th style={{ textAlign: 'center' }}>\n              Del\n            </th>\n            </tr>\n          </thead>\n          <tbody>\n            <ListItems updateErrorMessage={ updateErrorMessage } favorites={favorites} favUpdate={favUpdate} thumbnailsLoaded={thumbnailsLoaded} folder={props.location.pathname} dataUpdate={dataUpdate} thumbnailUpdate={thumbnailUpdate} oldDataUpdate={oldDataUpdate} renderData={data} thumbnails={thumbnails} clearSearchUpdate={clearSearchUpdate} pollUpdateMode={pollUpdateMode}></ListItems>\n          </tbody>\n        </table>\n      </main>\n      <aside className=\"rightSide\">\n        <div className=\"aside\"></div>\n         <FavoriteList updateErrorMessage={ updateErrorMessage } upFavTok={upFavTok} data={data} />\n      </aside>\n    </div>\n    </>\n  )\n}\n\nexport default Home;\n\n\n\n","import React from 'react';\nimport Login from './Components/login';\nimport Auth from './Components/auth';\nimport Home from './Components/home';\nimport { BrowserRouter as Router, Route}from \"react-router-dom\";\n\n\n\n\nfunction App() {\n\n  return (\n    <Router basename=\"/mandatory-advanced-js5\">\n    <div className=\"App\">\n    \n    \n    </div>\n    \n    <Route exact path='/' component={Login} />\n    <Route path='/auth' component={Auth} />\n    <Route path='/home' component={Home} />\n\n   \n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}