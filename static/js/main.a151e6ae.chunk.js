(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){},21:function(e,t,a){},22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQjQzMzMwQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQjQzMzMxQjdBQjExRTJBOENBQjQwMjJFMjM4NjcyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REFCNDMzMkVCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFCNDMzMkZCN0FCMTFFMkE4Q0FCNDAyMkUyMzg2NzIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55zlruAAAI6ElEQVR42uydPU8bWRSG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"},31:function(e,t,a){e.exports=a(60)},36:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){e.exports=a.p+"static/media/Logo_mybox.91350eb7.png"},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(23),c=a.n(o),r=(a(36),a(2)),i=a(11),s=(a(44),function(){var e=new r.Dropbox({clientId:"bvtwa87o7e9bfk6",fetch:fetch});return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"MyBOX Connect")),l.a.createElement("div",{className:"loginMain"},l.a.createElement("a",{className:"loginLink",href:e.getAuthenticationUrl("http://localhost:3000/auth")},l.a.createElement("button",{className:"loginBtn"},"Connect"))))}),u=a(1),d=a(62),m=new d.a(window.localStorage.getItem("token")||null);function f(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),m.next(e)}var p=new d.a(JSON.parse(window.localStorage.getItem("favorites")||"[]"));function h(e){e?window.localStorage.setItem("favorites",JSON.stringify(e)):window.localStorage.removeItem("favorites"),p.next(e)}var b=a(3),v=a(6),E=(a(45),function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),r=Object(u.a)(c,2),s=r[0],d=r[1];return Object(n.useEffect)(function(){console.log("render Auth");var e=window.location.hash;"#error_description=The+user+chose+not+to+give+your+app+access+to+their+Dropbox+account.&error=access_denied"!==e?(f(e.match(/#(?:access_token)=([\S\s]*?)&/)[1]),o(!0)):d(!0)},[]),s?l.a.createElement(l.a.Fragment,null,l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"MyBOX Auth")),l.a.createElement("div",{className:"authMainLoader"},l.a.createElement("div",{className:"authProgress"},l.a.createElement("b",null,l.a.createElement("p",null,"No access.",l.a.createElement("br",null),"Reload page.")),l.a.createElement(b.c,{to:"/"},l.a.createElement("button",{className:"modalBtn"},"Reload"))))):a?l.a.createElement(v.a,{to:{pathname:"/home",state:{isLoggedIn:a}}}):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"MyBOX Auth")),l.a.createElement("div",{className:"authMainLoader"},l.a.createElement("div",{className:"authProgress"},l.a.createElement("div",{className:"lds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("p",null,"Loading page..."))))}),g=a(26),y=a.n(g),U=a(27),N=a.n(U),w=function(e,t){var a=y()(t,25).map(function(t){return e.filesGetThumbnailBatch({entries:t.map(function(e){return{path:e.id,format:{".tag":"jpeg"},size:{".tag":"w32h32"},mode:{".tag":"strict"}}})})});return Promise.all(a).then(function(e){return N()(e.map(function(e){return e.entries}))})};a(52);var O=a(28),k=a.n(O);var j=function(e){if("folder"===e.target.dataset.tag)return null;if("file"===e.target.dataset.tag){var t={fetch:fetch,accessToken:m.value};new r.Dropbox(t).filesGetTemporaryLink({path:e.target.dataset.folder}).then(function(e){var t=document.createElement("a");t.href=e.link,document.body.appendChild(t),t.click(),document.body.removeChild(t)}).catch(function(e){console.log(e)})}},x=a(5),M=(a(54),function(e){var t,a=Object(n.useRef)(null),o=Object(n.useState)(""),c=Object(u.a)(o,2),i=c[0],s=c[1];return t=l.a.createElement("div",{style:{pointerEvents:"visible"},ref:a,className:"modalBack"},l.a.createElement("div",{style:{pointerEvents:"visible"},className:"modal"},l.a.createElement("div",{style:{pointerEvents:"visible"},className:"mainModal"},l.a.createElement("h2",{style:{color:"black"}},"Delete ! ! !"),l.a.createElement("p",{className:"modalText"},"Do you want to delete ",e.tag," ",e.name," ??"),l.a.createElement("button",{className:"modalBtn yes",onClick:function(){var t=e.folder.substring(5),n={fetch:fetch,accessToken:m.value},l=new r.Dropbox(n);l.filesDeleteV2({path:i}).then(function(a){for(var n=0;n<p.value.length;n++)if(p.value[n].id===a.metadata.id){var o=Object(x.a)(p.value);o.splice(n,1),h(o)}l.filesListFolder({path:t}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(l,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),a.current.style.visibility="hidden",a.current.style.zIndex="0",e.pollUpdateMode(!1)}},"YES"),l.a.createElement("button",{className:"modalBtn no",onClick:function(){a.current.style.visibility="hidden",document.body.style.overflowY="auto",a.current.style.zIndex="0",e.pollUpdateMode(!1)}},"NO")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0),s(t.target.dataset.path),a.current.style.visibility="visible",a.current.style.zIndex="500",document.body.style.overflowY="hidden"}}," ",l.a.createElement("i",{"data-path":e.path,className:"material-icons delete-icon"},"delete_outline")))}),F=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(u.a)(c,2),s=i[0],d=i[1],f=Object(n.useState)(""),b=Object(u.a)(f,2),v=b[0],E=b[1],g={fetch:fetch,accessToken:m.value},y=new r.Dropbox(g);return t=l.a.createElement("div",{className:"reNameBack",ref:a},l.a.createElement("div",{className:"listRenameInput"},l.a.createElement("div",{className:"listRenameText"}," Rename file"),l.a.createElement("span",{className:"listRenameClose",onClick:function(){a.current.style.display="none",document.body.style.overflowY="auto",e.pollUpdateMode(!1)}},l.a.createElement("i",{className:"material-icons"},"close")),l.a.createElement("input",{className:"listRenameInputText",style:{outline:"none"},ref:o,placeholder:"New filename...",type:"text",onChange:function(e){var t=e.target.value,a=v.lastIndexOf("."),n=v.substring(a),l=v.substring(0,v.lastIndexOf("/"));d(l+"/"+t+n)}}),l.a.createElement("button",{style:{outline:"none"},className:"listBtnRename",onClick:function(t){y.filesMoveV2({from_path:v,to_path:s,autorename:!0}).then(function(t){for(var a=0;a<p.value.length;a++)if(p.value[a].id===t.metadata.id){var n=Object(x.a)(p.value);n[a]=t.metadata,h(n)}y.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(y,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),a.current.style.display="none",document.body.style.overflowY="auto",o.current.value="",e.pollUpdateMode(!1)}},"Ok"))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0);var n=t.target.dataset.path;E(n),a.current.style.display="block",document.body.style.overflowY="hidden"}},l.a.createElement("i",{"data-path":e.path,className:"material-icons rename-icon"},"edit")))},S=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),c=Object(n.useRef)(null),i=Object(n.useRef)(null),s=Object(n.useState)(""),d=Object(u.a)(s,2),f=d[0],b=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),g=E[0],y=E[1],U={fetch:fetch,accessToken:m.value},N=new r.Dropbox(U);return t=l.a.createElement("div",{ref:a,className:"reNameBack"},l.a.createElement("div",{className:"listRenameInput"},l.a.createElement("div",{className:"listRenameText"},"Rename folder"),l.a.createElement("span",{className:"listRenameClose",onClick:function(){a.current.style.display="none",document.body.style.overflowY="auto",e.pollUpdateMode(!1)}},l.a.createElement("i",{className:"material-icons"},"close")),l.a.createElement("input",{placeholder:"New foldername...",className:"listRenameInputText",style:{outline:"none"},ref:o,type:"text",onChange:function(e){var t=e.target.value;t.includes("(")&&t.includes(")")?(c.current.style.pointerEvents="none",c.current.style.background="gray",i.current.style.display="block"):(c.current.style.pointerEvents="visible",c.current.style.background="#029BB5",i.current.style.display="none");var a=g.split("/"),n=a.slice(0,a.length-1).join("/");b(n+"/"+t)}}),l.a.createElement("button",{ref:c,className:"listBtnRename",style:{outline:"none"},onClick:function(t){N.filesMoveV2({from_path:g,to_path:f,autorename:!1}).then(function(t){for(var a=0;a<p.value.length;a++)if(p.value[a].id===t.metadata.id){var n=Object(x.a)(p.value);n[a]=t.metadata,h(n)}N.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(N,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),a.current.style.display="none",document.body.style.overflowY="auto",o.current.value="",e.pollUpdateMode(!1)}},"Ok")),l.a.createElement("div",{ref:i,className:"renameFoldeEerrorMess"},"No folder name whit ( ) !")),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(t){e.pollUpdateMode(!0);var n=t.target.dataset.path;y(n),a.current.style.display="block",document.body.style.overflowY="hidden"}},l.a.createElement("i",{"data-path":e.path,className:"material-icons rename-icon"},"edit")),"  ")},C=a(14),R=(a(20),Object(C.a)([{path:"/",breadcrumb:null}])(function(e){var t=e.breadcrumbs;return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons-outlined breadcrumb-home"},"home"),l.a.createElement(b.c,{className:"breadcrumb-link",to:"/"},"Home",l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right")),l.a.createElement(l.a.Fragment,null,t.map(function(e){var t=e.match,a=e.breadcrumb;return l.a.createElement("span",{key:t.url},l.a.createElement(b.d,{to:t.url,className:"breadcrumb-link"}," ",a),l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right"))})),l.a.createElement("br",null))})),I=(a(21),function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(u.a)(c,2),s=i[0],d=i[1],f=Object(n.useState)(""),v=Object(u.a)(f,2),E=v[0],g=v[1],y=Object(n.useState)(""),U=Object(u.a)(y,2),N=U[0],O=U[1],k=Object(n.useState)(""),j=Object(u.a)(k,2),M=j[0],F=j[1],S=Object(n.useState)(!1),C=Object(u.a)(S,2),I=C[0],B=C[1],D=Object(n.useState)([]),A=Object(u.a)(D,2),Y=A[0],T=A[1],L=window.decodeURIComponent(window.location.hash.slice(1));Object(n.useEffect)(function(t){if(I){document.body.style.overflowY="hidden",a.current.style.display="block";var n={fetch:fetch,accessToken:m.value},l=new r.Dropbox(n);"/"===L?l.filesListFolder({path:""}).then(function(t){for(var a=[],n=t.entries,l=0;l<n.length;l++)n[l].path_lower!==e.path&&a.push(n[l]);T(a)}).catch(function(e){console.log(e)}):l.filesListFolder({path:L}).then(function(t){for(var a=[],n=t.entries,l=0;l<n.length;l++)n[l].path_lower!==e.path&&a.push(n[l]);T(a)}).catch(function(e){console.log(e)})}else a.current.style.display="none"},[I,L,e.path]),Object(n.useEffect)(function(){I||(window.location.hash="/")},[I]);var z=N.substring(0,N.lastIndexOf("/")),W=function(e){g(e.target.dataset.id)},G=Y.map(function(e){if("folder"===e[".tag"])return l.a.createElement("tr",{key:e.id,className:"modal-movefiles-tr","data-name":e.name,"data-folder":e.path_display,"data-tag":e[".tag"]},l.a.createElement("td",{key:e.id,className:"modal-movefiles-td-icon"},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",{className:"modal-movefiles-td-link"},l.a.createElement(b.c,{to:e.path_lower,className:"modal-movefiles-link",onClick:W,"data-id":e.path_display},e.name)))});return t=l.a.createElement(b.b,null,l.a.createElement("div",{ref:a,className:"moveBack"},l.a.createElement("div",{className:"moveModal"},l.a.createElement("h3",{className:"movefiles-h3"},"Move files"),l.a.createElement(R,null),l.a.createElement("p",{className:"movefiles-p"},"Move ",l.a.createElement("span",{className:"movefiles-file"},e.name)," ... to ... ",l.a.createElement("span",{className:"movefiles-file"},E.slice(1))),l.a.createElement("p",null,M),l.a.createElement("table",null,l.a.createElement("tbody",null,G)),s,l.a.createElement("button",{className:"modal-movefiles-button",onClick:function(){var t=N.lastIndexOf("/"),a=N.substring(t);d("");var n={fetch:fetch,accessToken:m.value},l=new r.Dropbox(n);l.filesMoveV2({from_path:N,to_path:E+a,autorename:!1}).then(function(t){for(var a=0;a<p.value.length;a++)if(p.value[a].id===t.metadata.id){var n=Object(x.a)(p.value);n[a]=t.metadata,h(n)}F("File transfered"),l.filesListFolder({path:z}).then(function(t){console.log(e),e.thumbnailUpdate([]),e.oldDataUpdate(t.entries),e.dataUpdate(t.entries),w(l,t.entries).then(function(t){d(""),e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e),d("File / Folder with the same name already exists!")}),e.pollUpdateMode(!1)}},"Move"),l.a.createElement("i",{className:"material-icons upload-close",onClick:function(){B(!1),g(""),O(""),document.body.style.overflowY="auto",e.pollUpdateMode(!1)}},"close"),l.a.createElement("p",{ref:o,style:{display:"none"}},e.name," moved...")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(){return t=e.path,e.pollUpdateMode(!0),B(!0),void O(t);var t}}," ",l.a.createElement("i",{className:"material-icons movefiles-icon"},"swap_horiz")))}),B=a(30),D=function(e){var t=e.favorites,a=e.data;return t.find(function(e){return e.id===a.id})?l.a.createElement("button",{className:"listBtn",onClick:function(){h(t.filter(function(e){return e.id!==a.id}))}},l.a.createElement("i",{style:{color:"#ffd900",fontSize:"22px",WebkitTextStroke:"0.7px #4d4d4d"},className:"material-icons"},"star")):l.a.createElement("button",{className:"listBtn",onClick:function(){h([].concat(Object(x.a)(t),[Object(B.a)({},a)]))}},l.a.createElement("i",{className:"material-icons hoverStar"},"star"))},A=function(e){var t,a=Object(n.useRef)(null),o=Object(n.useRef)(null),c=Object(n.useState)(""),i=Object(u.a)(c,2),s=i[0],d=i[1],f=Object(n.useState)(""),p=Object(u.a)(f,2),h=p[0],v=p[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),y=g[0],U=g[1],N=Object(n.useState)(""),w=Object(u.a)(N,2),O=w[0],k=w[1],j=Object(n.useState)(!1),x=Object(u.a)(j,2),M=x[0],F=x[1],S=Object(n.useState)([]),C=Object(u.a)(S,2),I=C[0],B=C[1],D=window.decodeURIComponent(window.location.hash.slice(1));Object(n.useEffect)(function(e){if(M){document.body.style.overflowY="hidden",a.current.style.display="block";var t={fetch:fetch,accessToken:m.value},n=new r.Dropbox(t);"/"===D?n.filesListFolder({path:""}).then(function(e){B(e.entries)}).catch(function(e){console.log(e)}):n.filesListFolder({path:D}).then(function(e){B(e.entries)}).catch(function(e){console.log(e)})}else a.current.style.display="none"},[M,D]),Object(n.useEffect)(function(){M||(window.location.hash="/")},[M]);var A=function(e){v(e.target.dataset.id)},Y=I.map(function(e){if("folder"===e[".tag"])return l.a.createElement("tr",{key:e.id,className:"modal-movefiles-tr","data-name":e.name,"data-folder":e.path_display,"data-tag":e[".tag"]},l.a.createElement("td",{key:e.id,className:"modal-movefiles-td-icon"},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",{className:"modal-movefiles-td-link"},l.a.createElement(b.c,{to:e.path_lower,className:"modal-movefiles-link",onClick:A,"data-id":e.path_display},e.name)))}),T=function(){F(!1),e.pollUpdateMode(!1),v(""),U(""),document.body.style.overflowY="auto"};return t=l.a.createElement(b.b,null,l.a.createElement("div",{className:"moveBack",ref:a},l.a.createElement("div",{className:"moveModal"},l.a.createElement("h3",{className:"movefiles-h3"},"Copy files"),l.a.createElement(R,null),l.a.createElement("p",{className:"movefiles-p"},"Copy ",l.a.createElement("span",{className:"movefiles-file"},e.name)," ... to ... ",l.a.createElement("span",{className:"movefiles-file"},h.slice(1))),l.a.createElement("p",null,O),l.a.createElement("table",null,l.a.createElement("tbody",null,Y)),s,l.a.createElement("button",{className:"modal-movefiles-button",onClick:function(){if(y===h)d("You cant move files in same directory");else{var e=y.lastIndexOf("/"),t=y.substring(e);d("");var a={fetch:fetch,accessToken:m.value},n=new r.Dropbox(a);n.filesCopyV2({from_path:y,to_path:h+t,autorename:!1}).then(function(e){k("File Moved"),n.filesListFolder({path:h}).then(function(e){T()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}}},"Move"),l.a.createElement("i",{className:"material-icons upload-close",onClick:T},"close"),l.a.createElement("p",{ref:o,style:{display:"none"}},e.name," moved...")))),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{className:"listBtn",onClick:function(){return t=e.path,F(!0),U(t),void e.pollUpdateMode(!0);var t}}," ",l.a.createElement("i",{className:"material-icons copyfiles-icon"},"file_copy")))},Y=function(e){var t=function(){e.clearSearchUpdate(!0)},a=[".jpg",".jpeg",".png",".pdf",".mp3",".id3",".wav",".mp4",".mov"],n=e.renderData.map(function(n,o){if(n.noSearchResult)return l.a.createElement("tr",{key:n.id},l.a.createElement("td",null,"No search matches"));var c=e.thumbnailsLoaded?e.thumbnails[o]:void 0;if("file"===n[".tag"]){var r=void 0===c?l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file"):l.a.createElement("img",{src:"data:image/jpeg;base64,"+c.thumbnail,alt:""}),i=n.name.lastIndexOf("."),s=n.name.substring(i);return[".wav",".mp3",".id3"].includes(s)&&(r=l.a.createElement("i",{className:"material-icons filesFolders"},"audiotrack")),[".mov",".mp4"].includes(s)&&(r=l.a.createElement("i",{className:"material-icons filesFolders"},"local_movies")),a.includes(s)||(r=l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file")),l.a.createElement("tr",{key:n.id,className:"listFiles","data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"]},l.a.createElement("td",{title:"Download: "+n.name,"data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"],onClick:j,style:{width:"40px"}},r),l.a.createElement("td",{title:"Download: "+n.name,"data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"],onClick:j},n.name),l.a.createElement("td",{style:{width:"80px"}},function(e){0===e&&(e=1);var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}(n.size)),l.a.createElement("td",{style:{width:"200px"}},function(e){var t=e.substring(0,4),a=e.substring(5,7),n=e.substring(8,10);a=a.replace(/^0+/,""),n=n.replace(/^0+/,"");var o=["January","February","March","April","May","June","July","August","September","October","November","December"][a-1];return l.a.createElement("label",null,k()(e).fromNow()+", "+n+" "+o+" "+t)}(n.server_modified)),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(F,{dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(I,{dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,name:n.name,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(A,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower,name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(D,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower})),l.a.createElement("td",{style:{width:"43px",textAlign:"center"}},l.a.createElement(M,{tag:n[".tag"],name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,path:n.path_lower,folder:e.folder,pollUpdateMode:e.pollUpdateMode})))}return"folder"===n[".tag"]?l.a.createElement("tr",{key:n.id,className:"listFiles","data-name":n.name,"data-folder":n.path_lower,"data-tag":n[".tag"]},l.a.createElement("td",{style:{width:"40px"}},l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",null,l.a.createElement(b.c,{className:"listFolderLink",to:"/home"+n.path_lower,onClick:t},n.name," ")),l.a.createElement("td",{style:{width:"80px"}},"..."),l.a.createElement("td",{style:{width:"200px"}},"..."),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(S,{dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(I,{dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,folder:e.folder,path:n.path_lower,name:n.name,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(A,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,pollUpdateMode:e.pollUpdateMode})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(D,{data:n,favorites:e.favorites,favUpdate:e.favUpdate,path:n.path_lower})),l.a.createElement("td",{style:{width:"45px",textAlign:"center"}},l.a.createElement(M,{tag:n[".tag"],name:n.name,dataUpdate:e.dataUpdate,thumbnailUpdate:e.thumbnailUpdate,oldDataUpdate:e.oldDataUpdate,path:n.path_lower,folder:e.folder,pollUpdateMode:e.pollUpdateMode}))):void 0});return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"MyBOX")),n)},T=(a(55),function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),o=a[0],c=a[1],i=Object(n.useRef)(null),s=e.folder;s=s.substring(5);var d,f=Object(n.useRef)(null),p=function(){f.current.style.display="none",e.pollUpdateMode(!1)};return d=l.a.createElement("div",{className:"upload-modal-folder",ref:f},l.a.createElement("label",{htmlFor:"folder",className:"upload-folder-label"},"Type in new folder name"),l.a.createElement("input",{className:"upload-folder-input",type:"text",id:"folder",onChange:function(e){c(e.target.value)},ref:i}),l.a.createElement("i",{className:"material-icons upload-close",onClick:p},"close"),l.a.createElement("br",null),l.a.createElement("button",{className:"upload-folder-modal-button",onClick:function(){var t={fetch:fetch,accessToken:m.value},a=new r.Dropbox(t);a.filesCreateFolderV2({path:s+"/"+o,autorename:!0}).then(function(t){setTimeout(function(){p()},2e3),a.filesListFolder({path:s}).then(function(t){e.thumbnailUpdate([]),e.oldDataUpdate(t.entries),e.dataUpdate(t.entries),w(a,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},"Create new Folder")),l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"upload-folder-button",onClick:function(){f.current.style.display="block",i.current.value="",e.pollUpdateMode(!0)}},l.a.createElement("i",{className:"material-icons-outlined folder-icon-create-folder"}," create_new_folder"),"Create new folder"),d)}),L=function(e){var t=Object(n.useRef)(null);!0===e.clearSearch&&(t.current.value="",e.pollUpdateMode(!1));var a=e.folder.substring(5);return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons header-serach-icon"},"search"),l.a.createElement("input",{className:"header-search",placeholder:"Search...",type:"text",onChange:function(t){var n={fetch:fetch,accessToken:m.value},l=new r.Dropbox(n);t.target.value.length<1&&(e.pollUpdateMode(!1),l.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(l,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})),t.target.value.length>0&&(e.pollUpdateMode(!0),l.filesSearch({path:a,query:t.target.value}).then(function(t){if(0===t.matches.length)e.dataUpdate([{".tag":"file",id:1,noSearchResult:"noResult"}]);else{e.clearSearchUpdate(!1),e.thumbnailUpdate([]);var a=[],n=!0,l=!1,o=void 0;try{for(var c,r=t.matches[Symbol.iterator]();!(n=(c=r.next()).done);n=!0){var i=c.value;a.push(i.metadata)}}catch(s){l=!0,o=s}finally{try{n||null==r.return||r.return()}finally{if(l)throw o}}e.dataUpdate(a)}}))},ref:t}))},z=Object(C.a)([{path:"/",breadcrumb:null}])(function(e){var t=e.breadcrumbs;return l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"material-icons-outlined breadcrumb-home"},"home"),l.a.createElement(l.a.Fragment,null,t.map(function(e){var a=e.match,n=e.breadcrumb;e.location;return l.a.createElement("span",{key:a.url},l.a.createElement(b.d,{to:a.url,className:"breadcrumb-link",onClick:function(){return console.log(t)}}," ",n),l.a.createElement("i",{className:"material-icons breadcrumb"},"arrow_right"))})),l.a.createElement("br",null))}),W=(a(56),function(e){var t,a=Object(n.useState)(null),o=Object(u.a)(a,2),c=o[0],i=o[1],s=e.folder;s=s.substring(5);var d=Object(n.useRef)(null),f=Object(n.useRef)(null),p=function(){f.current.style.display="none",e.pollUpdateMode(!1)};return t=l.a.createElement("div",{className:"upload-modal-files",ref:f},l.a.createElement("input",{type:"file",className:"upload-input",multiple:!0,ref:d}),l.a.createElement("i",{className:"material-icons upload-close",onClick:p},"close"),l.a.createElement("br",null),l.a.createElement("input",{type:"submit",className:"upload-submit",onClick:function(t){t.preventDefault();for(var a=d.current.files,n=Array.from(a),o={fetch:fetch,accessToken:m.value},c=new r.Dropbox(o),u=function(t){if(i(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"Upload in progress"),l.a.createElement("div",{className:"uploadLds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),n[t].size<157286400)console.log(n[t]),c.filesUpload({contents:n[t],path:s+"/"+n[t].name}).then(function(t){i("Upload done"),setTimeout(function(){p(),i(null)},3e3),console.log(e),console.log(t),c.filesListFolder({path:s}).then(function(t){console.log(t),e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(c,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.error(e)});else{for(h=[],b=0;b<n[t].size;)v=Math.min(8e6,n[t].size-b),h.push(n[t].slice(b,b+v)),b+=v;h.reduce(function(e,a,o,r){return 0===o?(console.log(o),e.then(function(){return console.log("start"),i(l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"Upload in progress"),l.a.createElement("div",{className:"uploadLds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),c.filesUploadSessionStart({close:!1,contents:a}).then(function(e){return e.session_id})})):o<r.length-1?(console.log("append"),e.then(function(e){var t={session_id:e,offset:8e6*o};return c.filesUploadSessionAppendV2({cursor:t,close:!1,contents:a}).then(function(){return e})})):e.then(function(e){var l={session_id:e,offset:n[t].size-a.size},o={path:s+"/"+n[t].name,mode:"add",autorename:!0,mute:!1};return c.filesUploadSessionFinish({cursor:l,commit:o,contents:a})})},Promise.resolve()).then(function(t){i("Upload done"),setTimeout(function(){p(),i(null)},3e3),console.log(t),c.filesListFolder({path:s}).then(function(t){console.log(t),e.thumbnailUpdate([]),e.dataUpdate(t.entries),e.oldDataUpdate(t.entries),w(c,t.entries).then(function(t){e.thumbnailUpdate(t)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.error(e)})}},f=0;f<n.length;f++){var h,b,v;u(f)}d.current.value=""},value:"Upload files"}),l.a.createElement("label",{className:"upload-label"},c)),l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"upload-file-button",onClick:function(){f.current.style.display="block",e.pollUpdateMode(!0)}},"Upload files"),t)}),G=a(29),K=(a(57),function(){var e=Object(n.useRef)(null),t=Object(n.useState)("Name Lastname"),o=Object(u.a)(t,2),c=o[0],i=o[1],s=Object(n.useState)("name@domain.com"),d=Object(u.a)(s,2),f=d[0],p=d[1],h=Object(n.useState)(null),b=Object(u.a)(h,2),v=b[0],E=b[1],g=Object(n.useState)("us"),y=Object(u.a)(g,2),U=y[0],N=y[1];Object(n.useEffect)(function(){var e={fetch:fetch,accessToken:m.value};new r.Dropbox(e).usersGetCurrentAccount().then(function(e){i(e.name.display_name),p(e.email),E(e.profile_photo_url),N(e.country)}).catch(function(e){console.log(e)})},[]);var w,O=function(t){e.current.style.display="block"},k=function(t){e.current.style.display="none"},j=f.lastIndexOf("@")+1,x="https://www."+f.substring(j),M=U.toLowerCase();return w=v?l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{style:{border:"1px solid black"},alt:"userPhoto",onMouseOver:O,onMouseOut:k,className:"userPhoto",src:v}),l.a.createElement("img",{style:{border:"1px solid black"},alt:"userPhotoBig",ref:e,className:"userPhotoBig",src:v})):l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{style:{border:"1px solid black"},alt:"userPhoto",onMouseOver:O,onMouseOut:k,className:"userPhoto",src:a(22)}),l.a.createElement("img",{style:{border:"1px solid black"},alt:"userPhotoBig",ref:e,className:"userPhotoBig",src:a(22)})),l.a.createElement("div",{className:"userMain"},l.a.createElement("div",{className:"userFlag"},l.a.createElement(G.a,{code:M,svg:!0})),l.a.createElement("span",{className:"userName"},l.a.createElement("a",{title:"Open your mail",className:"userMailAtag",href:x,target:"_blank",without:"true",rel:"noopener noreferrer"},c)),w)}),J=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"headerLogOutBtn",onClick:function(){f(null),e.updateTokenState(m.value),h(null)}},"LogOut"))},V=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)(function(){var e=p.subscribe(c);return function(){return e.unsubscribe()}},[]);var i=o.sort(function(e,t){return e[".tag"]>t[".tag"]?1:-1}).reverse();Object(n.useEffect)(function(){var e={fetch:fetch,accessToken:m.value},t=new r.Dropbox(e);setInterval(function(){t.filesListFolder({path:"",recursive:!0}).then(function(e){null===p.value?h([]):function(){for(var t=Object(x.a)(p.value),a=e.entries.map(function(e){return e.id}),n=t.map(function(e){return e.id}),l=a.filter(function(e){return-1!==n.indexOf(e)}),o=[],c=function(e){var a=t.find(function(t){return t.id===l[e]});o.push(a)},r=0;r<l.length;r++)c(r);h(o)}()})},5e3)},[]);var s=i.map(function(t){if(e.data.map(function(e){e.id===t.id&&e.name!==t.name&&(t=e)}),"file"===t[".tag"])return l.a.createElement("tr",{key:t.id,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],style:{background:"white",zIndex:"0"},className:"listFiles"},l.a.createElement("td",{title:"Download: "+t.name,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],onClick:j,style:{cursor:"pointer"}},l.a.createElement("i",{className:"material-icons-outlined filesFolders"},"insert_drive_file")),l.a.createElement("td",{title:"Download: "+t.name,"data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"],onClick:j,style:{cursor:"pointer"}},t.name));if("folder"===t[".tag"]){if(t.name.includes("(")){var a=t.name.replace(/[()]/g,""),n=t.path_lower.substring(0,t.path_lower.lastIndexOf("/"))+"/"+a;!function(t,a){var n={fetch:fetch,accessToken:m.value},l=new r.Dropbox(n);l.filesMoveV2({from_path:t,to_path:a,autorename:!0}).then(function(t){l.filesListFolder({path:e.folder.substring(5)}).then(function(t){e.dataUpdate(t.entries)})}).catch(function(e){console.log(e)})}(t.path_lower,n),t.name=a}return l.a.createElement("tr",{style:{background:"white"},key:t.id,className:"listFiles","data-name":t.name,"data-folder":t.path_lower,"data-tag":t[".tag"]},l.a.createElement("td",null,l.a.createElement("i",{className:"material-icons filesFolders"},"folder")),l.a.createElement("td",null,l.a.createElement(b.c,{className:"listFolderLink",to:"/home"+t.path_lower},t.name)))}});return l.a.createElement("div",{className:"favorite_list",style:{position:"relative",top:"56px",left:"8px"}},l.a.createElement("span",{className:"favoriteTitle",style:{fontSize:"14px"}},l.a.createElement("i",{style:{color:"#ffd900",WebkitTextStroke:"1px #4d4d4d",fontSize:"12px"},className:"material-icons"},"star")," Favorites:"),l.a.createElement("table",null,l.a.createElement("tbody",null,s)))},Z=(a(58),function(e){var t=Object(n.useState)(m.value),o=Object(u.a)(t,2),c=o[0],s=o[1],d=Object(n.useState)([]),f=Object(u.a)(d,2),b=f[0],E=f[1],g=Object(n.useState)([]),y=Object(u.a)(g,2),U=y[0],N=y[1],O=Object(n.useState)(!1),k=Object(u.a)(O,2),j=k[0],x=k[1],M=Object(n.useState)([]),F=Object(u.a)(M,2),S=F[0],C=F[1],R=Object(n.useState)([]),I=Object(u.a)(R,2),B=I[0],D=I[1],A=Object(n.useState)(!1),G=Object(u.a)(A,2),Z=G[0],Q=G[1],H=Object(n.useState)(!1),_=Object(u.a)(H,2),X=_[0],P=_[1],q=Object(n.useRef)([]);Object(n.useEffect)(function(){q.current=b},[b]),Object(n.useEffect)(function(){var e=p.subscribe(C);return function(){return e.unsubscribe()}},[]),Object(n.useEffect)(function(){if(U.length===b.length){var e=U.every(function(e,t){return"failure"===e[".tag"]||e.metadata.id===b[t].id});x(e)}else x(!1)},[b,U]),Object(n.useEffect)(function(){if(!Z){var t=setInterval(function(){var t={fetch:fetch,accessToken:m.value},a=new r.Dropbox(t),n=q.current;if("/home"===e.location.pathname)a.filesListFolder({path:""}).then(function(e){if(q.current===n){var t=e.entries.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),l=B.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),o=e.entries.map(function(e){return e.name}).filter(function(e){return void 0!==e}),c=B.map(function(e){return e.name}).filter(function(e){return void 0!==e}),r=t.filter(function(e){return!l.includes(e)}),i=o.filter(function(e){return!c.includes(e)});e.entries.length<B.length&&(N([]),E(e.entries)),e.entries.length!==B.length||r.length>0||i.length>0?(Q(!0),console.log("poll k\xf6rs root"),console.log("poll stoppas tillf\xe4lligt root"),w(a,e.entries).then(function(t){E(e.entries),D(e.entries),N(t)}).then(function(e){Q(!1),console.log("Poll startar igen root")}).catch(function(e){console.log(e)})):console.log("Poll har inte k\xf6rts f\xf6r root")}}).catch(function(e){console.log(e)});else{var l=e.location.pathname;l=l.substring(5),a.filesListFolder({path:l}).then(function(e){if(q.current===n){var t=e.entries.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),l=B.map(function(e){return e.rev}).filter(function(e){return void 0!==e}),o=e.entries.map(function(e){return e.name}).filter(function(e){return void 0!==e}),c=B.map(function(e){return e.name}).filter(function(e){return void 0!==e}),r=t.filter(function(e){return!l.includes(e)}),i=o.filter(function(e){return!c.includes(e)});e.entries.length<B.length&&(N([]),E(e.entries)),e.entries.length!==B.length||r.length>0||i.length>0?(Q(!0),console.log("poll k\xf6rs folder"),console.log("poll stoppas tillf\xe4lligt folder"),w(a,e.entries).then(function(t){E(e.entries),D(e.entries),N(t)}).then(function(e){Q(!1),console.log("Poll startar igen folder")}).catch(function(e){console.log(e)})):console.log("Poll har inte k\xf6rts f\xf6r folder")}}).catch(function(e){console.log(e)})}},5e3);return function(){return clearInterval(t)}}},[b,B,e.location.pathname,Z]),Object(n.useEffect)(function(){Q(!0),console.log("render Home");var t={fetch:fetch,accessToken:m.value},a=new r.Dropbox(t);if("/home"===e.location.pathname)a.filesListFolder({path:""}).then(function(e){console.log("bilder b\xf6rjar h\xe4mtas"),N([]),E(e.entries),D(e.entries),w(a,e.entries).then(function(t){e.entries===q.current&&(console.log("bilder klara"),N(t))}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)});else{var n=e.location.pathname;n=n.substring(5),a.filesListFolder({path:n}).then(function(e){N([]),E(e.entries),D(e.entries),console.log(e.entries.length),console.log("bilder b\xf6rjar h\xe4mtas"),w(a,e.entries).then(function(e){console.log("bilder klara"),N(e)}).catch(function(e){409===e.response.status&&N([])})}).catch(function(e){console.log(e)})}ne(!1),Q(!1)},[e.location.pathname,X]);var $=function(e){E(e)},ee=function(e){N(e)},te=function(e){D(e)},ae=function(e){Q(e)},ne=function(e){P(e)};return null===c?l.a.createElement(v.a,{to:"/"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"MyBOX")),l.a.createElement("header",{className:"mainHeader"},l.a.createElement("div",{className:"header-logo-wrap"},l.a.createElement("img",{id:"header-logo",src:a(59),alt:"My Box logo"})," "),l.a.createElement("span",{className:"headerContent"},l.a.createElement(L,{pollUpdateMode:ae,searchData:b,folder:e.location.pathname,dataUpdate:$,thumbnailUpdate:ee,oldDataUpdate:te,clearSearch:X,clearSearchUpdate:ne}),l.a.createElement("span",null,l.a.createElement(K,null)),l.a.createElement("span",null,l.a.createElement(J,{updateTokenState:s})))),l.a.createElement("div",{className:"mainWrapper"},l.a.createElement("aside",{className:"leftSide"},l.a.createElement("div",{className:"left-link-wrap"},l.a.createElement(W,{folder:e.location.pathname,dataUpdate:$,thumbnailUpdate:ee,oldDataUpdate:te,pollUpdateMode:ae}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(T,{folder:e.location.pathname,dataUpdate:$,thumbnailUpdate:ee,oldDataUpdate:te,pollUpdateMode:ae}))),l.a.createElement("main",{className:"mainMain"},l.a.createElement("label",{onClick:function(){return P(!0)}},l.a.createElement(z,{clearSearchUpdate:ne}),l.a.createElement("br",null)),l.a.createElement("table",{className:"mainTable"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"home-thead-tr"},l.a.createElement("th",{colSpan:"2"},"Name"),l.a.createElement("th",null,"File size"),l.a.createElement("th",null,"Last edited"),l.a.createElement("th",{style:{textAlign:"center"}},"Ren"),l.a.createElement("th",{style:{textAlign:"center"}},"Mov"),l.a.createElement("th",{style:{textAlign:"center"}},"Cop"),l.a.createElement("th",{style:{textAlign:"center"}},"Fav"),l.a.createElement("th",{style:{textAlign:"center"}},"Del"))),l.a.createElement("tbody",null,l.a.createElement(Y,{favorites:S,favUpdate:function(e){C(e),h(e)},thumbnailsLoaded:j,folder:e.location.pathname,dataUpdate:$,thumbnailUpdate:ee,oldDataUpdate:te,renderData:b,thumbnails:U,clearSearchUpdate:ne,pollUpdateMode:ae})))),l.a.createElement("aside",{className:"rightSide"},l.a.createElement("div",{className:"aside"}),l.a.createElement(V,{upFavTok:function(e){h(e)},data:b}))))});var Q=function(){return l.a.createElement(b.a,null,l.a.createElement("div",{className:"App"}),l.a.createElement(v.b,{exact:!0,path:"/",component:s}),l.a.createElement(v.b,{path:"/auth",component:E}),l.a.createElement(v.b,{path:"/home",component:Z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.a151e6ae.chunk.js.map